import{c as k,r as d,j as e,B as g,m as A,n as I}from"./index-CNh2Ysd7.js";import{C as w}from"./Close-CSWdanUp.js";import{I as t}from"./InputField-Cac7SuVh.js";import{B as R}from"./Button-D2SEshHa.js";import{A as E}from"./Alert-BBsTbpkb.js";import{T as K}from"./Typography-DxP0RQcB.js";import{I as H}from"./AlertTitle-BBXxFqxI.js";const j={residentName:"",residentType:"",mobile:"",email:"",residentFlatsize:"",residentFlatarea:"",residentParkingname:"",secondresidentName:"",secondresidentMobile:"",secondresidentEmail:""},_=["1RK","1BHK","2BHK","3BHK","4BHK","5BHK","BHK"],G=({society:m,onCancel:u,editData:l,isEditMode:o,isViewMode:a=!1})=>{const f=k(),[s,p]=d.useState(j),[h,y]=d.useState(!1),[x,v]=d.useState(null),[S,b]=d.useState(""),[C,c]=d.useState(!1);d.useEffect(()=>{p(l?{...j,...l}:j)},[l]);const n=r=>{const{name:i,value:T}=r.target;p(B=>({...B,[i]:T}))},N=async r=>{if(r.preventDefault(),!h){y(!0);try{const i={societyId:m==null?void 0:m._id,...s};o&&(l!=null&&l._id)?(await f(A({_id:l._id,...i})).unwrap(),b("Resident updated successfully")):(await f(I(i)).unwrap(),b("Resident created successfully")),v("success"),c(!0),setTimeout(()=>{c(!1),u()},1500)}catch(i){v("error"),b(i||"Something went wrong"),c(!0)}finally{y(!1)}}},F=s.residentName&&s.residentType&&s.mobile&&s.email&&s.residentFlatsize&&s.residentFlatarea;return e.jsxs(e.Fragment,{children:[C&&x&&e.jsx(E,{type:x,title:x==="success"?"Success!":"Error!",message:S,variant:"filled",showLink:!1,onClose:()=>c(!1)}),e.jsxs(g,{className:"max-w-4xl mx-auto rounded-xl shadow-md bg-white",children:[e.jsxs(g,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRightRadius:12,color:"white"},children:[e.jsx(K,{variant:"h6",children:a?"Resident Details":o?"Update Resident":"Create Resident"}),e.jsx(H,{sx:{color:"white"},onClick:u,children:e.jsx(w,{})})]}),e.jsxs(g,{component:"form",onSubmit:N,px:6,py:4,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{label:"Resident Name",name:"residentName",value:s.residentName,onChange:n,disabled:a}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Resident Type"}),e.jsxs("select",{name:"residentType",value:s.residentType,onChange:n,disabled:a,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Owner",children:"Owner"}),e.jsx("option",{value:"Tenant",children:"Tenant"})]})]}),e.jsx(t,{label:"Resident Mobile Number",name:"mobile",value:s.mobile,onChange:n,disabled:a}),e.jsx(t,{label:"Resident Email ID",name:"email",value:s.email,onChange:n,disabled:a}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Resident Flat Size"}),e.jsxs("select",{name:"residentFlatsize",value:s.residentFlatsize,onChange:n,disabled:a,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Flat Size"}),_.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsx(t,{label:"Resident Flat Area (Sq Ft)",name:"residentFlatarea",type:"number",value:s.residentFlatarea,onChange:n,disabled:a}),e.jsx(t,{label:"Allotted Parking Name",name:"residentParkingname",value:s.residentParkingname,onChange:n,disabled:a}),e.jsx(t,{label:"Secondary Resident Name",name:"secondresidentName",value:s.secondresidentName,onChange:n,disabled:a}),e.jsx(t,{label:"Secondary Resident Mobile",name:"secondresidentMobile",value:s.secondresidentMobile,onChange:n,disabled:a}),e.jsx(t,{label:"Secondary Resident Email",name:"secondresidentEmail",value:s.secondresidentEmail,onChange:n,disabled:a})]}),e.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[!a&&e.jsx(R,{disabled:!F||h,children:h?o?"Updating...":"Creating...":o?"Update Resident":"Create Resident"}),e.jsx(R,{variant:"secondary",onClick:u,children:a?"Back":"Cancel"})]})]})]})]})};export{G as A};
