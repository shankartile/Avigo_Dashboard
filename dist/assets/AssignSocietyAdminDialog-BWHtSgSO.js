import{r as i,c as I,j as e,B as h,aJ as N}from"./index-CNh2Ysd7.js";import{C as T}from"./Close-CSWdanUp.js";import{I as x}from"./InputField-Cac7SuVh.js";import{B as p}from"./Button-D2SEshHa.js";import{A as B}from"./Alert-BBsTbpkb.js";import{T as f}from"./Typography-DxP0RQcB.js";import{I as D}from"./AlertTitle-BBXxFqxI.js";const E={name:"",email:"",mobile:""},J=({onCancel:n,society:a})=>{const[s,b]=i.useState(E),[r,g]=i.useState(!1),[o,l]=i.useState(null),[j,m]=i.useState(""),[y,t]=i.useState(!1),A=I(),c=d=>{const{name:u,value:v}=d.target;b(C=>({...C,[u]:v}))},S=async d=>{if(d.preventDefault(),r||!(a!=null&&a._id)){l("error"),m("Society not selected. Please select a society first."),t(!0);return}g(!0);try{await A(N({societyId:a._id,adminName:s.name,adminEmail:s.email,adminPhone:s.mobile})).unwrap(),l("success"),m("Society admin assigned successfully"),t(!0),setTimeout(()=>{t(!1),n()},1200)}catch(u){l("error"),m(u||"Failed to assign admin"),t(!0)}finally{g(!1)}},w=s.name&&s.email&&s.mobile;return e.jsxs(e.Fragment,{children:[y&&o&&e.jsx(B,{type:o,title:o==="success"?"Success!":"Error!",message:j,variant:"filled",showLink:!1,onClose:()=>t(!1)}),e.jsxs(h,{className:"max-w-3xl mx-auto rounded-xl shadow-md bg-white",children:[e.jsxs(h,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRightRadius:12,color:"white"},children:[e.jsx(f,{variant:"h6",children:"Assign Society Admin"}),e.jsx(D,{sx:{color:"white"},onClick:n,children:e.jsx(T,{})})]}),e.jsxs(h,{component:"form",onSubmit:S,px:6,py:4,children:[a&&e.jsxs(f,{className:"font-outfit mb-4 text-sm text-gray-600",children:["Society: ",e.jsx("strong",{children:a.societyName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{label:"Admin Name",name:"name",value:s.name,onChange:c}),e.jsx(x,{label:"Admin Email",name:"email",value:s.email,onChange:c}),e.jsx(x,{label:"Admin Mobile Number",name:"mobile",value:s.mobile,onChange:c})]}),e.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[e.jsx(p,{disabled:!w||r,children:r?"Assigning...":"Assign Admin"}),e.jsx(p,{variant:"secondary",onClick:n,children:"Cancel"})]})]})]})]})};export{J as A};
