import{r as a,c as pe,d as L,cL as f,cM as me,j as e,B as h,cN as he,cO as xe,cP as fe,cQ as ge}from"./index-CNh2Ysd7.js";import{A as ke}from"./Add-ONoAddvh.js";import{D as Be}from"./Delete-BKL8mfiA.js";import{V as be}from"./Visibility-CFK2wX7e.js";import{C as V}from"./Close-CSWdanUp.js";import{D as je,E as ye}from"./DataTable-CBDiE-I1.js";import{I as Ce}from"./InputField-Cac7SuVh.js";import{B as v}from"./Button-D2SEshHa.js";import{T as Te}from"./ToggleSwitch-CRLgVpk1.js";import{A as z}from"./Alert-BBsTbpkb.js";import{S as H}from"./SweetAlert-DUVT9XWx.js";import{T as A}from"./Typography-DxP0RQcB.js";import{D as O,a as R}from"./Dialog-CMeqEyOr.js";import{D as we}from"./DialogTitle-sP3uGIgc.js";import{I as g}from"./AlertTitle-BBXxFqxI.js";import{T as U}from"./Tooltip-B4POfKz-.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./Divider-1omdH51K.js";import"./Tabs-DWd8sdsH.js";import"./skeleton-H-TAVWvB.js";const Se=()=>{const[u,B]=a.useState({id:"",brand:"",bike_type_id:""}),[b,D]=a.useState(null),[j,y]=a.useState(null),[r,n]=a.useState(null),[k,l]=a.useState(""),[M,s]=a.useState(!1),[I,p]=a.useState(!1),[_e,ve]=a.useState(!1),[N,C]=a.useState(null),[K,T]=a.useState(!1),[m,Y]=a.useState(""),[o,E]=a.useState(0),[c,$]=a.useState(10),[x,w]=a.useState(null),[q,S]=a.useState(!1),i=pe(),{BikeBrandMaster:Q=[],totalItems:G}=L(t=>t.BikeBrandMaster),{BikeTypeMaster:_}=L(t=>t.BikeTypeMaster),J=Q.map(t=>({...t,id:t._id}));a.useEffect(()=>{const t=setTimeout(()=>{i(f({search:m,page:o,limit:c}))},500);return()=>clearTimeout(t)},[m,o,c]),a.useEffect(()=>{const t=setTimeout(()=>{i(me({search:m,page:o,limit:c}))},500);return()=>clearTimeout(t)},[m,o,c]);const F=t=>{const{name:d,value:W}=t.target;B(ue=>({...ue,[d]:W}))},X=u.brand.trim()!=="",Z=async()=>{try{const t={brand:u.brand,bike_type_id:u.bike_type_id||""},d=await i(ge(t)).unwrap();n("success"),l("Bike Brand Added successfully."),s(!0),setTimeout(()=>s(!1),3e3),i(f({search:m,page:o,limit:c})),p(!1)}catch(t){n("error"),l("Failed to add Bike Brand : "+t),s(!0),setTimeout(()=>s(!1),3e3)}},ee=async(t,d)=>{try{B({id:t._id||"",brand:t.brand||"",bike_type_id:t.bike_type_id||""}),y(d),p(!0)}catch{n("error"),l("Unable to fetch Bike Brand  details for editing."),s(!0)}},te=async()=>{try{const t={_id:u.id,brand:u.brand,bike_type_id:u.bike_type_id||""},d=await i(fe(t)).unwrap();n("success"),l("Bike Brand  updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),p(!1),y(null),i(f({search:m,page:o,limit:c}))}catch{n("error"),l("Failed to update Bike Brand : "),s(!0),setTimeout(()=>s(!1),3e3)}},se=t=>{C(t),T(!0)},ae=async()=>{if(N){try{await i(xe(N)).unwrap(),n("error"),l("Bike Brand  deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),i(f({search:m,page:o,limit:c}))}catch(t){n("error"),l("Delete failed: "+t),s(!0),setTimeout(()=>s(!1),3e3)}T(!1),C(null)}},re=()=>{T(!1),C(null)},ie=t=>{w(t),S(!0)},ne=async()=>{if(x){try{await i(he({_id:x._id,isActive:!x.isActive})).unwrap(),n("success"),l(`Bike Brand ${x.isActive?"deactivated":"activated"} successfully.`),s(!0),i(f({search:m,page:o,limit:c}))}catch(t){n("error"),l("Status toggle failed: "+t),s(!0)}setTimeout(()=>s(!1),3e3),S(!1),w(null)}},le=()=>{S(!1),w(null)},oe=t=>{D(t)},P=()=>{D(null),p(!1)},ce=t=>{Y(t),E(0)},de=[{accessorKey:"brand",header:"Bike brand"},{accessorKey:"bike_type_name",header:"Bike Type"},{header:"Actions",Cell:({row:t})=>e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(U,{title:"View Details",children:e.jsx(g,{color:"primary",onClick:()=>oe(t.original),children:e.jsx(be,{})})}),!t.original.isOthers&&e.jsx(U,{title:"Edit",children:e.jsx("span",{children:e.jsx(g,{color:"secondary",onClick:()=>ee(t.original,t.index),children:e.jsx(ye,{})})})}),!t.original.isOthers&&e.jsx(g,{color:"error",onClick:()=>se(t.original._id),children:e.jsx(Be,{})}),e.jsx(Te,{checked:t.original.isActive,onChange:()=>ie(t.original),tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(H,{show:q,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${x!=null&&x.isActive?"deactivate":"activate"} this Bike Brand?`,onConfirm:ne,onCancel:le,confirmText:"Yes",cancelText:"No"}),e.jsx(H,{show:K,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Bike Brand ?",onConfirm:ae,onCancel:re,confirmText:"Yes",cancelText:"No"}),M&&r&&e.jsx("div",{className:"p-4",children:e.jsx(z,{type:r,title:r==="success"?"Success!":r==="error"&&k.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:k,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),I?e.jsxs(O,{open:I,onClose:(t,d)=>{d!=="backdropClick"&&p(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(we,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:j!==null?"Edit Bike Brand":"Add Bike Brand"}),e.jsx(g,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>p(!1),children:e.jsx(V,{})})]}),e.jsxs(R,{children:[M&&r&&e.jsx("div",{className:"mb-4",children:e.jsx(z,{type:r,title:r==="success"?"Success!":r==="error"&&k.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:k,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white mb-1 block",children:["Bike Type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"bike_type_id",value:u.bike_type_id,onChange:F,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Type"}),_==null?void 0:_.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.bike_type},t._id))]})]}),e.jsx(Ce,{label:"Bike Brand ",name:"brand",value:u.brand,onChange:F})]}),e.jsxs(h,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(v,{onClick:j!==null?te:Z,className:"rounded-[25px]",disabled:!X,children:j!==null?"Update Bike Brand ":"Add Bike Brand "}),e.jsx(v,{variant:"secondary",onClick:()=>p(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{ml:2,children:e.jsx(A,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Bike Brand Management"})}),e.jsxs(v,{onClick:()=>{B({id:"",brand:"",bike_type_id:""}),y(null),p(!0)},children:[e.jsx(ke,{}),"Add New Bike Brand "]})]}),e.jsx(je,{clickHandler:ce,data:J,columns:de,rowCount:G,pageIndex:o,pageSize:c,onPaginationChange:({pageIndex:t,pageSize:d})=>{E(t),$(d)}})]}),e.jsx(O,{open:!!b,onClose:P,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(h,{className:"rounded-xl overflow-hidden",children:[e.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(A,{className:"font-outfit",variant:"h6",children:"Bike Brand Details"}),e.jsx(g,{sx:{color:"white"},onClick:P,children:e.jsx(V,{})})]}),e.jsx(R,{children:b&&e.jsx(h,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(A,{className:"font-outfit",children:[e.jsx("strong",{children:"Bike Brand :"})," ",b.brand]})})})]})})]})},it=()=>e.jsx(e.Fragment,{children:e.jsx(Se,{})});export{it as default};
