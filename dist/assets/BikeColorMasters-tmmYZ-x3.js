import{r as s,c as de,d as ue,d5 as f,j as e,B as d,d6 as me,d7 as pe,d8 as he,d9 as xe}from"./index-CNh2Ysd7.js";import{A as fe}from"./Add-ONoAddvh.js";import{D as ge}from"./Delete-BKL8mfiA.js";import{V as Ce}from"./Visibility-CFK2wX7e.js";import{C as W}from"./Close-CSWdanUp.js";import{D as ke,E as je}from"./DataTable-CBDiE-I1.js";import{I as L}from"./InputField-Cac7SuVh.js";import{B as A}from"./Button-D2SEshHa.js";import{T as _e}from"./ToggleSwitch-CRLgVpk1.js";import{A as V}from"./Alert-BBsTbpkb.js";import{S as z}from"./SweetAlert-DUVT9XWx.js";import{T as _}from"./Typography-DxP0RQcB.js";import{D as H,a as R}from"./Dialog-CMeqEyOr.js";import{D as be}from"./DialogTitle-sP3uGIgc.js";import{I as g}from"./AlertTitle-BBXxFqxI.js";import{T as U}from"./Tooltip-B4POfKz-.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./Divider-1omdH51K.js";import"./Tabs-DWd8sdsH.js";import"./skeleton-H-TAVWvB.js";const ye=()=>{const[r,C]=s.useState({id:"",bike_color_name:"",bike_color_code:""}),[k,D]=s.useState(null),[b,y]=s.useState(null),[l,a]=s.useState(null),[j,i]=s.useState(""),[I,t]=s.useState(!1),[M,u]=s.useState(!1),[we,Te]=s.useState(!1),[B,w]=s.useState(null),[Y,T]=s.useState(!1),[x,$]=s.useState(""),[m,N]=s.useState(0),[p,q]=s.useState(10),[h,S]=s.useState(null),[K,v]=s.useState(!1),n=de(),{BikeColorMaster:G=[],totalItems:J}=ue(o=>o.BikeColorMaster),O=G.map(o=>({...o,id:o._id}));s.useEffect(()=>{const o=setTimeout(()=>{n(f({search:x,page:m,limit:p}))},500);return()=>clearTimeout(o)},[x,m,p]);const E=o=>{const{name:c,value:P}=o.target;C(ce=>({...ce,[c]:P}))};r.bike_color_name.trim();const Q=async()=>{try{const o={bike_color_name:r.bike_color_name,bike_color_code:r.bike_color_code},c=await n(xe(o)).unwrap();a("success"),i("Color Added successfully."),t(!0),setTimeout(()=>t(!1),3e3),n(f({search:x,page:m,limit:p})),u(!1)}catch(o){a("error"),i("Failed to add Color: "+o),t(!0),setTimeout(()=>t(!1),3e3)}},X=async(o,c)=>{try{C({id:o._id||"",bike_color_name:o.bike_color_name||"",bike_color_code:o.bike_color_code||""}),y(c),u(!0)}catch{a("error"),i("Unable to fetch Color details for editing."),t(!0)}},Z=async()=>{try{const o={_id:r.id,bike_color_name:r.bike_color_name,bike_color_code:r.bike_color_code},c=await n(he(o)).unwrap();a("success"),i("Color updated successfully."),t(!0),setTimeout(()=>t(!1),3e3),u(!1),y(null),n(f({search:x,page:m,limit:p}))}catch{a("error"),i("Failed to update Color: "),t(!0),setTimeout(()=>t(!1),3e3)}},ee=o=>{w(o),T(!0)},oe=async()=>{if(B){try{await n(pe(B)).unwrap(),a("error"),i("Color deleted successfully."),t(!0),setTimeout(()=>t(!1),3e3),n(f({search:x,page:m,limit:p}))}catch(o){a("error"),i("Delete failed: "+o),t(!0),setTimeout(()=>t(!1),3e3)}T(!1),w(null)}},te=()=>{T(!1),w(null)},se=o=>{S(o),v(!0)},re=async()=>{if(h){try{await n(me({_id:h._id,isActive:!h.isActive})).unwrap(),a("success"),i(`Color ${h.isActive?"deactivated":"activated"} successfully.`),t(!0),n(f({search:x,page:m,limit:p}))}catch(o){a("error"),i("Status toggle failed: "+o),t(!0)}setTimeout(()=>t(!1),3e3),v(!1),S(null)}},le=()=>{v(!1),S(null)},ae=o=>{D(o)},F=()=>{D(null),u(!1)},ie=o=>{$(o),N(0)},ne=[{accessorKey:"bike_color_name",header:"Color Name"},{header:"Actions",Cell:({row:o})=>e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(U,{title:"View Details",children:e.jsx(g,{color:"primary",onClick:()=>ae(o.original),children:e.jsx(Ce,{})})}),e.jsx(U,{title:"Edit",children:e.jsx(g,{color:"secondary",onClick:()=>X(o.original,o.index),children:e.jsx(je,{})})}),e.jsx(g,{color:"error",onClick:()=>ee(o.original._id),children:e.jsx(ge,{})}),e.jsx(_e,{checked:o.original.isActive,onChange:()=>se(o.original),tooltipTitle:o.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(z,{show:K,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${h!=null&&h.isActive?"deactivate":"activate"} this color?`,onConfirm:re,onCancel:le,confirmText:"Yes",cancelText:"No"}),e.jsx(z,{show:Y,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Color?",onConfirm:oe,onCancel:te,confirmText:"Yes",cancelText:"No"}),I&&l&&e.jsx("div",{className:"p-4",children:e.jsx(V,{type:l,title:l==="success"?"Success!":l==="error"&&j.toLowerCase().includes("deleted")?"Deleted!":l==="error"?"Error!":"Warning!",message:j,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),M?e.jsxs(H,{open:M,onClose:(o,c)=>{c!=="backdropClick"&&u(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(be,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:b!==null?"Edit Color":"Add Color"}),e.jsx(g,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>u(!1),children:e.jsx(W,{})})]}),e.jsxs(R,{children:[I&&l&&e.jsx("div",{className:"mb-4",children:e.jsx(V,{type:l,title:l==="success"?"Success!":l==="error"&&j.toLowerCase().includes("deleted")?"Deleted!":l==="error"?"Error!":"Warning!",message:j,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:[e.jsx(L,{label:"Color Title",name:"bike_color_name",value:r.bike_color_name,onChange:E}),e.jsxs(d,{display:"flex",alignItems:"center",gap:6,children:[e.jsx(L,{label:"Color Code",name:"bike_color_code",value:r.bike_color_code,onChange:E,disabled:!0}),e.jsx("label",{htmlFor:"color",style:{fontWeight:500},children:"Choose Color Code"}),e.jsx("input",{type:"color",value:r.bike_color_code,onChange:o=>C({...r,bike_color_code:o.target.value}),style:{width:"55px",height:"55px",border:"none",background:"none",cursor:"pointer"},title:"Pick Color"})]})]}),e.jsxs(d,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(A,{onClick:b!==null?Z:Q,className:"rounded-[25px]",children:b!==null?"Update Color":"Add Color"}),e.jsx(A,{variant:"secondary",onClick:()=>u(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(d,{ml:2,children:e.jsx(_,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Color Management"})}),e.jsxs(A,{onClick:()=>{C({id:"",bike_color_name:"",bike_color_code:""}),y(null),u(!0)},children:[e.jsx(fe,{}),"Add New Color"]})]}),e.jsx(ke,{clickHandler:ie,data:O,columns:ne,rowCount:J,pageIndex:m,pageSize:p,onPaginationChange:({pageIndex:o,pageSize:c})=>{N(o),q(c)}})]}),e.jsx(H,{open:!!k,onClose:F,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(d,{className:"rounded-xl overflow-hidden",children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(_,{className:"font-outfit",variant:"h6",children:"Color Details"}),e.jsx(g,{sx:{color:"white"},onClick:F,children:e.jsx(W,{})})]}),e.jsx(R,{children:k&&e.jsxs(d,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(_,{className:"font-outfit",children:[e.jsx("strong",{children:"Color Name:"})," ",k.bike_color_name]}),e.jsxs(_,{className:"font-outfit",children:[e.jsx("strong",{children:"Color Code:"})," ",k.bike_color_code]})]})})]})})]})},to=()=>e.jsx(e.Fragment,{children:e.jsx(ye,{})});export{to as default};
