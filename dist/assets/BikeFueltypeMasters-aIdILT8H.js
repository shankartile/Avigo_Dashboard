import{r as l,c as oe,d as ne,cX as y,j as e,B as c,cY as ce,cZ as ue,c_ as de,c$ as pe}from"./index-CcNgdVLz.js";import{C as N}from"./Close-eApB0hKv.js";import{D as fe,E as me}from"./DataTable-DIxG5frN.js";import{I as he}from"./InputField-BQ5ewBIw.js";import{B as P}from"./Button-B4_V5GRV.js";import{T as ye}from"./ToggleSwitch-CZt8XOld.js";import{A as W}from"./Alert-U3gIVFWt.js";import{S as _}from"./SweetAlert-BfCzCAJa.js";import{T as C}from"./Typography-BMOygWke.js";import{D as L,a as z}from"./Dialog-BdfS6Lfy.js";import{D as xe}from"./DialogTitle-BbPUlM9A.js";import{I as w}from"./AlertTitle-C4QpKbd8.js";import{T as ge}from"./Tooltip-C-v54PpA.js";import"./createSvgIcon-ClJPFlmG.js";import"./Cancel-CkCQy-6N.js";import"./utils-BtYGnpaM.js";import"./index-CLpR2HuM.js";import"./DateTimeField-CYfYG2Su.js";import"./index-D3LyqDt4.js";import"./useSlotProps-z1QAC-gu.js";import"./CircularProgress-CVM8C023.js";import"./Chip-YFG14ne-.js";import"./dividerClasses-Bv38dMpn.js";import"./Pagination-DR3bn4wR.js";import"./Divider-BePmc644.js";import"./Tabs-CWf6flOX.js";import"./skeleton-DjwwWlQi.js";const ke=()=>{const[h,B]=l.useState({id:"",fueltype:""}),[g,H]=l.useState(null),[k,S]=l.useState(null),[a,r]=l.useState(null),[x,i]=l.useState(""),[b,s]=l.useState(!1),[F,u]=l.useState(!1),[je,Te]=l.useState(!1),[v,M]=l.useState(null),[R,A]=l.useState(!1),[m,U]=l.useState(""),[d,D]=l.useState(0),[p,Y]=l.useState(10),[f,j]=l.useState(null),[$,T]=l.useState(!1),o=oe(),{BikeFueltypeMaster:K=[],totalItems:V}=ne(t=>t.BikeFueltypeMaster),X=K.map(t=>({...t,id:t._id}));l.useEffect(()=>{const t=setTimeout(()=>{o(y({search:m,page:d,limit:p}))},500);return()=>clearTimeout(t)},[m,d,p]);const Z=t=>{const{name:n,value:E}=t.target;B(ie=>({...ie,[n]:E}))},q=h.fueltype.trim()!=="",G=async()=>{try{const t={fueltype:h.fueltype},n=await o(pe(t)).unwrap();r("success"),i("Bike fueltype Added successfully."),s(!0),setTimeout(()=>s(!1),3e3),o(y({search:m,page:d,limit:p})),u(!1)}catch(t){r("error"),i("Failed to add Bike fueltype : "+t),s(!0),setTimeout(()=>s(!1),3e3)}},J=async(t,n)=>{try{B({id:t._id||"",fueltype:t.fueltype||""}),S(n),u(!0)}catch{r("error"),i("Unable to fetch Bike fueltype  details for editing."),s(!0)}},O=async()=>{try{const t={_id:h.id,fueltype:h.fueltype},n=await o(de(t)).unwrap();r("success"),i("Bike fueltype  updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),u(!1),S(null),o(y({search:m,page:d,limit:p}))}catch{r("error"),i("Failed to update Bike fueltype : "),s(!0),setTimeout(()=>s(!1),3e3)}},Q=async()=>{if(v){try{await o(ue(v)).unwrap(),r("error"),i("Bike fueltype  deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),o(y({search:m,page:d,limit:p}))}catch(t){r("error"),i("Delete failed: "+t),s(!0),setTimeout(()=>s(!1),3e3)}A(!1),M(null)}},ee=()=>{A(!1),M(null)},te=t=>{j(t),T(!0)},se=async()=>{if(f){try{await o(ce({_id:f._id,isActive:!f.isActive})).unwrap(),r("success"),i(`Fueltype ${f.isActive?"deactivated":"activated"} successfully.`),s(!0),o(y({search:m,page:d,limit:p}))}catch(t){r("error"),i("Status toggle failed: "+t),s(!0)}setTimeout(()=>s(!1),3e3),T(!1),j(null)}},le=()=>{T(!1),j(null)},I=()=>{H(null),u(!1)},ae=t=>{U(t),D(0)},re=[{accessorKey:"fueltype",header:"Bike fueltype"},{header:"Actions",Cell:({row:t})=>e.jsxs(c,{display:"flex",gap:1,children:[e.jsx(ge,{title:"Edit",children:e.jsx(w,{color:"secondary",onClick:()=>J(t.original,t.index),children:e.jsx(me,{})})}),e.jsx(ye,{checked:t.original.isActive,onChange:()=>te(t.original),tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(_,{show:$,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${f!=null&&f.isActive?"deactivate":"activate"} this fueltype?`,onConfirm:se,onCancel:le,confirmText:"Yes",cancelText:"No"}),e.jsx(_,{show:R,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Bike fueltype ?",onConfirm:Q,onCancel:ee,confirmText:"Yes",cancelText:"No"}),b&&a&&e.jsx("div",{className:"p-4",children:e.jsx(W,{type:a,title:a==="success"?"Success!":a==="error"&&x.toLowerCase().includes("deleted")?"Deleted!":a==="error"?"Error!":"Warning!",message:x,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),F?e.jsxs(L,{open:F,onClose:(t,n)=>{n!=="backdropClick"&&u(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(c,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(xe,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:k!==null?"Edit Bike fueltype":"Add Bike fueltype"}),e.jsx(w,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>u(!1),children:e.jsx(N,{})})]}),e.jsxs(z,{children:[b&&a&&e.jsx("div",{className:"mb-4",children:e.jsx(W,{type:a,title:a==="success"?"Success!":a==="error"&&x.toLowerCase().includes("deleted")?"Deleted!":a==="error"?"Error!":"Warning!",message:x,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(he,{label:"Bike Fuel Type ",name:"fueltype",value:h.fueltype,onChange:Z})}),e.jsxs(c,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(P,{onClick:k!==null?O:G,className:"rounded-[25px]",disabled:!q,children:k!==null?"Update Bike fueltype ":"Add Bike fueltype "}),e.jsx(P,{variant:"secondary",onClick:()=>u(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:e.jsx(c,{ml:2,children:e.jsx(C,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Bike Fuel Type Management"})})}),e.jsx(fe,{clickHandler:ae,data:X,columns:re,rowCount:V,pageIndex:d,pageSize:p,onPaginationChange:({pageIndex:t,pageSize:n})=>{D(t),Y(n)}})]}),e.jsx(L,{open:!!g,onClose:I,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(c,{className:"rounded-xl overflow-hidden",children:[e.jsxs(c,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(C,{className:"font-outfit",variant:"h6",children:"Fuel Type Details"}),e.jsx(w,{sx:{color:"white"},onClick:I,children:e.jsx(N,{})})]}),e.jsx(z,{children:g&&e.jsx(c,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(C,{className:"font-outfit",children:[e.jsx("strong",{children:"Fuel Type:"})," ",g.fueltype]})})})]})})]})},qe=()=>e.jsx(e.Fragment,{children:e.jsx(ke,{})});export{qe as default};
