import{r as a,c as pe,d as I,cR as k,cS as he,cM as xe,j as t,B as h,cT as ke,cU as fe,cV as be,cW as ge}from"./index-CcNgdVLz.js";import{A as _e}from"./Add-CQx2oSmS.js";import{D as je}from"./Delete-BWjouR_h.js";import{V as ye}from"./Visibility-Bad1pPYX.js";import{C as U}from"./Close-eApB0hKv.js";import{D as Ne,E as Be}from"./DataTable-DIxG5frN.js";import{I as Ce}from"./InputField-BQ5ewBIw.js";import{B as E}from"./Button-B4_V5GRV.js";import{T as Te}from"./ToggleSwitch-CZt8XOld.js";import{A as z}from"./Alert-U3gIVFWt.js";import{S as H}from"./SweetAlert-BfCzCAJa.js";import{T as j}from"./Typography-BMOygWke.js";import{D as K,a as O}from"./Dialog-BdfS6Lfy.js";import{D as ve}from"./DialogTitle-BbPUlM9A.js";import{I as f}from"./AlertTitle-C4QpKbd8.js";import{T as Y}from"./Tooltip-C-v54PpA.js";import"./createSvgIcon-ClJPFlmG.js";import"./Cancel-CkCQy-6N.js";import"./utils-BtYGnpaM.js";import"./index-CLpR2HuM.js";import"./DateTimeField-CYfYG2Su.js";import"./index-D3LyqDt4.js";import"./useSlotProps-z1QAC-gu.js";import"./CircularProgress-CVM8C023.js";import"./Chip-YFG14ne-.js";import"./dividerClasses-Bv38dMpn.js";import"./Pagination-DR3bn4wR.js";import"./Divider-BePmc644.js";import"./Tabs-CWf6flOX.js";import"./skeleton-DjwwWlQi.js";const we=()=>{const[i,y]=a.useState({bike_brand_id:"",bike_type_id:"",bike_brand_name:"",id:"",bikename:""}),[b,F]=a.useState(null),[N,B]=a.useState(null),[n,o]=a.useState(null),[g,c]=a.useState(""),[P,s]=a.useState(!1),[W,u]=a.useState(!1),[Se,Ae]=a.useState(!1),[L,C]=a.useState(null),[$,T]=a.useState(!1),[p,q]=a.useState(""),[d,V]=a.useState(0),[m,G]=a.useState(10),[x,v]=a.useState(null),[J,w]=a.useState(!1),r=pe(),{BikeNameMaster:Q=[],totalItems:X}=I(e=>e.BikeNameMaster),Z=Q.map(e=>({...e,id:e._id})),{BikeBrandMaster:_}=I(e=>e.BikeBrandMaster),{BikeTypeMaster:S}=I(e=>e.BikeTypeMaster);a.useEffect(()=>{const e=setTimeout(()=>{r(k({search:p,page:d,limit:m}))},500);return()=>clearTimeout(e)},[p,d,m]),a.useEffect(()=>{const e=setTimeout(()=>{r(he())},500);return()=>clearTimeout(e)},[r]),a.useEffect(()=>{r(xe({search:p,page:d,limit:m}))},[p,d,m]);const A=e=>{const{name:l,value:D}=e.target;y(M=>({...M,[l]:D}))},ee=i.bikename.trim()!=="",te=async()=>{try{const e=_.find(M=>M._id===i.bike_brand_id),l={bike_type_id:i.bike_type_id||"",bike_brand_id:i.bike_brand_id||"",bike_brand_name:(e==null?void 0:e.brand)||"",bikename:i.bikename},D=await r(ge(l)).unwrap();o("success"),c("Bike Name Added successfully."),s(!0),setTimeout(()=>s(!1),3e3),r(k({search:p,page:d,limit:m})),u(!1)}catch(e){o("error"),c("Failed to add Bike Name: "+e),s(!0),setTimeout(()=>s(!1),3e3)}},se=async(e,l)=>{try{y({id:e._id||"",bike_type_id:e.bike_type_id||"",bike_brand_id:e.bike_brand_id||"",bike_brand_name:e.brand||"",bikename:e.bikename||""}),B(l),u(!0)}catch{o("error"),c("Unable to fetch Bike Name details for editing."),s(!0)}},ae=async()=>{try{const e={_id:i.id,bike_type_id:i.bike_type_id||"",bike_brand_id:i.bike_brand_id||"",bikename:i.bikename},l=await r(be(e)).unwrap();o("success"),c("Bike Name updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),u(!1),B(null),r(k({search:p,page:d,limit:m}))}catch{o("error"),c("Failed to update Bike Name: "),s(!0),setTimeout(()=>s(!1),3e3)}},ie=e=>{C(e),T(!0)},re=async()=>{if(L){try{await r(fe(L)).unwrap(),o("error"),c("Bike Name deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),r(k({search:p,page:d,limit:m}))}catch(e){o("error"),c("Delete failed: "+e),s(!0),setTimeout(()=>s(!1),3e3)}T(!1),C(null)}},ne=()=>{T(!1),C(null)},le=e=>{v(e),w(!0)},oe=async()=>{if(x){try{await r(ke({_id:x._id,isActive:!x.isActive})).unwrap(),o("success"),c(`Bike name ${x.isActive?"deactivated":"activated"} successfully.`),s(!0),r(k({search:p,page:d,limit:m}))}catch(e){o("error"),c("Status toggle failed: "+e),s(!0)}setTimeout(()=>s(!1),3e3),w(!1),v(null)}},ce=()=>{w(!1),v(null)},de=e=>{F(e)},R=()=>{F(null),u(!1)},me=e=>{q(e),V(0)},ue=[{accessorKey:"bikename",header:"Bike Name"},{accessorKey:"bike_type_name",header:"Bike Type"},{accessorKey:"bike_brand_name",header:"Brand"},{header:"Actions",Cell:({row:e})=>t.jsxs(h,{display:"flex",gap:1,children:[t.jsx(Y,{title:"View Details",children:t.jsx(f,{color:"primary",onClick:()=>de(e.original),children:t.jsx(ye,{})})}),!e.original.isOthers&&t.jsx(Y,{title:"Edit",children:t.jsx("span",{children:t.jsx(f,{color:"secondary",onClick:()=>se(e.original,e.index),children:t.jsx(Be,{})})})}),!e.original.isOthers&&t.jsx(f,{color:"error",onClick:()=>ie(e.original._id),children:t.jsx(je,{})}),t.jsx(Te,{checked:e.original.isActive,onChange:()=>le(e.original),tooltipTitle:e.original.isActive?"Deactivate":"Activate"})]})}];return t.jsxs(t.Fragment,{children:[t.jsx(H,{show:J,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${x!=null&&x.isActive?"deactivate":"activate"} this Bike name?`,onConfirm:oe,onCancel:ce,confirmText:"Yes",cancelText:"No"}),t.jsx(H,{show:$,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Bike Name?",onConfirm:re,onCancel:ne,confirmText:"Yes",cancelText:"No"}),P&&n&&t.jsx("div",{className:"p-4",children:t.jsx(z,{type:n,title:n==="success"?"Success!":n==="error"&&g.toLowerCase().includes("deleted")?"Deleted!":n==="error"?"Error!":"Warning!",message:g,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),W?t.jsxs(K,{open:W,onClose:(e,l)=>{l!=="backdropClick"&&u(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[t.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[t.jsx(ve,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:N!==null?"Edit Bike Name":"Add Bike Name"}),t.jsx(f,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>u(!1),children:t.jsx(U,{})})]}),t.jsxs(O,{children:[P&&n&&t.jsx("div",{className:"mb-4",children:t.jsx(z,{type:n,title:n==="success"?"Success!":n==="error"&&g.toLowerCase().includes("deleted")?"Deleted!":n==="error"?"Error!":"Warning!",message:g,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),t.jsxs("div",{className:"p-4 pb-30 grid grid-cols-1 md:grid-cols-1 gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-sm text-gray-600 dark:text-white mb-1 block",children:["Bike Type ",t.jsx("span",{className:"text-error-500",children:" * "})]}),t.jsxs("select",{name:"bike_type_id",value:i.bike_type_id,onChange:A,className:"mt-1 p-2 border rounded",children:[t.jsx("option",{value:"",children:"Select Bike Type"}),S==null?void 0:S.filter(e=>e.isActive).map(e=>t.jsx("option",{value:e._id,children:e.bike_type},e._id))]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-sm text-gray-600 dark:text-white mb-1 block",children:["Bike Brand ",t.jsx("span",{className:"text-error-500",children:" * "})]}),t.jsxs("select",{name:"bike_brand_id",value:i.bike_brand_id,onChange:A,className:"mt-1 p-2 border rounded",children:[t.jsx("option",{value:"",children:"Select Bike Brand"}),_==null?void 0:_.filter(e=>e.isActive&&(!i.bike_type_id||e.bike_type_id===i.bike_type_id)).map(e=>t.jsx("option",{value:e._id,children:e.brand},e._id))]})]}),t.jsx(Ce,{label:"Bike Name",name:"bikename",value:i.bikename,onChange:A})]}),t.jsxs(h,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[t.jsx(E,{onClick:N!==null?ae:te,className:"rounded-[25px]",disabled:!ee,children:N!==null?"Update Bike Name":"Add Bike Name"}),t.jsx(E,{variant:"secondary",onClick:()=>u(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[t.jsx(h,{ml:2,children:t.jsx(j,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Bike Name Management"})}),t.jsxs(E,{onClick:()=>{y({id:"",bikename:""}),B(null),u(!0)},children:[t.jsx(_e,{}),"Add New Bike Name"]})]}),t.jsx(Ne,{clickHandler:me,data:Z,columns:ue,rowCount:X,pageIndex:d,pageSize:m,onPaginationChange:({pageIndex:e,pageSize:l})=>{V(e),G(l)}})]}),t.jsx(K,{open:!!b,onClose:R,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:t.jsxs(h,{className:"rounded-xl overflow-hidden",children:[t.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[t.jsx(j,{className:"font-outfit",variant:"h6",children:"Bike Name Details"}),t.jsx(f,{sx:{color:"white"},onClick:R,children:t.jsx(U,{})})]}),t.jsx(O,{children:b&&t.jsxs(h,{display:"flex",flexDirection:"column",gap:2,children:[t.jsxs(j,{className:"font-outfit",children:[t.jsx("strong",{children:"Bike Name:"})," ",b.bikename]}),t.jsxs(j,{className:"font-outfit",children:[t.jsx("strong",{children:"Bike brand name:"})," ",b.bike_brand_name]})]})})]})})]})},lt=()=>t.jsx(t.Fragment,{children:t.jsx(we,{})});export{lt as default};
