import{r as i,c as ne,d as le,df as x,j as e,B as l,dg as ce,dh as de,di as pe,dj as he}from"./index-N8t8oMzR.js";import{V as ue}from"./Visibility-CgGAKN6P.js";import{C as O}from"./Close-CwR_quIe.js";import{I as me}from"./InputField-riaj6edy.js";import{B as N}from"./Button-CBNcrDpD.js";import{D as fe}from"./DataTable-BqUD-dAi.js";import{T as xe}from"./ToggleSwitch-DR4b514_.js";import{A as F}from"./Alert-CgNUKTJk.js";import{S as E}from"./SweetAlert-vzLgp13W.js";import{T as C}from"./Typography-CKlLxaDL.js";import{D as P,a as W}from"./Dialog-BGF2t3L7.js";import{D as we}from"./DialogTitle-D6DEKDqS.js";import{I as B}from"./AlertTitle-D9ejxV9_.js";import{T as ge}from"./Tooltip-CwyNn424.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./useSlotProps-CaIca8GW.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";const ke=()=>{const[f,L]=i.useState({id:"",ownership:""}),[g,T]=i.useState(null),[k,V]=i.useState(null),[r,a]=i.useState(null),[w,n]=i.useState(""),[S,t]=i.useState(!1),[b,u]=i.useState(!1),[je,ye]=i.useState(!1),[v,M]=i.useState(null),[_,A]=i.useState(!1),[m,z]=i.useState(""),[c,D]=i.useState(0),[d,H]=i.useState(10),[p,j]=i.useState(null),[R,y]=i.useState(!1),o=ne(),{BikeOwnershipMaster:U=[],totalItems:Y}=le(s=>s.BikeOwnershipMaster),$=U.map(s=>({...s,id:s._id}));i.useEffect(()=>{const s=setTimeout(()=>{o(x({search:m,page:c,limit:d}))},500);return()=>clearTimeout(s)},[m,c,d]);const K=s=>{const{name:h,value:oe}=s.target;L(ae=>({...ae,[h]:oe}))},q=f.ownership.trim()!=="",G=async()=>{try{const s={ownership:f.ownership},h=await o(he(s)).unwrap();a("success"),n("Bike ownership Added successfully."),t(!0),setTimeout(()=>t(!1),3e3),o(x({search:m,page:c,limit:d})),u(!1)}catch(s){a("error"),n("Failed to add Bike ownership : "+s),t(!0),setTimeout(()=>t(!1),3e3)}},J=async()=>{try{const s={_id:f.id,ownership:f.ownership},h=await o(pe(s)).unwrap();a("success"),n("Bike ownership  updated successfully."),t(!0),setTimeout(()=>t(!1),3e3),u(!1),V(null),o(x({search:m,page:c,limit:d}))}catch{a("error"),n("Failed to update Bike ownership : "),t(!0),setTimeout(()=>t(!1),3e3)}},Q=async()=>{if(v){try{await o(de(v)).unwrap(),a("error"),n("Bike ownership  deleted successfully."),t(!0),setTimeout(()=>t(!1),3e3),o(x({search:m,page:c,limit:d}))}catch(s){a("error"),n("Delete failed: "+s),t(!0),setTimeout(()=>t(!1),3e3)}A(!1),M(null)}},X=()=>{A(!1),M(null)},Z=s=>{j(s),y(!0)},ee=async()=>{if(p){try{await o(ce({_id:p._id,isActive:!p.isActive})).unwrap(),a("success"),n(`ownership ${p.isActive?"deactivated":"activated"} successfully.`),t(!0),o(x({search:m,page:c,limit:d}))}catch(s){a("error"),n("Status toggle failed: "+s),t(!0)}setTimeout(()=>t(!1),3e3),y(!1),j(null)}},se=()=>{y(!1),j(null)},te=s=>{T(s)},I=()=>{T(null),u(!1)},ie=s=>{z(s),D(0)},re=[{accessorKey:"ownership",header:"Bike ownership"},{header:"Actions",Cell:({row:s})=>e.jsxs(l,{display:"flex",gap:1,children:[e.jsx(ge,{title:"View Details",children:e.jsx(B,{color:"primary",onClick:()=>te(s.original),children:e.jsx(ue,{})})}),e.jsx(xe,{checked:s.original.isActive,onChange:()=>Z(s.original),tooltipTitle:s.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(E,{show:R,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${p!=null&&p.isActive?"deactivate":"activate"} this ownership?`,onConfirm:ee,onCancel:se,confirmText:"Yes",cancelText:"No"}),e.jsx(E,{show:_,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Bike ownership ?",onConfirm:Q,onCancel:X,confirmText:"Yes",cancelText:"No"}),S&&r&&e.jsx("div",{className:"p-4",children:e.jsx(F,{type:r,title:r==="success"?"Success!":r==="error"&&w.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:w,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),b?e.jsxs(P,{open:b,onClose:(s,h)=>{h!=="backdropClick"&&u(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(l,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(we,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:k!==null?"Edit Bike ownership":"Add Bike ownership"}),e.jsx(B,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>u(!1),children:e.jsx(O,{})})]}),e.jsxs(W,{children:[S&&r&&e.jsx("div",{className:"mb-4",children:e.jsx(F,{type:r,title:r==="success"?"Success!":r==="error"&&w.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:w,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(me,{label:"Bike Ownership ",name:"ownership",value:f.ownership,onChange:K})}),e.jsxs(l,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(N,{onClick:k!==null?J:G,className:"rounded-[25px]",disabled:!q,children:k!==null?"Update Bike ownership ":"Add Bike ownership "}),e.jsx(N,{variant:"secondary",onClick:()=>u(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:e.jsx(l,{ml:2,children:e.jsx(C,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Bike Ownership Management"})})}),e.jsx(fe,{clickHandler:ie,data:$,columns:re,rowCount:Y,pageIndex:c,pageSize:d,onPaginationChange:({pageIndex:s,pageSize:h})=>{D(s),H(h)}})]}),e.jsx(P,{open:!!g,onClose:I,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(l,{className:"rounded-xl overflow-hidden",children:[e.jsxs(l,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(C,{className:"font-outfit",variant:"h6",children:"Bike Ownership Details"}),e.jsx(B,{sx:{color:"white"},onClick:I,children:e.jsx(O,{})})]}),e.jsx(W,{children:g&&e.jsx(l,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(C,{className:"font-outfit",children:[e.jsx("strong",{children:"Bike ownership :"})," ",g.ownership]})})})]})})]})},Je=()=>e.jsx(e.Fragment,{children:e.jsx(ke,{})});export{Je as default};
