import{r as n,j as e,B as o}from"./index-CcNgdVLz.js";import{A as F}from"./Add-CQx2oSmS.js";import{V as K}from"./Visibility-Bad1pPYX.js";import{D,E as Y}from"./DataTable-DIxG5frN.js";import{P as H}from"./PictureAsPdf-BWh0P8Xv.js";import{I as G}from"./Info-BLwzYq-V.js";import{B as g}from"./Button-B4_V5GRV.js";import{C as N}from"./Close-eApB0hKv.js";import{I as x}from"./InputField-BQ5ewBIw.js";import{A as L}from"./Alert-U3gIVFWt.js";import{T as B}from"./Typography-BMOygWke.js";import{I as v}from"./AlertTitle-C4QpKbd8.js";import{D as $}from"./Divider-BePmc644.js";import{T as A}from"./Tooltip-C-v54PpA.js";import{C as M}from"./Chip-YFG14ne-.js";import"./createSvgIcon-ClJPFlmG.js";import"./Cancel-CkCQy-6N.js";import"./utils-BtYGnpaM.js";import"./index-CLpR2HuM.js";import"./DateTimeField-CYfYG2Su.js";import"./index-D3LyqDt4.js";import"./Dialog-BdfS6Lfy.js";import"./useSlotProps-z1QAC-gu.js";import"./CircularProgress-CVM8C023.js";import"./dividerClasses-Bv38dMpn.js";import"./Pagination-DR3bn4wR.js";import"./DialogTitle-BbPUlM9A.js";import"./Tabs-CWf6flOX.js";import"./skeleton-DjwwWlQi.js";const U=["1RK","1BHK","2BHK","3BHK","4BHK","5BHK","6BHK"],k={billingMode:"SPECIFIC",flatType:"",maintenanceAmount:"",fixedCharges:"",penaltyAmount:"",billingYear:""},z=({onCancel:r,editData:s,isEditMode:l=!1,isViewMode:t=!1})=>{const[a,u]=n.useState(k),[p,j]=n.useState(null),[f,b]=n.useState(""),[C,d]=n.useState(!1),[y,S]=n.useState(!1);n.useEffect(()=>{s&&u({...k,...s})},[s]);const i=c=>{const{name:T,value:P}=c.target;u(R=>({...R,[T]:P}))},I=()=>{const c=Number(a.maintenanceAmount);return Number(a.penaltyAmount)<=c*.21},w=c=>{if(c.preventDefault(),!y){if(a.billingMode==="SPECIFIC"&&!I()){j("error"),b("Penalty charge cannot exceed 21% of maintenance amount"),d(!0);return}S(!0),console.log("Maintenance Bill Payload:",a),j("success"),b(l?"Maintenance bill updated successfully":"Maintenance bill created successfully"),d(!0),setTimeout(()=>{d(!1),r()},1500),S(!1)}},m=a.billingYear&&(a.billingMode==="ALL"?a.fixedCharges:a.flatType&&a.maintenanceAmount);return e.jsxs(e.Fragment,{children:[C&&p&&e.jsx(L,{type:p,title:p==="success"?"Success!":"Error!",message:f,variant:"filled",onClose:()=>d(!1)}),e.jsxs(o,{className:"max-w-4xl mx-auto rounded-xl shadow-md bg-white",children:[e.jsxs(o,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRightRadius:12,color:"white"},children:[e.jsx(B,{variant:"h6",children:l?"Update Maintenance Bill":"Create Maintenance Bill"}),e.jsx(v,{sx:{color:"white"},onClick:r,children:e.jsx(N,{})})]}),e.jsxs(o,{component:"form",onSubmit:w,px:6,py:4,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Billing Type"}),e.jsxs("select",{name:"billingMode",value:a.billingMode,onChange:i,disabled:t,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"SPECIFIC",children:"Specific Flat Type"}),e.jsx("option",{value:"ALL",children:"All Flat Types"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.billingMode==="SPECIFIC"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Flat Type"}),e.jsxs("select",{name:"flatType",value:a.flatType,onChange:i,disabled:t,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Flat Type"}),U.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsx(x,{label:"Fixed Monthly Maintenance Charges",name:"maintenanceAmount",type:"number",value:a.maintenanceAmount,onChange:i,disabled:t}),e.jsx(x,{label:"Monthly Penalty Charge",name:"penaltyAmount",type:"number",value:a.penaltyAmount,onChange:i,disabled:t})]}),a.billingMode==="ALL"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Fixed Monthly Charges",name:"fixedCharges",type:"number",value:a.fixedCharges,onChange:i,disabled:t}),e.jsx(x,{label:"Monthly Maintenance Charges",name:"maintenanceAmount",type:"number",value:a.maintenanceAmount,onChange:i,disabled:t})]}),e.jsx(x,{label:"Billing Year",name:"billingYear",type:"number",value:a.billingYear,onChange:i,disabled:t})]}),e.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[!t&&e.jsx(g,{disabled:!m||y,children:y?"Saving...":l?"Update Bill":"Create Bill"}),e.jsx(g,{variant:"secondary",onClick:r,children:"Cancel"})]})]})]})]})},J=["Penalty Charges","Amenity Charges","Event Charges","One-Time Charges"],E={chargeType:"",description:"",amount:"",applyTo:"ALL",residentId:""},_=({onCancel:r,editData:s,isEditMode:l=!1,isViewMode:t=!1})=>{const[a,u]=n.useState(E),[p,j]=n.useState(null),[f,b]=n.useState(""),[C,d]=n.useState(!1),[y,S]=n.useState(!1);n.useEffect(()=>{s&&u({...E,...s})},[s]);const i=m=>{const{name:c,value:T}=m.target;u(P=>({...P,[c]:T}))},I=m=>{if(m.preventDefault(),!y){if(a.applyTo==="SINGLE"&&!a.residentId){j("error"),b("Please select a resident"),d(!0);return}S(!0),console.log("Supplementary Bill Payload:",a),j("success"),b(l?"Supplementary charge updated successfully":"Supplementary charge created successfully"),d(!0),setTimeout(()=>{d(!1),r()},1500),S(!1)}},w=a.chargeType&&a.amount&&a.applyTo;return e.jsxs(e.Fragment,{children:[C&&p&&e.jsx(L,{type:p,title:p==="success"?"Success!":"Error!",message:f,variant:"filled",onClose:()=>d(!1)}),e.jsxs(o,{className:"max-w-4xl mx-auto rounded-xl shadow-md bg-white",children:[e.jsxs(o,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRightRadius:12,color:"white"},children:[e.jsx(B,{variant:"h6",children:t?"Supplementary Charge Details":l?"Update Supplementary Charge":"Create Supplementary Charge"}),e.jsx(v,{sx:{color:"white"},onClick:r,children:e.jsx(N,{})})]}),e.jsxs(o,{component:"form",onSubmit:I,px:6,py:4,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Charge Type"}),e.jsxs("select",{name:"chargeType",value:a.chargeType,onChange:i,disabled:t,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Charge Type"}),J.map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsx(x,{label:"Amount",name:"amount",type:"number",value:a.amount,onChange:i,disabled:t}),e.jsx(x,{label:"Description",name:"description",value:a.description,onChange:i,disabled:t,multiline:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Apply To"}),e.jsxs("select",{name:"applyTo",value:a.applyTo,onChange:i,disabled:t,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"ALL",children:"All Residents"}),e.jsx("option",{value:"SINGLE",children:"Single Resident"})]})]}),a.applyTo==="SINGLE"&&e.jsx(x,{label:"Resident ID / Name",name:"residentId",value:a.residentId,onChange:i,disabled:t})]}),e.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[!t&&e.jsx(g,{disabled:!w||y,children:y?"Saving...":l?"Update Charge":"Create Charge"}),e.jsx(g,{variant:"secondary",onClick:r,children:t?"Back":"Cancel"})]})]})]})]})},O=({onCancel:r,billData:s})=>{const l=s||{billingMode:"SPECIFIC",flatType:"2BHK",maintenanceAmount:2500,fixedCharges:0,penaltyAmount:200,gstPercentage:18,billingYear:2025,billingMonth:"January",totalAmount:2700};return e.jsxs(o,{className:"max-w-4xl mx-auto bg-white shadow-md",sx:{borderRadius:4,overflow:"hidden"},children:[e.jsxs(o,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white",borderTopLeftRadius:16,borderTopRightRadius:16},children:[e.jsx(B,{variant:"h6",children:"Bill Preview"}),e.jsx(v,{sx:{color:"white"},onClick:r,children:e.jsx(N,{})})]}),e.jsxs(o,{px:6,py:4,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-y-4 gap-x-10",children:[e.jsx(h,{label:"Billing Type",value:l.billingMode}),e.jsx(h,{label:"Billing Month",value:l.billingMonth}),l.billingMode==="SPECIFIC"&&e.jsx(h,{label:"Flat Type",value:l.flatType}),e.jsx(h,{label:"Maintenance Charges",value:`₹ ${l.maintenanceAmount}`}),l.fixedCharges>0&&e.jsx(h,{label:"Fixed Charges",value:`₹ ${l.fixedCharges}`}),e.jsx(h,{label:"Penalty Charges",value:`₹ ${l.penaltyAmount}`}),e.jsx(h,{label:"GST / Tax (%)",value:`${l.gstPercentage}%`}),e.jsx(h,{label:"Billing Year",value:l.billingYear})]}),e.jsx($,{className:"my-6"}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Total Payable Amount"}),e.jsxs("span",{className:"text-green-600",children:["₹ ",l.totalAmount]})]}),e.jsxs("div",{className:"flex justify-center gap-6 mt-8",children:[e.jsx(g,{children:"Publish Bill"}),e.jsx(g,{variant:"secondary",onClick:r,children:"Back"})]})]})]})},h=({label:r,value:s})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:r}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:s})]}),W=()=>{const[r,s]=n.useState(!1),[l,t]=n.useState(!1),[a,u]=n.useState(!1),[p,j]=n.useState(null),f=[{billMonth:"January",billYear:"2025",flatType:"2BHK",billType:"Maintenance",amount:2500,status:"Draft"}],b=[{accessorKey:"billMonth",header:"Month"},{accessorKey:"billYear",header:"Year"},{accessorKey:"flatType",header:"Flat Type"},{accessorKey:"billType",header:"Bill Type"},{accessorKey:"amount",header:"Amount"},{accessorKey:"status",header:"Status",Cell:({cell:C})=>C.getValue()==="Published"?e.jsx(M,{label:"Published",color:"success",size:"small"}):e.jsx(M,{label:"Draft",color:"warning",size:"small"})},{header:"Actions",Cell:({row:C})=>e.jsxs(o,{display:"flex",gap:1,children:[e.jsx(A,{title:"Preview",children:e.jsx(v,{onClick:()=>u(!0),children:e.jsx(K,{})})}),e.jsx(A,{title:"Edit",children:e.jsx(v,{onClick:()=>s(!0),children:e.jsx(Y,{})})}),e.jsx(A,{title:"Download PDF",children:e.jsx(v,{children:e.jsx(H,{})})})]})}];return r?e.jsx(z,{onCancel:()=>s(!1)}):l?e.jsx(_,{onCancel:()=>t(!1)}):a?e.jsx(O,{onCancel:()=>u(!1)}):e.jsxs(e.Fragment,{children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",mb:2,children:[e.jsxs(B,{variant:"h5",fontWeight:500,className:"font-outfit",children:["Billing & Charge Management",e.jsx(A,{title:"Manage maintenance & supplementary bills.",arrow:!0,children:e.jsx(G,{sx:{color:"#245492",ml:1}})})]}),e.jsxs(o,{display:"flex",gap:2,children:[e.jsxs(g,{onClick:()=>s(!0),children:[e.jsx(F,{})," Create Maintenance Bill"]}),e.jsxs(g,{variant:"secondary",onClick:()=>t(!0),children:[e.jsx(F,{})," Supplementary Bill"]})]})]}),e.jsx(D,{data:f,columns:b,rowCount:f.length,pageIndex:0,pageSize:10,exportType:!0})]})},Te=()=>e.jsx(e.Fragment,{children:e.jsx(W,{})});export{Te as default};
