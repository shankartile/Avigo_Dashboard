import{r as t,c as de,d as ue,cb as x,j as e,B as d,cc as me,cd as pe,ce as he,cf as fe}from"./index-N8t8oMzR.js";import{A as xe}from"./Add-BUtQdix6.js";import{D as ge}from"./Delete-07TAjR17.js";import{V as Ce}from"./Visibility-CgGAKN6P.js";import{C as P}from"./Close-CwR_quIe.js";import{D as je,E as ye}from"./DataTable-BqUD-dAi.js";import{I as be}from"./InputField-riaj6edy.js";import{B as k}from"./Button-CBNcrDpD.js";import{T as Be}from"./ToggleSwitch-DR4b514_.js";import{A as W}from"./Alert-CgNUKTJk.js";import{S as L}from"./SweetAlert-vzLgp13W.js";import{T as v}from"./Typography-CKlLxaDL.js";import{D as V,a as z}from"./Dialog-BGF2t3L7.js";import{D as Te}from"./DialogTitle-D6DEKDqS.js";import{I as g}from"./AlertTitle-D9ejxV9_.js";import{T as H}from"./Tooltip-CwyNn424.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./useSlotProps-CaIca8GW.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";const we=()=>{const[f,j]=t.useState({id:"",car_brand_name:""}),[y,A]=t.useState(null),[b,B]=t.useState(null),[s,o]=t.useState(null),[C,l]=t.useState(""),[D,r]=t.useState(!1),[M,c]=t.useState(!1),[Se,_e]=t.useState(!1),[I,T]=t.useState(null),[R,w]=t.useState(!1),[h,U]=t.useState(""),[u,E]=t.useState(0),[m,O]=t.useState(10),[p,S]=t.useState(null),[Y,_]=t.useState(!1),n=de(),{CarBrandMaster:$=[],totalItems:q}=ue(a=>a.CarBrandMaster),K=$.map(a=>({...a,id:a._id}));t.useEffect(()=>{const a=setTimeout(()=>{n(x({search:h,page:u,limit:m}))},500);return()=>clearTimeout(a)},[h,u,m,n]);const G=a=>{const{name:i,value:F}=a.target;j(ce=>({...ce,[i]:F}))},J=f.car_brand_name.trim()!=="",Q=async()=>{try{const a={car_brand_name:f.car_brand_name},i=await n(fe(a)).unwrap();o("success"),l("Car Brand Added successfully."),r(!0),setTimeout(()=>r(!1),3e3),n(x({search:h,page:u,limit:m})),c(!1)}catch(a){o("error"),l("Failed to add Car Brand : "+a),r(!0),setTimeout(()=>r(!1),3e3)}},X=async(a,i)=>{try{j({id:a._id||"",car_brand_name:a.car_brand_name||""}),B(i),c(!0)}catch{o("error"),l("Unable to fetch Car Brand  details for editing."),r(!0)}},Z=async()=>{try{const a={_id:f.id,car_brand_name:f.car_brand_name},i=await n(he(a)).unwrap();o("success"),l("Car Brand updated successfully."),r(!0),setTimeout(()=>r(!1),3e3),c(!1),B(null),n(x({search:h,page:u,limit:m}))}catch{o("error"),l("Failed to update Car Brand : "),r(!0),setTimeout(()=>r(!1),3e3)}},ee=a=>{T(a),w(!0)},ae=async()=>{if(I){try{await n(pe(I)).unwrap(),o("error"),l("Car Brand deleted successfully."),r(!0),setTimeout(()=>r(!1),3e3),n(x({search:h,page:u,limit:m}))}catch(a){o("error"),l("Delete failed: "+a),r(!0),setTimeout(()=>r(!1),3e3)}w(!1),T(null)}},re=()=>{w(!1),T(null)},te=a=>{S(a),_(!0)},se=async()=>{if(p){try{await n(me({_id:p._id,isActive:!p.isActive})).unwrap(),o("success"),l(`Car Brand ${p.isActive?"deactivated":"activated"} successfully.`),r(!0),n(x({search:h,page:u,limit:m}))}catch(a){o("error"),l("Status toggle failed: "+a),r(!0)}setTimeout(()=>r(!1),3e3),_(!1),S(null)}},ne=()=>{_(!1),S(null)},oe=a=>{A(a)},N=()=>{A(null),c(!1)},le=a=>{U(a),E(0)},ie=[{accessorKey:"car_brand_name",header:"Car brand"},{header:"Actions",Cell:({row:a})=>e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(H,{title:"View Details",children:e.jsx(g,{color:"primary",onClick:()=>oe(a.original),children:e.jsx(Ce,{})})}),!a.original.isOthers&&e.jsx(H,{title:"Edit",children:e.jsx("span",{children:e.jsx(g,{color:"secondary",onClick:()=>X(a.original,a.index),children:e.jsx(ye,{})})})}),!a.original.isOthers&&e.jsx(g,{color:"error",onClick:()=>ee(a.original._id),children:e.jsx(ge,{})}),e.jsx(Be,{checked:a.original.isActive,onChange:()=>te(a.original),tooltipTitle:a.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(L,{show:Y,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${p!=null&&p.isActive?"deactivate":"activate"} this Car Brand?`,onConfirm:se,onCancel:ne,confirmText:"Yes",cancelText:"No"}),e.jsx(L,{show:R,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Car Brand ?",onConfirm:ae,onCancel:re,confirmText:"Yes",cancelText:"No"}),D&&s&&e.jsx("div",{className:"p-4",children:e.jsx(W,{type:s,title:s==="success"?"Success!":s==="error"&&C.toLowerCase().includes("deleted")?"Deleted!":s==="error"?"Error!":"Warning!",message:C,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>r(!1)})}),M?e.jsxs(V,{open:M,onClose:(a,i)=>{i!=="backdropClick"&&c(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(Te,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:b!==null?"Edit Car Brand":"Add Car Brand"}),e.jsx(g,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>c(!1),children:e.jsx(P,{})})]}),e.jsxs(z,{children:[D&&s&&e.jsx("div",{className:"mb-4",children:e.jsx(W,{type:s,title:s==="success"?"Success!":s==="error"&&C.toLowerCase().includes("deleted")?"Deleted!":s==="error"?"Error!":"Warning!",message:C,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>r(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(be,{label:"Car Brand ",name:"car_brand_name",value:f.car_brand_name,onChange:G})}),e.jsxs(d,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(k,{onClick:b!==null?Z:Q,className:"rounded-[25px]",disabled:!J,children:b!==null?"Update Car Brand ":"Add Car Brand "}),e.jsx(k,{variant:"secondary",onClick:()=>c(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(d,{ml:2,children:e.jsx(v,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Car Brand  Management"})}),e.jsxs(k,{onClick:()=>{j({id:"",car_brand_name:""}),B(null),c(!0)},children:[e.jsx(xe,{}),"Add New Car Brand "]})]}),e.jsx(je,{clickHandler:le,data:K,columns:ie,rowCount:q,pageIndex:u,pageSize:m,onPaginationChange:({pageIndex:a,pageSize:i})=>{E(a),O(i)}})]}),e.jsx(V,{open:!!y,onClose:N,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(d,{className:"rounded-xl overflow-hidden",children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(v,{className:"font-outfit",variant:"h6",children:"Car Brand Details"}),e.jsx(g,{sx:{color:"white"},onClick:N,children:e.jsx(P,{})})]}),e.jsx(z,{children:y&&e.jsx(d,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(v,{className:"font-outfit",children:[e.jsx("strong",{children:"Car Brand :"})," ",y.car_brand_name]})})})]})})]})},ta=()=>e.jsx(e.Fragment,{children:e.jsx(we,{})});export{ta as default};
