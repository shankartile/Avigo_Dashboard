import{r as s,c as ue,d as me,cG as f,j as e,B as d,cH as pe,cI as he,cJ as xe,cK as fe}from"./index-CcNgdVLz.js";import{A as Ce}from"./Add-CQx2oSmS.js";import{D as ge}from"./Delete-BWjouR_h.js";import{V as je}from"./Visibility-Bad1pPYX.js";import{C as B}from"./Close-eApB0hKv.js";import{D as ye,E as we}from"./DataTable-DIxG5frN.js";import{I as L}from"./InputField-BQ5ewBIw.js";import{B as A}from"./Button-B4_V5GRV.js";import{T as Se}from"./ToggleSwitch-CZt8XOld.js";import{A as V}from"./Alert-U3gIVFWt.js";import{S as H}from"./SweetAlert-BfCzCAJa.js";import{T as w}from"./Typography-BMOygWke.js";import{D as z,a as R}from"./Dialog-BdfS6Lfy.js";import{D as _e}from"./DialogTitle-BbPUlM9A.js";import{I as C}from"./AlertTitle-C4QpKbd8.js";import{T as U}from"./Tooltip-C-v54PpA.js";import"./createSvgIcon-ClJPFlmG.js";import"./Cancel-CkCQy-6N.js";import"./utils-BtYGnpaM.js";import"./index-CLpR2HuM.js";import"./DateTimeField-CYfYG2Su.js";import"./index-D3LyqDt4.js";import"./useSlotProps-z1QAC-gu.js";import"./CircularProgress-CVM8C023.js";import"./Chip-YFG14ne-.js";import"./dividerClasses-Bv38dMpn.js";import"./Pagination-DR3bn4wR.js";import"./Divider-BePmc644.js";import"./Tabs-CWf6flOX.js";import"./skeleton-DjwwWlQi.js";const Te=()=>{const[r,g]=s.useState({id:"",color_name:"",color_code:""}),[j,D]=s.useState(null),[S,_]=s.useState(null),[l,i]=s.useState(null),[y,n]=s.useState(""),[I,t]=s.useState(!1),[M,u]=s.useState(!1),[be,ke]=s.useState(!1),[N,T]=s.useState(null),[K,b]=s.useState(!1),[x,Y]=s.useState(""),[m,E]=s.useState(0),[p,$]=s.useState(10),[h,k]=s.useState(null),[q,v]=s.useState(!1),a=ue(),{CarColorMaster:G=[],totalItems:J}=me(o=>o.CarColorMaster),O=G.map(o=>({...o,id:o._id}));s.useEffect(()=>{a(f({search:x,page:m,limit:p}))},[x,m,p]);const F=o=>{const{name:c,value:W}=o.target;g(de=>({...de,[c]:W}))},Q=r.color_name.trim()!=="";r.color_code.trim();const X=async()=>{try{const o={color_name:r.color_name,color_code:r.color_code},c=await a(fe(o)).unwrap();i("success"),n("Color Added successfully."),t(!0),setTimeout(()=>t(!1),3e3),a(f({search:x,page:m,limit:p})),u(!1)}catch(o){i("error"),n("Failed to add Color: "+o),t(!0),setTimeout(()=>t(!1),3e3)}},Z=async(o,c)=>{try{g({id:o._id||"",color_name:o.color_name||"",color_code:o.color_code||""}),_(c),u(!0)}catch{i("error"),n("Unable to fetch Color details for editing."),t(!0)}},ee=async()=>{try{const o={_id:r.id,color_name:r.color_name,color_code:r.color_code},c=await a(xe(o)).unwrap();i("success"),n("Color updated successfully."),t(!0),setTimeout(()=>t(!1),3e3),u(!1),_(null),a(f({search:x,page:m,limit:p}))}catch{i("error"),n("Failed to update Color: "),t(!0),setTimeout(()=>t(!1),3e3)}},oe=o=>{T(o),b(!0)},te=async()=>{if(N){try{await a(he(N)).unwrap(),i("error"),n("Color deleted successfully."),t(!0),setTimeout(()=>t(!1),3e3),a(f({search:x,page:m,limit:p}))}catch(o){i("error"),n("Delete failed: "+o),t(!0),setTimeout(()=>t(!1),3e3)}b(!1),T(null)}},se=()=>{b(!1),T(null)},re=o=>{k(o),v(!0)},le=async()=>{if(h){try{await a(pe({_id:h._id,isActive:!h.isActive})).unwrap(),i("success"),n(`Color ${h.isActive?"deactivated":"activated"} successfully.`),t(!0),a(f({search:x,page:m,limit:p}))}catch(o){i("error"),n("Status toggle failed: "+o),t(!0)}setTimeout(()=>t(!1),3e3),v(!1),k(null)}},ae=()=>{v(!1),k(null)},ie=o=>{D(o)},P=()=>{D(null),u(!1)},ne=o=>{Y(o),E(0),a(f({search:o,page:m,limit:p}))},ce=[{accessorKey:"color_name",header:"Color Name"},{header:"Actions",Cell:({row:o})=>e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(U,{title:"View Details",children:e.jsx(C,{color:"primary",onClick:()=>ie(o.original),children:e.jsx(je,{})})}),e.jsx(U,{title:"Edit",children:e.jsx(C,{color:"secondary",onClick:()=>Z(o.original,o.index),children:e.jsx(we,{})})}),e.jsx(C,{color:"error",onClick:()=>oe(o.original._id),children:e.jsx(ge,{})}),e.jsx(Se,{checked:o.original.isActive,onChange:()=>re(o.original),tooltipTitle:o.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(H,{show:q,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${h!=null&&h.isActive?"deactivate":"activate"} this color?`,onConfirm:le,onCancel:ae,confirmText:"Yes",cancelText:"No"}),e.jsx(H,{show:K,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Color?",onConfirm:te,onCancel:se,confirmText:"Yes",cancelText:"No"}),I&&l&&e.jsx("div",{className:"p-4",children:e.jsx(V,{type:l,title:l==="success"?"Success!":l==="error"&&y.toLowerCase().includes("deleted")?"Deleted!":l==="error"?"Error!":"Warning!",message:y,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),M?e.jsxs(z,{open:M,onClose:(o,c)=>{c!=="backdropClick"&&u(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(_e,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:S!==null?"Edit Color":"Add Color"}),e.jsx(C,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>u(!1),children:e.jsx(B,{})})]}),e.jsxs(R,{children:[I&&l&&e.jsx("div",{className:"mb-4",children:e.jsx(V,{type:l,title:l==="success"?"Success!":l==="error"&&y.toLowerCase().includes("deleted")?"Deleted!":l==="error"?"Error!":"Warning!",message:y,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:[e.jsx(L,{label:"Color Title",name:"color_name",value:r.color_name,onChange:F}),e.jsxs(d,{display:"flex",alignItems:"center",gap:6,children:[e.jsx(L,{label:"Color Code",name:"color_code",value:r.color_code,onChange:F,disabled:!0}),e.jsx("label",{htmlFor:"color",style:{fontWeight:500},children:"Choose Color Code"}),e.jsx("input",{type:"color",value:r.color_code,onChange:o=>g({...r,color_code:o.target.value}),style:{width:"55px",height:"55px",border:"none",background:"none",cursor:"pointer"},title:"Pick Color"})]})]}),e.jsxs(d,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(A,{onClick:S!==null?ee:X,className:"rounded-[25px]",disabled:!Q,children:S!==null?"Update Color":"Add Color"}),e.jsx(A,{variant:"secondary",onClick:()=>u(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(d,{ml:2,children:e.jsx(w,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Color Management"})}),e.jsxs(A,{onClick:()=>{g({id:"",color_name:"",color_code:""}),_(null),u(!0)},children:[e.jsx(Ce,{}),"Add New Color"]})]}),e.jsx(ye,{clickHandler:ne,data:O,columns:ce,rowCount:J,pageIndex:m,pageSize:p,onPaginationChange:({pageIndex:o,pageSize:c})=>{E(o),$(c)}})]}),e.jsx(z,{open:!!j,onClose:P,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(d,{className:"rounded-xl overflow-hidden",children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(w,{className:"font-outfit",variant:"h6",children:"Car Color Details"}),e.jsx(C,{sx:{color:"white"},onClick:P,children:e.jsx(B,{})})]}),e.jsx(R,{children:j&&e.jsxs(d,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(w,{className:"font-outfit",children:[e.jsx("strong",{children:"Color Name:"})," ",j.color_name]}),e.jsxs(w,{className:"font-outfit",children:[e.jsx("strong",{children:"Color Code:"})," ",j.color_code]})]})})]})})]})},so=()=>e.jsx(e.Fragment,{children:e.jsx(Te,{})});export{so as default};
