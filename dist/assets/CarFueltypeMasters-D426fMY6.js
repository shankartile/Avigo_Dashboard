import{r as a,c as ie,d as ne,cm as y,j as e,B as c,cn as ce,co as ue,cp as de,cq as pe}from"./index-N8t8oMzR.js";import{C as P}from"./Close-CwR_quIe.js";import{D as fe,E as me}from"./DataTable-BqUD-dAi.js";import{I as he}from"./InputField-riaj6edy.js";import{B}from"./Button-CBNcrDpD.js";import{T as ye}from"./ToggleSwitch-DR4b514_.js";import{A as W}from"./Alert-CgNUKTJk.js";import{S as L}from"./SweetAlert-vzLgp13W.js";import{T as w}from"./Typography-CKlLxaDL.js";import{D as _,a as z}from"./Dialog-BGF2t3L7.js";import{D as xe}from"./DialogTitle-D6DEKDqS.js";import{I as S}from"./AlertTitle-D9ejxV9_.js";import{T as ge}from"./Tooltip-CwyNn424.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./useSlotProps-CaIca8GW.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";const Ce=()=>{const[h,F]=a.useState({id:"",fueltype:""}),[g,H]=a.useState(null),[C,v]=a.useState(null),[r,l]=a.useState(null),[x,o]=a.useState(""),[b,s]=a.useState(!1),[k,u]=a.useState(!1),[je,Te]=a.useState(!1),[M,A]=a.useState(null),[R,D]=a.useState(!1),[m,U]=a.useState(""),[d,I]=a.useState(0),[p,Y]=a.useState(10),[f,j]=a.useState(null),[$,T]=a.useState(!1),i=ie(),{CarFueltypeMaster:q=[],totalItems:K}=ne(t=>t.CarFueltypeMaster),V=q.map(t=>({...t,id:t._id}));a.useEffect(()=>{const t=setTimeout(()=>{i(y({search:m,page:d,limit:p}))},500);return()=>clearTimeout(t)},[m,d,p]);const G=t=>{const{name:n,value:N}=t.target;F(oe=>({...oe,[n]:N}))},J=h.fueltype.trim()!=="",O=async()=>{try{const t={fueltype:h.fueltype},n=await i(pe(t)).unwrap();l("success"),o("Car fueltype Added successfully."),s(!0),setTimeout(()=>s(!1),3e3),i(y({search:m,page:d,limit:p})),u(!1)}catch(t){l("error"),o("Failed to add Car fueltype : "+t),s(!0),setTimeout(()=>s(!1),3e3)}},Q=async(t,n)=>{try{F({id:t._id||"",fueltype:t.fueltype||""}),v(n),u(!0)}catch{l("error"),o("Unable to fetch Car fueltype  details for editing."),s(!0)}},X=async()=>{try{const t={_id:h.id,fueltype:h.fueltype},n=await i(de(t)).unwrap();l("success"),o("Car fueltype  updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),u(!1),v(null),i(y({search:m,page:d,limit:p}))}catch{l("error"),o("Failed to update Car fueltype : "),s(!0),setTimeout(()=>s(!1),3e3)}},Z=async()=>{if(M){try{await i(ue(M)).unwrap(),l("error"),o("Car fueltype deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),i(y({search:m,page:d,limit:p}))}catch(t){l("error"),o("Delete failed: "+t),s(!0),setTimeout(()=>s(!1),3e3)}D(!1),A(null)}},ee=()=>{D(!1),A(null)},te=t=>{j(t),T(!0)},se=async()=>{if(f){try{await i(ce({_id:f._id,isActive:!f.isActive})).unwrap(),l("success"),o(`Fuel Type ${f.isActive?"deactivated":"activated"} successfully.`),s(!0),i(y({search:m,page:d,limit:p}))}catch(t){l("error"),o("Status toggle failed: "+t),s(!0)}setTimeout(()=>s(!1),3e3),T(!1),j(null)}},ae=()=>{T(!1),j(null)},E=()=>{H(null),u(!1)},re=t=>{U(t),I(0)},le=[{accessorKey:"fueltype",header:"Car fueltype"},{header:"Actions",Cell:({row:t})=>e.jsxs(c,{display:"flex",gap:1,children:[e.jsx(ge,{title:"Edit",children:e.jsx(S,{color:"secondary",onClick:()=>Q(t.original,t.index),children:e.jsx(me,{})})}),e.jsx(ye,{checked:t.original.isActive,onChange:()=>te(t.original),tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(L,{show:$,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${f!=null&&f.isActive?"deactivate":"activate"} this Fuel type?`,onConfirm:se,onCancel:ae,confirmText:"Yes",cancelText:"No"}),e.jsx(L,{show:R,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Car fueltype ?",onConfirm:Z,onCancel:ee,confirmText:"Yes",cancelText:"No"}),b&&r&&e.jsx("div",{className:"p-4",children:e.jsx(W,{type:r,title:r==="success"?"Success!":r==="error"&&x.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:x,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),k?e.jsxs(_,{open:k,onClose:(t,n)=>{n!=="backdropClick"&&u(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(c,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(xe,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:C!==null?"Edit Car fueltype":"Add Car fueltype"}),e.jsx(S,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>u(!1),children:e.jsx(P,{})})]}),e.jsxs(z,{children:[b&&r&&e.jsx("div",{className:"mb-4",children:e.jsx(W,{type:r,title:r==="success"?"Success!":r==="error"&&x.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:x,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(he,{label:"Car Fuel Type ",name:"fueltype",value:h.fueltype,onChange:G})}),e.jsxs(c,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(B,{onClick:C!==null?X:O,className:"rounded-[25px]",disabled:!J,children:C!==null?"Update Car fueltype ":"Add Car fueltype "}),e.jsx(B,{variant:"secondary",onClick:()=>u(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:e.jsx(c,{ml:2,children:e.jsx(w,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Car Fuel Type Management"})})}),e.jsx(fe,{clickHandler:re,data:V,columns:le,rowCount:K,pageIndex:d,pageSize:p,onPaginationChange:({pageIndex:t,pageSize:n})=>{I(t),Y(n)}})]}),e.jsx(_,{open:!!g,onClose:E,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(c,{className:"rounded-xl overflow-hidden",children:[e.jsxs(c,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(w,{className:"font-outfit",variant:"h6",children:"Car Fuel type Details"}),e.jsx(S,{sx:{color:"white"},onClick:E,children:e.jsx(P,{})})]}),e.jsx(z,{children:g&&e.jsx(c,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(w,{className:"font-outfit",children:[e.jsx("strong",{children:"Fuel Type:"})," ",g.fueltype]})})})]})})]})},Je=()=>e.jsx(e.Fragment,{children:e.jsx(Ce,{})});export{Je as default};
