import{r as s,c as ue,d as V,cg as f,ch as pe,j as e,B as h,ci as he,cj as xe,ck as fe,cl as ge}from"./index-CNh2Ysd7.js";import{A as Ce}from"./Add-ONoAddvh.js";import{D as je}from"./Delete-BKL8mfiA.js";import{V as _e}from"./Visibility-CFK2wX7e.js";import{C as U}from"./Close-CSWdanUp.js";import{D as Ne,E as be}from"./DataTable-CBDiE-I1.js";import{I as ye}from"./InputField-Cac7SuVh.js";import{B as I}from"./Button-D2SEshHa.js";import{T as Te}from"./ToggleSwitch-CRLgVpk1.js";import{A as z}from"./Alert-BBsTbpkb.js";import{S as H}from"./SweetAlert-DUVT9XWx.js";import{T as N}from"./Typography-DxP0RQcB.js";import{D as R,a as O}from"./Dialog-CMeqEyOr.js";import{D as we}from"./DialogTitle-sP3uGIgc.js";import{I as g}from"./AlertTitle-BBXxFqxI.js";import{T as Y}from"./Tooltip-B4POfKz-.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./Divider-1omdH51K.js";import"./Tabs-DWd8sdsH.js";import"./skeleton-H-TAVWvB.js";const Se=()=>{const[l,b]=s.useState({car_brand_id:"",car_brand_name:"",id:"",car_name:""}),[C,M]=s.useState(null),[y,T]=s.useState(null),[r,o]=s.useState(null),[j,c]=s.useState(""),[E,t]=s.useState(!1),[B,u]=s.useState(!1),[ke,ve]=s.useState(!1),[F,w]=s.useState(null),[$,S]=s.useState(!1),[p,q]=s.useState(""),[d,P]=s.useState(0),[m,K]=s.useState(10),[x,k]=s.useState(null),[G,v]=s.useState(!1),n=ue(),{CarNameMaster:J=[],totalItems:Q}=V(a=>a.CarNameMaster),X=J.map(a=>({...a,id:a._id})),{CarBrandMaster:_}=V(a=>a.CarBrandMaster);s.useEffect(()=>{const a=setTimeout(()=>{n(f({search:p,page:d,limit:m}))},500);return()=>clearTimeout(a)},[p,d,m]),s.useEffect(()=>{const a=setTimeout(()=>{n(pe({search:p,page:d,limit:m}))},500);return()=>clearTimeout(a)},[p,d,m]);const W=a=>{const{name:i,value:A}=a.target;b(D=>({...D,[i]:A}))},Z=l.car_name.trim()!=="",ee=async()=>{try{const a=_.find(D=>D._id===l.car_brand_id),i={car_brand_id:l.car_brand_id||"",car_brand_name:(a==null?void 0:a.car_brand_name)||"",car_name:l.car_name},A=await n(ge(i)).unwrap();o("success"),c("Car Name Added successfully."),t(!0),setTimeout(()=>t(!1),3e3),n(f({search:p,page:d,limit:m})),u(!1)}catch(a){o("error"),c("Failed to add Car Name: "+a),t(!0),setTimeout(()=>t(!1),3e3)}},ae=async(a,i)=>{try{b({id:a._id||"",car_brand_id:a.car_brand_id||"",car_brand_name:a.car_brand_name||"",car_name:a.car_name||""}),T(i),u(!0)}catch{o("error"),c("Unable to fetch Car Name details for editing."),t(!0)}},te=async()=>{try{const a={_id:l.id,car_brand_id:l.car_brand_id||"",car_name:l.car_name},i=await n(fe(a)).unwrap();o("success"),c("Car Name updated successfully."),t(!0),setTimeout(()=>t(!1),3e3),u(!1),T(null),n(f({search:p,page:d,limit:m}))}catch{o("error"),c("Failed to update Car Name: "),t(!0),setTimeout(()=>t(!1),3e3)}},se=a=>{w(a),S(!0)},re=async()=>{if(F){try{await n(xe(F)).unwrap(),o("error"),c("Car Name deleted successfully."),t(!0),setTimeout(()=>t(!1),3e3),n(f({search:p,page:d,limit:m}))}catch(a){o("error"),c("Delete failed: "+a),t(!0),setTimeout(()=>t(!1),3e3)}S(!1),w(null)}},ne=()=>{S(!1),w(null)},ie=a=>{k(a),v(!0)},le=async()=>{if(x){try{await n(he({_id:x._id,isActive:!x.isActive})).unwrap(),o("success"),c(`User ${x.isActive?"deactivated":"activated"} successfully.`),t(!0),n(f({search:p,page:d,limit:m}))}catch(a){o("error"),c("Status toggle failed: "+a),t(!0)}setTimeout(()=>t(!1),3e3),v(!1),k(null)}},oe=()=>{v(!1),k(null)},ce=a=>{M(a)},L=()=>{M(null),u(!1)},de=a=>{q(a),P(0)},me=[{accessorKey:"car_name",header:"Car Name"},{header:"Actions",Cell:({row:a})=>e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(Y,{title:"View Details",children:e.jsx(g,{color:"primary",onClick:()=>ce(a.original),children:e.jsx(_e,{})})}),!a.original.isOthers&&e.jsx(Y,{title:"Edit",children:e.jsx("span",{children:e.jsx(g,{color:"secondary",onClick:()=>ae(a.original,a.index),children:e.jsx(be,{})})})}),!a.original.isOthers&&e.jsx(g,{color:"error",onClick:()=>se(a.original._id),children:e.jsx(je,{})}),e.jsx(Te,{checked:a.original.isActive,onChange:()=>ie(a.original),tooltipTitle:a.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(H,{show:G,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${x!=null&&x.isActive?"deactivate":"activate"} this Car Name?`,onConfirm:le,onCancel:oe,confirmText:"Yes",cancelText:"No"}),e.jsx(H,{show:$,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Country?",onConfirm:re,onCancel:ne,confirmText:"Yes",cancelText:"No"}),E&&r&&e.jsx("div",{className:"p-4",children:e.jsx(z,{type:r,title:r==="success"?"Success!":r==="error"&&j.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:j,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),B?e.jsxs(R,{open:B,onClose:(a,i)=>{i!=="backdropClick"&&u(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(we,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:y!==null?"Edit Car Name":"Add Car Name"}),e.jsx(g,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>u(!1),children:e.jsx(U,{})})]}),e.jsxs(O,{children:[E&&r&&e.jsx("div",{className:"mb-4",children:e.jsx(z,{type:r,title:r==="success"?"Success!":r==="error"&&j.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:j,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white mb-1 block",children:["Car Brand ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"car_brand_id",value:l.car_brand_id,onChange:W,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Car Brand"}),_==null?void 0:_.filter(a=>a.isActive).map(a=>e.jsx("option",{value:a._id,children:a.car_brand_name},a._id))]})]}),e.jsx(ye,{label:"Car Name",name:"car_name",value:l.car_name,onChange:W})]}),e.jsxs(h,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(I,{onClick:y!==null?te:ee,className:"rounded-[25px]",disabled:!Z,children:y!==null?"Update Car Name":"Add Car Name"}),e.jsx(I,{variant:"secondary",onClick:()=>u(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{ml:2,children:e.jsx(N,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Car Name Management"})}),e.jsxs(I,{onClick:()=>{b({id:"",car_name:""}),T(null),u(!0)},children:[e.jsx(Ce,{}),"Add New Car Name"]})]}),e.jsx(Ne,{clickHandler:de,data:X,columns:me,rowCount:Q,pageIndex:d,pageSize:m,onPaginationChange:({pageIndex:a,pageSize:i})=>{P(a),K(i)}})]}),e.jsx(R,{open:!!C,onClose:L,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(h,{className:"rounded-xl overflow-hidden",children:[e.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(N,{className:"font-outfit",variant:"h6",children:"Car Name Details"}),e.jsx(g,{sx:{color:"white"},onClick:L,children:e.jsx(U,{})})]}),e.jsx(O,{children:C&&e.jsxs(h,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(N,{className:"font-outfit",children:[e.jsx("strong",{children:"Car Brand:"})," ",C.car_brand_name]}),e.jsxs(N,{className:"font-outfit",children:[e.jsx("strong",{children:"Car Name:"})," ",C.car_name]})]})})]})})]})},na=()=>e.jsx(e.Fragment,{children:e.jsx(Se,{})});export{na as default};
