import{r as a,c as ie,d as ne,bQ as h,j as e,B as c,bR as ce,bS as de,bT as ue,bU as ge}from"./index-N8t8oMzR.js";import{V as me}from"./Visibility-CgGAKN6P.js";import{C as _}from"./Close-CwR_quIe.js";import{I as pe}from"./InputField-riaj6edy.js";import{B as F}from"./Button-CBNcrDpD.js";import{D as he}from"./DataTable-BqUD-dAi.js";import{T as fe}from"./ToggleSwitch-DR4b514_.js";import{A as E}from"./Alert-CgNUKTJk.js";import{S as P}from"./SweetAlert-vzLgp13W.js";import{T as S}from"./Typography-CKlLxaDL.js";import{D as B,a as W}from"./Dialog-BGF2t3L7.js";import{D as ye}from"./DialogTitle-D6DEKDqS.js";import{I as T}from"./AlertTitle-D9ejxV9_.js";import{T as xe}from"./Tooltip-CwyNn424.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./useSlotProps-CaIca8GW.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";const Ce=()=>{const[f,L]=a.useState({id:"",category_name:""}),[x,b]=a.useState(null),[C,V]=a.useState(null),[r,l]=a.useState(null),[y,i]=a.useState(""),[v,s]=a.useState(!1),[k,m]=a.useState(!1),[je,we]=a.useState(!1),[M,A]=a.useState(null),[R,D]=a.useState(!1),[p,z]=a.useState(""),[d,I]=a.useState(0),[n,H]=a.useState(10),[u,j]=a.useState(null),[U,w]=a.useState(!1),o=ie(),{CategoryMaster:Y=[],totalItems:$}=ne(t=>t.CategoryMaster),K=Y.map(t=>({...t,id:t._id}));a.useEffect(()=>{o(h({search:p,page:d,limit:n}))},[p,d,n]);const Q=t=>{const{name:g,value:oe}=t.target;L(le=>({...le,[g]:oe}))},q=f.category_name.trim()!=="",G=async()=>{try{const t={category_name:f.category_name},g=await o(ge(t)).unwrap();l("success"),i("Category Added successfully."),s(!0),setTimeout(()=>s(!1),3e3),o(h({search:p,page:d,limit:n})),m(!1)}catch(t){l("error"),i("Failed to add Category: "+t),s(!0),setTimeout(()=>s(!1),3e3)}},J=async()=>{try{const t={_id:f.id,category_name:f.category_name},g=await o(ue(t)).unwrap();l("success"),i("Category updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),m(!1),V(null),o(h({search:p,page:d,limit:n}))}catch{l("error"),i("Failed to update Category: "),s(!0),setTimeout(()=>s(!1),3e3)}},O=async()=>{if(M){try{await o(de(M)).unwrap(),l("error"),i("Category deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),o(h({search:p,page:d,limit:n}))}catch(t){l("error"),i("Delete failed: "+t),s(!0),setTimeout(()=>s(!1),3e3)}D(!1),A(null)}},X=()=>{D(!1),A(null)},Z=t=>{j(t),w(!0)},ee=async()=>{if(u){try{await o(ce({_id:u._id,isActive:!u.isActive})).unwrap(),l("success"),i(`Category ${u.isActive?"deactivated":"activated"} successfully.`),s(!0),o(h({search:p,page:d,limit:n}))}catch(t){l("error"),i("Status toggle failed: "+t),s(!0)}setTimeout(()=>s(!1),3e3),w(!1),j(null)}},te=()=>{w(!1),j(null)},se=t=>{b(t)},N=()=>{b(null),m(!1)},ae=t=>{z(t),I(0),o(h({search:t,page:0,limit:n}))},re=[{accessorKey:"category_name",header:"Category Name"},{header:"Actions",Cell:({row:t})=>e.jsxs(c,{display:"flex",gap:1,children:[e.jsx(xe,{title:"View Details",children:e.jsx(T,{color:"primary",onClick:()=>se(t.original),children:e.jsx(me,{})})}),e.jsx(fe,{checked:t.original.isActive,onChange:()=>Z(t.original),tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(P,{show:U,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${u!=null&&u.isActive?"deactivate":"activate"} this Category?`,onConfirm:ee,onCancel:te,confirmText:"Yes",cancelText:"No"}),e.jsx(P,{show:R,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Category?",onConfirm:O,onCancel:X,confirmText:"Yes",cancelText:"No"}),v&&r&&e.jsx("div",{className:"p-4",children:e.jsx(E,{type:r,title:r==="success"?"Success!":r==="error"&&y.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:y,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),k?e.jsxs(B,{open:k,onClose:(t,g)=>{g!=="backdropClick"&&m(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(c,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(ye,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:C!==null?"Edit Category":"Add Category"}),e.jsx(T,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>m(!1),children:e.jsx(_,{})})]}),e.jsxs(W,{children:[v&&r&&e.jsx("div",{className:"mb-4",children:e.jsx(E,{type:r,title:r==="success"?"Success!":r==="error"&&y.toLowerCase().includes("deleted")?"Deleted!":r==="error"?"Error!":"Warning!",message:y,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(pe,{label:"Category Title",name:"category_name",value:f.category_name,onChange:Q})}),e.jsxs(c,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(F,{onClick:C!==null?J:G,className:"rounded-[25px]",disabled:!q,children:C!==null?"Update Category":"Add Category"}),e.jsx(F,{variant:"secondary",onClick:()=>m(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:e.jsx(c,{ml:2,children:e.jsx(S,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Category Management"})})}),e.jsx(he,{clickHandler:ae,data:K,columns:re,rowCount:$,pageIndex:d,pageSize:n,onPaginationChange:({pageIndex:t,pageSize:g})=>{I(t),H(g)}})]}),e.jsx(B,{open:!!x,onClose:N,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(c,{className:"rounded-xl overflow-hidden",children:[e.jsxs(c,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(S,{className:"font-outfit",variant:"h6",children:"Category Details"}),e.jsx(T,{sx:{color:"white"},onClick:N,children:e.jsx(_,{})})]}),e.jsx(W,{children:x&&e.jsx(c,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(S,{className:"font-outfit",children:[e.jsx("strong",{children:"Category Name:"})," ",x.category_name]})})})]})})]})},Je=()=>e.jsx(e.Fragment,{children:e.jsx(Ce,{})});export{Je as default};
