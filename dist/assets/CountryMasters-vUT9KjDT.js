import{r,c as ce,d as ue,bV as f,j as e,B as u,bW as de,bX as me,bY as pe,bZ as he}from"./index-N8t8oMzR.js";import{V as fe}from"./Visibility-CgGAKN6P.js";import{C as P}from"./Close-CwR_quIe.js";import{D as ye,E as xe}from"./DataTable-BqUD-dAi.js";import{I as ge}from"./InputField-riaj6edy.js";import{B as W}from"./Button-CBNcrDpD.js";import{T as Ce}from"./ToggleSwitch-DR4b514_.js";import{A as B}from"./Alert-CgNUKTJk.js";import{S as L}from"./SweetAlert-vzLgp13W.js";import{T as b}from"./Typography-CKlLxaDL.js";import{D as V,a as $}from"./Dialog-BGF2t3L7.js";import{D as je}from"./DialogTitle-D6DEKDqS.js";import{I as g}from"./AlertTitle-D9ejxV9_.js";import{T as z}from"./Tooltip-CwyNn424.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./useSlotProps-CaIca8GW.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";const we=()=>{const[y,k]=r.useState({id:"",country_name:""}),[C,v]=r.useState(null),[j,M]=r.useState(null),[o,n]=r.useState(null),[x,l]=r.useState(""),[A,s]=r.useState(!1),[D,d]=r.useState(!1),[Te,Se]=r.useState(!1),[I,_]=r.useState(null),[H,N]=r.useState(!1),[h,R]=r.useState(""),[m,E]=r.useState(0),[c,Y]=r.useState(10),[p,w]=r.useState(null),[U,T]=r.useState(!1),a=ce(),{CountryMaster:K=[],totalItems:X}=ue(t=>t.CountryMaster),Z=K.map(t=>({...t,id:t._id}));r.useEffect(()=>{a(f({search:h,page:m,limit:c}))},[h,m,c]);const q=t=>{const{name:i,value:S}=t.target;k(ie=>({...ie,[i]:S}))},G=y.country_name.trim()!=="",J=async()=>{try{const t={country_name:y.country_name},i=await a(he(t)).unwrap();n("success"),l("Country Added successfully."),s(!0),setTimeout(()=>s(!1),3e3),a(f({search:h,page:m,limit:c})),d(!1)}catch(t){n("error"),l("Failed to add Country: "+t),s(!0),setTimeout(()=>s(!1),3e3)}},O=async(t,i)=>{try{k({id:t._id||"",country_name:t.country_name||""}),M(i),d(!0)}catch(S){n("error"),l(`${S}`),s(!0),setTimeout(()=>s(!1),3e3)}},Q=async()=>{try{const t={_id:y.id,country_name:y.country_name},i=await a(pe(t)).unwrap();n("success"),l("Country updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),d(!1),M(null),a(f({search:h,page:m,limit:c}))}catch(t){n("error"),l(`${t}`),s(!0),setTimeout(()=>s(!1),3e3)}},ee=async()=>{if(I){try{await a(me(I)).unwrap(),n("error"),l("Country deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),a(f({search:h,page:m,limit:c}))}catch(t){n("error"),l("Delete failed: "+t),s(!0),setTimeout(()=>s(!1),3e3)}N(!1),_(null)}},te=()=>{N(!1),_(null)},se=t=>{w(t),T(!0)},re=async()=>{if(p){try{await a(de({_id:p._id,isActive:!p.isActive})).unwrap(),n("success"),l(`Country ${p.isActive?"deactivated":"activated"} successfully.`),s(!0),a(f({search:h,page:m,limit:c}))}catch(t){n("error"),l("Status toggle failed: "+t),s(!0)}setTimeout(()=>s(!1),3e3),T(!1),w(null)}},oe=()=>{T(!1),w(null)},ae=t=>{v(t)},F=()=>{v(null),d(!1)},ne=t=>{R(t),E(0),a(f({search:t,page:1,limit:c}))},le=[{accessorKey:"country_name",header:"Country Name"},{header:"Actions",Cell:({row:t})=>e.jsxs(u,{display:"flex",gap:1,children:[e.jsx(z,{title:"View Country Details",children:e.jsx(g,{color:"primary",onClick:()=>ae(t.original),children:e.jsx(fe,{})})}),e.jsx(z,{title:"Edit Country",children:e.jsx(g,{color:"secondary",onClick:()=>O(t.original,t.index),children:e.jsx(xe,{})})}),e.jsx(Ce,{checked:t.original.isActive,onChange:()=>se(t.original),tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(L,{show:U,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${p!=null&&p.isActive?"deactivate":"activate"} this Country?`,onConfirm:re,onCancel:oe,confirmText:"Yes",cancelText:"No"}),e.jsx(L,{show:H,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Country?",onConfirm:ee,onCancel:te,confirmText:"Yes",cancelText:"No"}),A&&o&&e.jsx("div",{className:"p-4",children:e.jsx(B,{type:o,title:o==="success"?"Success!":o==="error"&&x.toLowerCase().includes("deleted")?"Deleted!":o==="error"?"Error!":"Warning!",message:x,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),D?e.jsxs(V,{open:D,onClose:(t,i)=>{i!=="backdropClick"&&d(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(u,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(je,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:j!==null?"Edit Country":"Add Country"}),e.jsx(g,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>d(!1),children:e.jsx(P,{})})]}),e.jsxs($,{children:[A&&o&&e.jsx("div",{className:"mb-4",children:e.jsx(B,{type:o,title:o==="success"?"Success!":o==="error"&&x.toLowerCase().includes("deleted")?"Deleted!":o==="error"?"Error!":"Warning!",message:x,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(ge,{label:"Country Title",name:"country_name",value:y.country_name,onChange:q})}),e.jsxs(u,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(W,{onClick:j!==null?Q:J,className:"rounded-[25px]",disabled:!G,children:j!==null?"Update Country":"Add Country"}),e.jsx(W,{variant:"secondary",onClick:()=>d(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:e.jsx(u,{ml:2,children:e.jsx(b,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Country Management"})})}),e.jsx(ye,{clickHandler:ne,data:Z,columns:le,rowCount:X,pageIndex:m,pageSize:c,onPaginationChange:({pageIndex:t,pageSize:i})=>{E(t),Y(i)}})]}),e.jsx(V,{open:!!C,onClose:F,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(u,{className:"rounded-xl overflow-hidden",children:[e.jsxs(u,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(b,{className:"font-outfit",variant:"h6",children:"Country Details"}),e.jsx(g,{sx:{color:"white"},onClick:F,children:e.jsx(P,{})})]}),e.jsx($,{children:C&&e.jsx(u,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(b,{className:"font-outfit",children:[e.jsx("strong",{children:"Country Name:"})," ",C.country_name]})})})]})})]})},Oe=()=>e.jsx(e.Fragment,{children:e.jsx(we,{})});export{Oe as default};
