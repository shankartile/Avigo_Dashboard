import{aA as g,r as b,aB as k,j as r,B as S,c as le,a as oe,u as se,d as ce,aC as ue}from"./index-CNh2Ysd7.js";import{S as I}from"./skeleton-H-TAVWvB.js";import{I as de}from"./Info-BLOe8JuO.js";import{u as he,a as fe,b as me,i as T,c as ye,d as xe,e as _,w as V,g as ee,f as te,h as re,j as ae,k as ve,B as ge,X as pe,Y as be,T as je,L as we,l as L,m as B,C as P}from"./Card-Dc_NElbC.js";import{A as Se}from"./Alert-BBsTbpkb.js";import{C as ke,P as Oe}from"./PieChartCard-Czw4_RM_.js";import{F as W,S as U,M as w,D as R}from"./DateTimeField-BSuPXSWe.js";import{T as M}from"./Typography-DxP0RQcB.js";import{T as Te}from"./Tooltip-B4POfKz-.js";import"./createSvgIcon-BgVIxfXN.js";import"./index-BfVZHwAX.js";import"./utils-lR4eRFL7.js";import"./AlertTitle-BBXxFqxI.js";import"./CircularProgress-B1SplcgD.js";import"./index-5igkt3_T.js";import"./Dialog-CMeqEyOr.js";import"./useSlotProps-Dx6fg7Ph.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";var Ce=["x1","y1","x2","y2","key"],Pe=["offset"];function D(e){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(e)}function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?q(Object(i),!0).forEach(function(n){Ae(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function Ae(e,t,i){return t=De(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function De(e){var t=ze(e,"string");return D(t)=="symbol"?t:t+""}function ze(e,t){if(D(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t);if(D(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},A.apply(this,arguments)}function X(e,t){if(e==null)return{};var i=Fe(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Fe(e,t){if(e==null)return{};var i={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}var Ne=function(t){var i=t.fill;if(!i||i==="none")return null;var n=t.fillOpacity,o=t.x,a=t.y,c=t.width,y=t.height,u=t.ry;return g.createElement("rect",{x:o,y:a,ry:u,width:c,height:y,stroke:"none",fill:i,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function ie(e,t){var i;if(g.isValidElement(e))i=g.cloneElement(e,t);else if(_(e))i=e(t);else{var n=t.x1,o=t.y1,a=t.x2,c=t.y2,y=t.key,u=X(t,Ce),f=ve(u,!1);f.offset;var s=X(f,Pe);i=g.createElement("line",A({},s,{x1:n,y1:o,x2:a,y2:c,fill:"none",key:y}))}return i}function Ee(e){var t=e.x,i=e.width,n=e.horizontal,o=n===void 0?!0:n,a=e.horizontalPoints;if(!o||!a||!a.length)return null;var c=a.map(function(y,u){var f=p(p({},e),{},{x1:t,y1:y,x2:t+i,y2:y,key:"line-".concat(u),index:u});return ie(o,f)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Me(e){var t=e.y,i=e.height,n=e.vertical,o=n===void 0?!0:n,a=e.verticalPoints;if(!o||!a||!a.length)return null;var c=a.map(function(y,u){var f=p(p({},e),{},{x1:y,y1:t,x2:y,y2:t+i,key:"line-".concat(u),index:u});return ie(o,f)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Ie(e){var t=e.horizontalFill,i=e.fillOpacity,n=e.x,o=e.y,a=e.width,c=e.height,y=e.horizontalPoints,u=e.horizontal,f=u===void 0?!0:u;if(!f||!t||!t.length)return null;var s=y.map(function(h){return Math.round(h+o-o)}).sort(function(h,x){return h-x});o!==s[0]&&s.unshift(0);var d=s.map(function(h,x){var O=!s[x+1],l=O?o+c-h:s[x+1]-h;if(l<=0)return null;var m=x%t.length;return g.createElement("rect",{key:"react-".concat(x),y:h,x:n,height:l,width:a,stroke:"none",fill:t[m],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Ye(e){var t=e.vertical,i=t===void 0?!0:t,n=e.verticalFill,o=e.fillOpacity,a=e.x,c=e.y,y=e.width,u=e.height,f=e.verticalPoints;if(!i||!n||!n.length)return null;var s=f.map(function(h){return Math.round(h+a-a)}).sort(function(h,x){return h-x});a!==s[0]&&s.unshift(0);var d=s.map(function(h,x){var O=!s[x+1],l=O?a+y-h:s[x+1]-h;if(l<=0)return null;var m=x%n.length;return g.createElement("rect",{key:"react-".concat(x),x:h,y:c,width:l,height:u,stroke:"none",fill:n[m],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Ge=function(t,i){var n=t.xAxis,o=t.width,a=t.height,c=t.offset;return ee(te(p(p(p({},ae.defaultProps),n),{},{ticks:re(n,!0),viewBox:{x:0,y:0,width:o,height:a}})),c.left,c.left+c.width,i)},Le=function(t,i){var n=t.yAxis,o=t.width,a=t.height,c=t.offset;return ee(te(p(p(p({},ae.defaultProps),n),{},{ticks:re(n,!0),viewBox:{x:0,y:0,width:o,height:a}})),c.top,c.top+c.height,i)},z={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ne(e){var t,i,n,o,a,c,y=he(),u=fe(),f=me(),s=p(p({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:z.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:z.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:z.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:z.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:z.vertical,verticalFill:(c=e.verticalFill)!==null&&c!==void 0?c:z.verticalFill,x:T(e.x)?e.x:f.left,y:T(e.y)?e.y:f.top,width:T(e.width)?e.width:f.width,height:T(e.height)?e.height:f.height}),d=s.x,h=s.y,x=s.width,O=s.height,l=s.syncWithTicks,m=s.horizontalValues,v=s.verticalValues,j=ye(),C=xe();if(!T(x)||x<=0||!T(O)||O<=0||!T(d)||d!==+d||!T(h)||h!==+h)return null;var F=s.verticalCoordinatesGenerator||Ge,$=s.horizontalCoordinatesGenerator||Le,N=s.horizontalPoints,E=s.verticalPoints;if((!N||!N.length)&&_($)){var K=m&&m.length,Y=$({yAxis:C?p(p({},C),{},{ticks:K?m:C.ticks}):void 0,width:y,height:u,offset:f},K?!0:l);V(Array.isArray(Y),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(D(Y),"]")),Array.isArray(Y)&&(N=Y)}if((!E||!E.length)&&_(F)){var H=v&&v.length,G=F({xAxis:j?p(p({},j),{},{ticks:H?v:j.ticks}):void 0,width:y,height:u,offset:f},H?!0:l);V(Array.isArray(G),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(D(G),"]")),Array.isArray(G)&&(E=G)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(Ne,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),g.createElement(Ee,A({},s,{offset:f,horizontalPoints:N,xAxis:j,yAxis:C})),g.createElement(Me,A({},s,{offset:f,verticalPoints:E,xAxis:j,yAxis:C})),g.createElement(Ie,A({},s,{horizontalPoints:N})),g.createElement(Ye,A({},s,{verticalPoints:E})))}ne.displayName="CartesianGrid";const J=[{date:"2025-09-10",name:"10 Sep",count:5},{date:"2025-09-11",name:"11 Sep",count:8},{date:"2025-09-12",name:"12 Sep",count:6},{date:k().format("YYYY-MM-DD"),name:"Today",count:10}],Q=[{date:"2025-09-10",name:"10 Sep",resident:30,treasurer:5,security:10},{date:"2025-09-11",name:"11 Sep",resident:40,treasurer:8,security:12},{date:k().format("YYYY-MM-DD"),name:"Today",resident:50,treasurer:10,security:15}],Z=[{city:"Pune",count:25},{city:"Mumbai",count:40},{city:"Nashik",count:15},{city:"Nagpur",count:10}],Be=()=>{const[e,t]=b.useState("society"),[i,n]=b.useState("weekly"),[o,a]=b.useState(null),[c,y]=b.useState(null),[u,f]=b.useState("all"),[s,d]=b.useState(!0);b.useEffect(()=>{const l=setTimeout(()=>d(!1),700);return()=>clearTimeout(l)},[]);const h=l=>{if(!Array.isArray(l))return[];const m=k().startOf("day");let v,j;switch(i){case"today":v=m,j=m.endOf("day");break;case"weekly":v=m.subtract(6,"day"),j=m.endOf("day");break;case"monthly":v=m.startOf("month"),j=m.endOf("month");break;case"yearly":v=m.startOf("year"),j=m.endOf("year");break;case"custom":if(!o||!c)return l;v=k(o).startOf("day"),j=k(c).endOf("day");break;default:return l}return l.filter(C=>{const F=k(C.date);return F.isAfter(v)&&F.isBefore(j)})},x=b.useMemo(()=>e==="society"?h(J).map(l=>({name:i==="monthly"?k(l.date).format("DD MMM"):l.name,count:l.count})):e==="users"?h(Q).map(l=>({name:i==="monthly"?k(l.date).format("DD MMM"):l.name,resident:u==="resident"||u==="all"?l.resident:0,treasurer:u==="treasurer"||u==="all"?l.treasurer:0,security:u==="security"||u==="all"?l.security:0})):Z.map(l=>({name:l.city,count:l.count})),[e,i,o,c,u]),O=b.useMemo(()=>{if(e==="society")return[{name:"Societies",value:h(J).reduce((m,v)=>m+v.count,0)}];if(e==="users"){const l=h(Q).reduce((m,v)=>(m.resident+=v.resident,m.treasurer+=v.treasurer,m.security+=v.security,m),{resident:0,treasurer:0,security:0});return[{name:"Residents",value:l.resident},{name:"Treasurer",value:l.treasurer},{name:"Security",value:l.security}]}return Z.map(l=>({name:l.city,value:l.count}))},[e,i,o,c]);return s?r.jsxs(S,{className:"space-y-6 p-6",children:[r.jsx(I,{height:30,width:"40%"}),r.jsx(I,{height:300}),r.jsx(I,{height:300})]}):r.jsxs(S,{className:"p-6",children:[r.jsxs(S,{className:"flex justify-center flex-wrap gap-6 mb-8",children:[r.jsx(W,{className:"w-60",children:r.jsxs(U,{value:i,onChange:l=>n(l.target.value),children:[r.jsx(w,{value:"today",children:"Today"}),r.jsx(w,{value:"weekly",children:"Weekly"}),r.jsx(w,{value:"monthly",children:"Monthly"}),r.jsx(w,{value:"yearly",children:"Yearly"}),r.jsx(w,{value:"custom",children:"Custom"})]})}),i==="custom"&&r.jsxs(S,{className:"flex gap-4",children:[r.jsx(R,{label:"From",type:"date",value:o??"",onChange:l=>a(l.target.value),maxDate:k().format("YYYY-MM-DD")}),r.jsx(R,{label:"To",type:"date",value:c??"",onChange:l=>y(l.target.value),maxDate:k().format("YYYY-MM-DD"),minDate:o||void 0})]}),r.jsx(W,{className:"w-72",children:r.jsxs(U,{value:e,onChange:l=>t(l.target.value),children:[r.jsx(w,{value:"society",children:"Society On-boarded"}),r.jsx(w,{value:"users",children:"Application Users"}),r.jsx(w,{value:"citywise",children:"City-wise Society"})]})}),e==="users"&&r.jsx(W,{className:"w-60",children:r.jsxs(U,{value:u,onChange:l=>f(l.target.value),children:[r.jsx(w,{value:"all",children:"All Users"}),r.jsx(w,{value:"resident",children:"Residents"}),r.jsx(w,{value:"treasurer",children:"Treasurer"}),r.jsx(w,{value:"security",children:"Security"})]})})]}),r.jsxs(S,{className:"bg-white p-4 rounded-xl shadow mb-6",children:[r.jsx(ke,{title:e.toUpperCase(),subheader:i}),r.jsxs(ge,{width:Math.max(500,x.length*150),height:300,data:x,children:[r.jsx(ne,{strokeDasharray:"3 3"}),r.jsx(pe,{dataKey:"name"}),r.jsx(be,{allowDecimals:!1}),r.jsx(je,{}),r.jsx(we,{}),e==="users"?r.jsxs(r.Fragment,{children:[r.jsx(L,{dataKey:"resident",fill:"#245492",children:r.jsx(B,{dataKey:"resident",position:"top"})}),r.jsx(L,{dataKey:"treasurer",fill:"#E9984C",children:r.jsx(B,{dataKey:"treasurer",position:"top"})}),r.jsx(L,{dataKey:"security",fill:"#ed2424",children:r.jsx(B,{dataKey:"security",position:"top"})})]}):r.jsx(L,{dataKey:"count",fill:"#245492",children:r.jsx(B,{dataKey:"count",position:"top"})})]})]}),r.jsx(S,{className:"bg-white p-4 rounded-xl shadow",children:r.jsx(Oe,{title:"Distribution",subheader:i,data:O})})]})},We=()=>{const e=le(),t=oe(),i=se(),{summary:n,loading:o}=ce(d=>d.superadmindashboard),a=n,[c,y]=b.useState(!0),[u,f]=b.useState(null);b.useEffect(()=>{e(ue());const d=setTimeout(()=>y(!1),800);return()=>clearTimeout(d)},[e]),b.useEffect(()=>{var d;if((d=i.state)!=null&&d.alert){f(i.state.alert);const h=setTimeout(()=>{f(null),t(i.pathname,{replace:!0})},2e3);return()=>clearTimeout(h)}},[i,t]);const s=()=>r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:7}).map((d,h)=>r.jsxs(S,{sx:{p:2,bgcolor:"#fff",borderRadius:2,boxShadow:1},children:[r.jsx(I,{height:22,width:"70%"}),r.jsx(I,{height:36,width:"40%",style:{marginTop:8}})]},h))});return r.jsxs("div",{children:[u&&r.jsx(Se,{type:u.type,title:u.title,message:u.message,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>f(null)}),r.jsxs("div",{className:"p-6",children:[r.jsxs(M,{variant:"h5",fontWeight:500,mb:2,children:["Dashboard",r.jsx(Te,{title:"Disply count of all modules,display graph and calculations !",arrow:!0,slotProps:{popper:{sx:{"& .MuiTooltip-tooltip":{fontSize:"0.8rem",backgroundColor:"#245492",color:"#fff",fontFamily:"Outfit",padding:"8px 12px"},"& .MuiTooltip-arrow":{color:"#245492"}}}},children:r.jsx(de,{fontSize:"medium",sx:{color:"#245492",cursor:"pointer"},onClick:d=>d.stopPropagation()})})]}),c||o?s():r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:[r.jsx(P,{title:"Total No. Society-Sub Counter",tooltip:"Total societies",value:(a==null?void 0:a.totalSociety)||0,navigateLink:"/superadmin/society-onboarding",percentage:"",isIncrease:!1,hideChart:!0,children:r.jsx(S,{display:"flex",gap:1,mt:2,children:[{label:"Active",color:"#22c55e",count:(a==null?void 0:a.activeSociety)||0},{label:"Inactive",color:"#ef4444",count:(a==null?void 0:a.inactiveSociety)||0}].map(d=>r.jsxs(S,{flex:1,p:1,textAlign:"center",bgcolor:"#f9fafb",borderRadius:2,children:[r.jsx(M,{variant:"caption",children:d.label}),r.jsx(M,{variant:"h5",fontWeight:"bold",sx:{color:d.color},children:d.count})]},d.label))})}),r.jsx(P,{title:"Total No. Resident User",tooltip:"Total resident users",value:(a==null?void 0:a.totalResidentUser)||0,navigateLink:"/superadmin/society-resident",percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. Treasurer User",tooltip:"Total treasurer users",value:(a==null?void 0:a.totalTreasurerUser)||0,percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. Security User",tooltip:"Total security users",value:(a==null?void 0:a.totalSecurityUser)||0,percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. of Support Tickets Raised",tooltip:"Support tickets",value:(a==null?void 0:a.totalSupportTickets)||0,navigateLink:"/superadmin/society-supportticket-management",percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. of Application Feedback",tooltip:"Feedback from all roles",value:((a==null?void 0:a.residentFeedback)||0)+((a==null?void 0:a.treasurerFeedback)||0)+((a==null?void 0:a.securityFeedback)||0),navigateLink:"/superadmin/society-feedback-management",percentage:"",isIncrease:!1,hideChart:!0,children:r.jsx(S,{display:"flex",gap:1,mt:2,children:[{label:"Resident",color:"#3b82f6",count:(a==null?void 0:a.residentFeedback)||0},{label:"Treasurer",color:"#f59e0b",count:(a==null?void 0:a.treasurerFeedback)||0},{label:"Security",color:"#8b5cf6",count:(a==null?void 0:a.securityFeedback)||0}].map(d=>r.jsxs(S,{flex:1,p:1,textAlign:"center",bgcolor:"#f9fafb",borderRadius:2,children:[r.jsx(M,{variant:"caption",children:d.label}),r.jsx(M,{variant:"h5",fontWeight:"bold",sx:{color:d.color},children:d.count})]},d.label))})}),r.jsx(P,{title:"Total No. of Enquiry",tooltip:"Total enquiries",value:(a==null?void 0:a.totalEnquiry)||0,navigateLink:"/superadmin/society-notifications",percentage:"",isIncrease:!1,hideChart:!0})]})]}),r.jsx(Be,{})]})},ot=()=>r.jsx(r.Fragment,{children:r.jsx(We,{})});export{ot as default};
