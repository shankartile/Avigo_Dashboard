import{aA as g,r as b,aB as k,j as r,B as S,c as le,a as se,u as oe,d as ce,aC as ue}from"./index-N8t8oMzR.js";import{S as I}from"./skeleton-CrFh5em0.js";import{I as de}from"./Info-lyeC1xGk.js";import{u as he,a as fe,b as ye,i as C,c as me,d as ve,e as _,w as V,g as ee,f as te,h as re,j as ae,k as xe,B as ge,X as pe,Y as be,T as je,L as we,l as L,m as B,C as P}from"./Card-DpCiAos0.js";import{A as Se}from"./Alert-CgNUKTJk.js";import{C as ke,P as Oe}from"./PieChartCard-katBT7pH.js";import{F as W,S as U,M as w,D as R}from"./DateTimeField-BNev5xzk.js";import{T as M}from"./Typography-CKlLxaDL.js";import{T as Ce}from"./Tooltip-CwyNn424.js";import"./createSvgIcon-DUEWsKfg.js";import"./index-CY0vqa8Z.js";import"./utils-D3TFH80g.js";import"./AlertTitle-D9ejxV9_.js";import"./CircularProgress-BJr-bAJD.js";import"./Card-l5DVGevb.js";import"./index-LlRZSLEd.js";import"./Dialog-BGF2t3L7.js";import"./useSlotProps-CaIca8GW.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";var Te=["x1","y1","x2","y2","key"],Pe=["offset"];function D(e){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(e)}function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?q(Object(i),!0).forEach(function(n){Ae(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function Ae(e,t,i){return t=De(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function De(e){var t=ze(e,"string");return D(t)=="symbol"?t:t+""}function ze(e,t){if(D(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t);if(D(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},A.apply(this,arguments)}function X(e,t){if(e==null)return{};var i=Fe(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Fe(e,t){if(e==null)return{};var i={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}var Ne=function(t){var i=t.fill;if(!i||i==="none")return null;var n=t.fillOpacity,s=t.x,a=t.y,c=t.width,m=t.height,u=t.ry;return g.createElement("rect",{x:s,y:a,ry:u,width:c,height:m,stroke:"none",fill:i,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function ie(e,t){var i;if(g.isValidElement(e))i=g.cloneElement(e,t);else if(_(e))i=e(t);else{var n=t.x1,s=t.y1,a=t.x2,c=t.y2,m=t.key,u=X(t,Te),f=xe(u,!1);f.offset;var o=X(f,Pe);i=g.createElement("line",A({},o,{x1:n,y1:s,x2:a,y2:c,fill:"none",key:m}))}return i}function Ee(e){var t=e.x,i=e.width,n=e.horizontal,s=n===void 0?!0:n,a=e.horizontalPoints;if(!s||!a||!a.length)return null;var c=a.map(function(m,u){var f=p(p({},e),{},{x1:t,y1:m,x2:t+i,y2:m,key:"line-".concat(u),index:u});return ie(s,f)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Me(e){var t=e.y,i=e.height,n=e.vertical,s=n===void 0?!0:n,a=e.verticalPoints;if(!s||!a||!a.length)return null;var c=a.map(function(m,u){var f=p(p({},e),{},{x1:m,y1:t,x2:m,y2:t+i,key:"line-".concat(u),index:u});return ie(s,f)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Ie(e){var t=e.horizontalFill,i=e.fillOpacity,n=e.x,s=e.y,a=e.width,c=e.height,m=e.horizontalPoints,u=e.horizontal,f=u===void 0?!0:u;if(!f||!t||!t.length)return null;var o=m.map(function(d){return Math.round(d+s-s)}).sort(function(d,v){return d-v});s!==o[0]&&o.unshift(0);var h=o.map(function(d,v){var O=!o[v+1],l=O?s+c-d:o[v+1]-d;if(l<=0)return null;var y=v%t.length;return g.createElement("rect",{key:"react-".concat(v),y:d,x:n,height:l,width:a,stroke:"none",fill:t[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Ye(e){var t=e.vertical,i=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,a=e.x,c=e.y,m=e.width,u=e.height,f=e.verticalPoints;if(!i||!n||!n.length)return null;var o=f.map(function(d){return Math.round(d+a-a)}).sort(function(d,v){return d-v});a!==o[0]&&o.unshift(0);var h=o.map(function(d,v){var O=!o[v+1],l=O?a+m-d:o[v+1]-d;if(l<=0)return null;var y=v%n.length;return g.createElement("rect",{key:"react-".concat(v),x:d,y:c,width:l,height:u,stroke:"none",fill:n[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Ge=function(t,i){var n=t.xAxis,s=t.width,a=t.height,c=t.offset;return ee(te(p(p(p({},ae.defaultProps),n),{},{ticks:re(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),c.left,c.left+c.width,i)},Le=function(t,i){var n=t.yAxis,s=t.width,a=t.height,c=t.offset;return ee(te(p(p(p({},ae.defaultProps),n),{},{ticks:re(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),c.top,c.top+c.height,i)},z={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ne(e){var t,i,n,s,a,c,m=he(),u=fe(),f=ye(),o=p(p({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:z.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:z.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:z.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:z.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:z.vertical,verticalFill:(c=e.verticalFill)!==null&&c!==void 0?c:z.verticalFill,x:C(e.x)?e.x:f.left,y:C(e.y)?e.y:f.top,width:C(e.width)?e.width:f.width,height:C(e.height)?e.height:f.height}),h=o.x,d=o.y,v=o.width,O=o.height,l=o.syncWithTicks,y=o.horizontalValues,x=o.verticalValues,j=me(),T=ve();if(!C(v)||v<=0||!C(O)||O<=0||!C(h)||h!==+h||!C(d)||d!==+d)return null;var F=o.verticalCoordinatesGenerator||Ge,$=o.horizontalCoordinatesGenerator||Le,N=o.horizontalPoints,E=o.verticalPoints;if((!N||!N.length)&&_($)){var K=y&&y.length,Y=$({yAxis:T?p(p({},T),{},{ticks:K?y:T.ticks}):void 0,width:m,height:u,offset:f},K?!0:l);V(Array.isArray(Y),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(D(Y),"]")),Array.isArray(Y)&&(N=Y)}if((!E||!E.length)&&_(F)){var H=x&&x.length,G=F({xAxis:j?p(p({},j),{},{ticks:H?x:j.ticks}):void 0,width:m,height:u,offset:f},H?!0:l);V(Array.isArray(G),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(D(G),"]")),Array.isArray(G)&&(E=G)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(Ne,{fill:o.fill,fillOpacity:o.fillOpacity,x:o.x,y:o.y,width:o.width,height:o.height,ry:o.ry}),g.createElement(Ee,A({},o,{offset:f,horizontalPoints:N,xAxis:j,yAxis:T})),g.createElement(Me,A({},o,{offset:f,verticalPoints:E,xAxis:j,yAxis:T})),g.createElement(Ie,A({},o,{horizontalPoints:N})),g.createElement(Ye,A({},o,{verticalPoints:E})))}ne.displayName="CartesianGrid";const J=[{date:"2025-09-10",name:"10 Sep",count:5},{date:"2025-09-11",name:"11 Sep",count:8},{date:"2025-09-12",name:"12 Sep",count:6},{date:k().format("YYYY-MM-DD"),name:"Today",count:10}],Q=[{date:"2025-09-10",name:"10 Sep",resident:30,treasurer:5,security:10},{date:"2025-09-11",name:"11 Sep",resident:40,treasurer:8,security:12},{date:k().format("YYYY-MM-DD"),name:"Today",resident:50,treasurer:10,security:15}],Z=[{city:"Pune",count:25},{city:"Mumbai",count:40},{city:"Nashik",count:15},{city:"Nagpur",count:10}],Be=()=>{const[e,t]=b.useState("society"),[i,n]=b.useState("weekly"),[s,a]=b.useState(null),[c,m]=b.useState(null),[u,f]=b.useState("all"),[o,h]=b.useState(!0);b.useEffect(()=>{const l=setTimeout(()=>h(!1),700);return()=>clearTimeout(l)},[]);const d=l=>{if(!Array.isArray(l))return[];const y=k().startOf("day");let x,j;switch(i){case"today":x=y,j=y.endOf("day");break;case"weekly":x=y.subtract(6,"day"),j=y.endOf("day");break;case"monthly":x=y.startOf("month"),j=y.endOf("month");break;case"yearly":x=y.startOf("year"),j=y.endOf("year");break;case"custom":if(!s||!c)return l;x=k(s).startOf("day"),j=k(c).endOf("day");break;default:return l}return l.filter(T=>{const F=k(T.date);return F.isAfter(x)&&F.isBefore(j)})},v=b.useMemo(()=>e==="society"?d(J).map(l=>({name:i==="monthly"?k(l.date).format("DD MMM"):l.name,count:l.count})):e==="users"?d(Q).map(l=>({name:i==="monthly"?k(l.date).format("DD MMM"):l.name,resident:u==="resident"||u==="all"?l.resident:0,treasurer:u==="treasurer"||u==="all"?l.treasurer:0,security:u==="security"||u==="all"?l.security:0})):Z.map(l=>({name:l.city,count:l.count})),[e,i,s,c,u]),O=b.useMemo(()=>{if(e==="society")return[{name:"Societies",value:d(J).reduce((y,x)=>y+x.count,0)}];if(e==="users"){const l=d(Q).reduce((y,x)=>(y.resident+=x.resident,y.treasurer+=x.treasurer,y.security+=x.security,y),{resident:0,treasurer:0,security:0});return[{name:"Residents",value:l.resident},{name:"Treasurer",value:l.treasurer},{name:"Security",value:l.security}]}return Z.map(l=>({name:l.city,value:l.count}))},[e,i,s,c]);return o?r.jsxs(S,{className:"space-y-6 p-6",children:[r.jsx(I,{height:30,width:"40%"}),r.jsx(I,{height:300}),r.jsx(I,{height:300})]}):r.jsxs(S,{className:"p-6",children:[r.jsxs(S,{className:"flex justify-center flex-wrap gap-6 mb-8",children:[r.jsx(W,{className:"w-60",children:r.jsxs(U,{value:i,onChange:l=>n(l.target.value),children:[r.jsx(w,{value:"today",children:"Today"}),r.jsx(w,{value:"weekly",children:"Weekly"}),r.jsx(w,{value:"monthly",children:"Monthly"}),r.jsx(w,{value:"yearly",children:"Yearly"}),r.jsx(w,{value:"custom",children:"Custom"})]})}),i==="custom"&&r.jsxs(S,{className:"flex gap-4",children:[r.jsx(R,{label:"From",type:"date",value:s??"",onChange:l=>a(l.target.value),maxDate:k().format("YYYY-MM-DD")}),r.jsx(R,{label:"To",type:"date",value:c??"",onChange:l=>m(l.target.value),maxDate:k().format("YYYY-MM-DD"),minDate:s||void 0})]}),r.jsx(W,{className:"w-72",children:r.jsxs(U,{value:e,onChange:l=>t(l.target.value),children:[r.jsx(w,{value:"society",children:"Society On-boarded"}),r.jsx(w,{value:"users",children:"Application Users"}),r.jsx(w,{value:"citywise",children:"City-wise Society"})]})}),e==="users"&&r.jsx(W,{className:"w-60",children:r.jsxs(U,{value:u,onChange:l=>f(l.target.value),children:[r.jsx(w,{value:"all",children:"All Users"}),r.jsx(w,{value:"resident",children:"Residents"}),r.jsx(w,{value:"treasurer",children:"Treasurer"}),r.jsx(w,{value:"security",children:"Security"})]})})]}),r.jsxs(S,{className:"bg-white p-4 rounded-xl shadow mb-6",children:[r.jsx(ke,{title:e.toUpperCase(),subheader:i}),r.jsxs(ge,{width:Math.max(500,v.length*150),height:300,data:v,children:[r.jsx(ne,{strokeDasharray:"3 3"}),r.jsx(pe,{dataKey:"name"}),r.jsx(be,{allowDecimals:!1}),r.jsx(je,{}),r.jsx(we,{}),e==="users"?r.jsxs(r.Fragment,{children:[r.jsx(L,{dataKey:"resident",fill:"#245492",children:r.jsx(B,{dataKey:"resident",position:"top"})}),r.jsx(L,{dataKey:"treasurer",fill:"#E9984C",children:r.jsx(B,{dataKey:"treasurer",position:"top"})}),r.jsx(L,{dataKey:"security",fill:"#ed2424",children:r.jsx(B,{dataKey:"security",position:"top"})})]}):r.jsx(L,{dataKey:"count",fill:"#245492",children:r.jsx(B,{dataKey:"count",position:"top"})})]})]}),r.jsx(S,{className:"bg-white p-4 rounded-xl shadow",children:r.jsx(Oe,{title:"Distribution",subheader:i,data:O})})]})},We=()=>{const e=le(),t=se(),i=oe(),{summary:n,loading:s}=ce(h=>h.superadmindashboard),a=n,[c,m]=b.useState(!0),[u,f]=b.useState(null);b.useEffect(()=>{e(ue());const h=setTimeout(()=>m(!1),800);return()=>clearTimeout(h)},[e]),b.useEffect(()=>{var h;if((h=i.state)!=null&&h.alert){f(i.state.alert);const d=setTimeout(()=>{f(null),t(i.pathname,{replace:!0})},2e3);return()=>clearTimeout(d)}},[i,t]);const o=()=>r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:7}).map((h,d)=>r.jsxs(S,{sx:{p:2,bgcolor:"#fff",borderRadius:2,boxShadow:1},children:[r.jsx(I,{height:22,width:"70%"}),r.jsx(I,{height:36,width:"40%",style:{marginTop:8}})]},d))});return r.jsxs("div",{children:[u&&r.jsx(Se,{type:u.type,title:u.title,message:u.message,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>f(null)}),r.jsxs("div",{className:"p-6",children:[r.jsx(S,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:r.jsxs(M,{variant:"h5",fontWeight:500,children:["Dashboard",r.jsx(Ce,{title:"Disply count of all modules,display graph and calculations !",children:r.jsx(de,{sx:{ml:1,color:"#245492"}})})]})}),c||s?o():r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:[r.jsx(P,{title:"Total No. Society-Sub Counter",tooltip:"Total societies",value:(a==null?void 0:a.totalSociety)||0,navigateLink:"/superadmin/society-onboarding",percentage:"",isIncrease:!1,hideChart:!0,children:r.jsx(S,{display:"flex",gap:1,mt:2,children:[{label:"Active",color:"#22c55e",count:(a==null?void 0:a.activeSociety)||0},{label:"Inactive",color:"#ef4444",count:(a==null?void 0:a.inactiveSociety)||0}].map(h=>r.jsxs(S,{flex:1,p:1,textAlign:"center",bgcolor:"#f9fafb",borderRadius:2,children:[r.jsx(M,{variant:"caption",children:h.label}),r.jsx(M,{variant:"h5",fontWeight:"bold",sx:{color:h.color},children:h.count})]},h.label))})}),r.jsx(P,{title:"Total No. Resident User",tooltip:"Total resident users",value:(a==null?void 0:a.totalResidentUser)||0,navigateLink:"/superadmin/society-resident",percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. Treasurer User",tooltip:"Total treasurer users",value:(a==null?void 0:a.totalTreasurerUser)||0,percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. Security User",tooltip:"Total security users",value:(a==null?void 0:a.totalSecurityUser)||0,percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. of Support Tickets Raised",tooltip:"Support tickets",value:(a==null?void 0:a.totalSupportTickets)||0,navigateLink:"/superadmin/society-supportticket-management",percentage:"",isIncrease:!1,hideChart:!0}),r.jsx(P,{title:"Total No. of Application Feedback",tooltip:"Feedback from all roles",value:((a==null?void 0:a.residentFeedback)||0)+((a==null?void 0:a.treasurerFeedback)||0)+((a==null?void 0:a.securityFeedback)||0),navigateLink:"/superadmin/society-feedback-management",percentage:"",isIncrease:!1,hideChart:!0,children:r.jsx(S,{display:"flex",gap:1,mt:2,children:[{label:"Resident",color:"#3b82f6",count:(a==null?void 0:a.residentFeedback)||0},{label:"Treasurer",color:"#f59e0b",count:(a==null?void 0:a.treasurerFeedback)||0},{label:"Security",color:"#8b5cf6",count:(a==null?void 0:a.securityFeedback)||0}].map(h=>r.jsxs(S,{flex:1,p:1,textAlign:"center",bgcolor:"#f9fafb",borderRadius:2,children:[r.jsx(M,{variant:"caption",children:h.label}),r.jsx(M,{variant:"h5",fontWeight:"bold",sx:{color:h.color},children:h.count})]},h.label))})}),r.jsx(P,{title:"Total No. of Enquiry",tooltip:"Total enquiries",value:(a==null?void 0:a.totalEnquiry)||0,navigateLink:"/superadmin/society-notifications",percentage:"",isIncrease:!1,hideChart:!0})]})]}),r.jsx(Be,{})]})},ot=()=>r.jsx(r.Fragment,{children:r.jsx(We,{})});export{ot as default};
