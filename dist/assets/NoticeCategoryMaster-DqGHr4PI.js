import{r as o,c as ge,d as L,a8 as y,a9 as pe,j as e,B as m,aa as me,ab as he,ac as ye,ad as xe}from"./index-CNh2Ysd7.js";import{A as fe}from"./Add-ONoAddvh.js";import{D as Ce}from"./Delete-BKL8mfiA.js";import{V as je}from"./Visibility-CFK2wX7e.js";import{C as V}from"./Close-CSWdanUp.js";import{D as Ne,E as Te}from"./DataTable-CBDiE-I1.js";import{I as we}from"./InputField-Cac7SuVh.js";import{B as k}from"./Button-D2SEshHa.js";import{T as Se}from"./ToggleSwitch-CRLgVpk1.js";import{A as z}from"./Alert-BBsTbpkb.js";import{S as H}from"./SweetAlert-DUVT9XWx.js";import{T as A}from"./Typography-DxP0RQcB.js";import{D as R,a as U}from"./Dialog-CMeqEyOr.js";import{D as be}from"./DialogTitle-sP3uGIgc.js";import{I as x}from"./AlertTitle-BBXxFqxI.js";import{T as K}from"./Tooltip-B4POfKz-.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./Divider-1omdH51K.js";import"./Tabs-DWd8sdsH.js";import"./skeleton-H-TAVWvB.js";const _e=()=>{const[u,C]=o.useState({id:"",category:"",notice_type_id:""}),[j,D]=o.useState(null),[N,T]=o.useState(null),[a,i]=o.useState(null),[f,c]=o.useState(""),[M,s]=o.useState(!1),[I,g]=o.useState(!1),[ve,ke]=o.useState(!1),[E,w]=o.useState(null),[O,S]=o.useState(!1),[p,Y]=o.useState(""),[l,F]=o.useState(0),[n,$]=o.useState(10),[h,b]=o.useState(null),[q,_]=o.useState(!1),r=ge(),{NoticeCategoryMaster:G=[],totalItems:J}=L(t=>t.NoticeCategoryMasters),{NoticeTypeMaster:v}=L(t=>t.NoticeTypeMaster),Q=G.map(t=>({...t,id:t._id}));o.useEffect(()=>{const t=setTimeout(()=>{r(y({search:p,page:l,limit:n}))},500);return()=>clearTimeout(t)},[p,l,n]),o.useEffect(()=>{const t=setTimeout(()=>{r(pe({search:p,page:l,limit:n}))},500);return()=>clearTimeout(t)},[p,l,n]);const P=t=>{const{name:d,value:W}=t.target;C(ue=>({...ue,[d]:W}))},X=u.category.trim()!=="",Z=async()=>{try{const t={category:u.category,notice_type_id:u.notice_type_id||""},d=await r(xe(t)).unwrap();i("success"),c("Notice Category Added successfully."),s(!0),setTimeout(()=>s(!1),3e3),r(y({search:p,page:l,limit:n})),g(!1)}catch(t){i("error"),c("Failed to add Notice Category : "+t),s(!0),setTimeout(()=>s(!1),3e3)}},ee=async(t,d)=>{try{C({id:t._id||"",category:t.category||"",notice_type_id:t.notice_type_id||""}),T(d),g(!0)}catch{i("error"),c("Unable to fetch Notice Category details for editing."),s(!0)}},te=async()=>{try{const t={_id:u.id,category:u.category,notice_type_id:u.notice_type_id||""},d=await r(ye(t)).unwrap();i("success"),c("Notice Category  updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),g(!1),T(null),r(y({search:p,page:l,limit:n}))}catch{i("error"),c("Failed to update Notice Category : "),s(!0),setTimeout(()=>s(!1),3e3)}},se=t=>{w(t),S(!0)},oe=async()=>{if(E){try{await r(he(E)).unwrap(),i("error"),c("Notice Category deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),r(y({search:p,page:l,limit:n}))}catch(t){i("error"),c("Delete failed: "+t),s(!0),setTimeout(()=>s(!1),3e3)}S(!1),w(null)}},ae=()=>{S(!1),w(null)},re=t=>{b(t),_(!0)},ie=async()=>{if(h){try{await r(me({_id:h._id,isActive:!h.isActive})).unwrap(),i("success"),c(`Notice Category ${h.isActive?"deactivated":"activated"} successfully.`),s(!0),r(y({search:p,page:l,limit:n}))}catch(t){i("error"),c("Status toggle failed: "+t),s(!0)}setTimeout(()=>s(!1),3e3),_(!1),b(null)}},ce=()=>{_(!1),b(null)},le=t=>{D(t)},B=()=>{D(null),g(!1)},ne=t=>{Y(t),F(0)},de=[{accessorKey:"category",header:"Notice category"},{accessorKey:"notice_type_name",header:"Notice Type"},{header:"Actions",Cell:({row:t})=>e.jsxs(m,{display:"flex",gap:1,children:[e.jsx(K,{title:"View Details",children:e.jsx(x,{color:"primary",onClick:()=>le(t.original),children:e.jsx(je,{})})}),!t.original.isOthers&&e.jsx(K,{title:"Edit",children:e.jsx("span",{children:e.jsx(x,{color:"secondary",onClick:()=>ee(t.original,t.index),children:e.jsx(Te,{})})})}),!t.original.isOthers&&e.jsx(x,{color:"error",onClick:()=>se(t.original._id),children:e.jsx(Ce,{})}),e.jsx(Se,{checked:t.original.isActive,onChange:()=>re(t.original),tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(H,{show:q,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${h!=null&&h.isActive?"deactivate":"activate"} this Notice Category?`,onConfirm:ie,onCancel:ce,confirmText:"Yes",cancelText:"No"}),e.jsx(H,{show:O,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this Notice Category ?",onConfirm:oe,onCancel:ae,confirmText:"Yes",cancelText:"No"}),M&&a&&e.jsx("div",{className:"p-4",children:e.jsx(z,{type:a,title:a==="success"?"Success!":a==="error"&&f.toLowerCase().includes("deleted")?"Deleted!":a==="error"?"Error!":"Warning!",message:f,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),I?e.jsxs(R,{open:I,onClose:(t,d)=>{d!=="backdropClick"&&g(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(m,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(be,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:N!==null?"Edit Notice Category":"Add Notice Category"}),e.jsx(x,{sx:{position:"absolute",top:12,right:12,color:"white"},onClick:()=>g(!1),children:e.jsx(V,{})})]}),e.jsxs(U,{children:[M&&a&&e.jsx("div",{className:"mb-4",children:e.jsx(z,{type:a,title:a==="success"?"Success!":a==="error"&&f.toLowerCase().includes("deleted")?"Deleted!":a==="error"?"Error!":"Warning!",message:f,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white mb-1 block",children:["Notice Type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"notice_type_id",value:u.notice_type_id,onChange:P,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Notice Type"}),v==null?void 0:v.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.notice_type},t._id))]})]}),e.jsx(we,{label:"Notice Category ",name:"category",value:u.category,onChange:P})]}),e.jsxs(m,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(k,{onClick:N!==null?te:Z,className:"rounded-[25px]",disabled:!X,children:N!==null?"Update Notice Category ":"Add Notice Category "}),e.jsx(k,{variant:"secondary",onClick:()=>g(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(m,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(m,{ml:2,children:e.jsx(A,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Notice Category Master"})}),e.jsxs(k,{onClick:()=>{C({id:"",category:"",notice_type_id:""}),T(null),g(!0)},children:[e.jsx(fe,{}),"Add New Notice Category "]})]}),e.jsx(Ne,{clickHandler:ne,data:Q,columns:de,rowCount:J,pageIndex:l,pageSize:n,onPaginationChange:({pageIndex:t,pageSize:d})=>{F(t),$(d)}})]}),e.jsx(R,{open:!!j,onClose:B,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(m,{className:"rounded-xl overflow-hidden",children:[e.jsxs(m,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(A,{className:"font-outfit",variant:"h6",children:"Notice Category Details"}),e.jsx(x,{sx:{color:"white"},onClick:B,children:e.jsx(V,{})})]}),e.jsx(U,{children:j&&e.jsx(m,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(A,{className:"font-outfit",children:[e.jsx("strong",{children:"Notice Category :"})," ",j.category]})})})]})})]})},rt=()=>e.jsx(e.Fragment,{children:e.jsx(_e,{})});export{rt as default};
