import{r as a,c as J,d as Q,av as X,j as e,B as c,aw as Y,ax as Z,ay as ee,az as te}from"./index-CNh2Ysd7.js";import{A as se}from"./Add-ONoAddvh.js";import{D as ae}from"./Delete-BKL8mfiA.js";import{V as re}from"./Visibility-CFK2wX7e.js";import{C as T}from"./Close-CSWdanUp.js";import{D as oe,E as ne}from"./DataTable-CBDiE-I1.js";import{I as N}from"./InputField-Cac7SuVh.js";import{B as D}from"./Button-D2SEshHa.js";import{T as ie}from"./ToggleSwitch-CRLgVpk1.js";import{A as I}from"./Alert-BBsTbpkb.js";import{S as V}from"./SweetAlert-DUVT9XWx.js";import{T as n}from"./Typography-DxP0RQcB.js";import{D as E,a as F}from"./Dialog-CMeqEyOr.js";import{I as u}from"./AlertTitle-BBXxFqxI.js";import{T as O}from"./Tooltip-B4POfKz-.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./DialogTitle-sP3uGIgc.js";import"./Divider-1omdH51K.js";import"./Tabs-DWd8sdsH.js";import"./skeleton-H-TAVWvB.js";const le=()=>{const[s,j]=a.useState({id:"",master_type:"",name:"",description:""}),[h,y]=a.useState(null),[S,o]=a.useState(!1),[r,g]=a.useState(null),[b,_]=a.useState(null),[i,A]=a.useState(null),[B,w]=a.useState(!1),[P,v]=a.useState(!1),[d,x]=a.useState(null),[M,f]=a.useState(""),[k,l]=a.useState(!1),p=J(),{list:W}=Q(t=>t.OtherDropdownMaster);a.useEffect(()=>{s.master_type&&p(X({master_type:s.master_type}))},[s.master_type]);const C=t=>{const{name:m,value:G}=t.target;j(H=>({...H,[m]:G}))},R=s.master_type&&s.name.trim()!=="",U=async()=>{try{await p(te({master_type:s.master_type,name:s.name,description:s.description})).unwrap(),x("success"),f("Dropdown value added successfully."),l(!0),o(!1)}catch{x("error"),f("Failed to add dropdown value."),l(!0)}},z=(t,m)=>{j({id:t._id,master_type:t.master_type,name:t.name,description:t.description||""}),y(m),o(!0)},K=async()=>{try{await p(ee({_id:s.id,name:s.name,description:s.description})).unwrap(),x("success"),f("Dropdown value updated successfully."),l(!0),o(!1),y(null)}catch{x("error"),f("Update failed."),l(!0)}},L=async()=>{b&&(await p(Y(b)),w(!1),_(null))},$=async()=>{i&&(await p(Z({_id:i._id,isActive:!i.isActive})),v(!1),A(null))},q=[{accessorKey:"name",header:"Dropdown Value"},{accessorKey:"master_type",header:"Master Type"},{header:"Actions",Cell:({row:t})=>e.jsxs(c,{display:"flex",gap:1,children:[e.jsx(O,{title:"View",children:e.jsx(u,{onClick:()=>g(t.original),children:e.jsx(re,{})})}),e.jsx(O,{title:"Edit",children:e.jsx(u,{onClick:()=>z(t.original,t.index),children:e.jsx(ne,{})})}),e.jsx(u,{color:"error",onClick:()=>{_(t.original._id),w(!0)},children:e.jsx(ae,{})}),e.jsx(ie,{checked:t.original.isActive,onChange:()=>{A(t.original),v(!0)}})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(V,{show:B,type:"error",title:"Confirm Delete",message:"Are you sure you want to delete this value?",onConfirm:L,onCancel:()=>w(!1)}),e.jsx(V,{show:P,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${i!=null&&i.isActive?"deactivate":"activate"} this value?`,onConfirm:$,onCancel:()=>v(!1)}),k&&e.jsx(I,{type:d,title:d==="success"?"Success":"Error",message:M,onClose:()=>l(!1)}),S?e.jsxs(E,{open:S,onClose:(t,m)=>{m!=="backdropClick"&&o(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px",overflow:"hidden"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(c,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(n,{className:"font-outfit",sx:{fontSize:"18px",fontWeight:600},children:h!==null?"Edit Dropdown Value":"Add Dropdown Value"}),e.jsx(u,{sx:{color:"white"},onClick:()=>o(!1),children:e.jsx(T,{})})]}),e.jsxs(F,{children:[k&&d&&e.jsx("div",{className:"mb-4",children:e.jsx(I,{type:d,title:d==="success"?"Success!":"Error!",message:M,variant:"filled",showLink:!1,onClose:()=>l(!1)})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 mb-1",children:["Master Type ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsxs("select",{name:"master_type",value:s.master_type,onChange:C,disabled:h!==null,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Master Type"}),e.jsx("option",{value:"relation_type",children:"Relation Type"}),e.jsx("option",{value:"payment_method",children:"Payment Method"}),e.jsx("option",{value:"unit_type",children:"Unit Type"}),e.jsx("option",{value:"vehicle_type",children:"Vehicle Type"}),e.jsx("option",{value:"occupancy_status",children:"Occupancy Status"})]})]}),e.jsx(N,{label:"Dropdown Value",name:"name",value:s.name,onChange:C}),e.jsx(N,{label:"Description",name:"description",value:s.description,onChange:C,multiline:!0,rows:3})]}),e.jsxs(c,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(D,{className:"rounded-[25px]",disabled:!R,onClick:h!==null?K:U,children:h!==null?"Update Dropdown Value":"Add Dropdown Value"}),e.jsx(D,{variant:"secondary",className:"rounded-[25px]",onClick:()=>o(!1),children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(c,{display:"flex",justifyContent:"space-between",mb:2,children:[e.jsx(n,{variant:"h5",className:"font-outfit",children:"Other Dropdown Master"}),e.jsxs(D,{onClick:()=>{j({id:"",master_type:"",name:"",description:""}),o(!0),y(null)},children:[e.jsx(se,{})," Add New"]})]}),e.jsx(oe,{data:W,columns:q})]}),e.jsxs(E,{open:!!r,onClose:()=>g(null),maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px",overflow:"hidden"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(c,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(n,{className:"font-outfit",sx:{fontSize:"18px",fontWeight:600},children:"Dropdown Details"}),e.jsx(u,{sx:{color:"white"},onClick:()=>g(null),children:e.jsx(T,{})})]}),e.jsx(F,{children:r&&e.jsxs(c,{display:"flex",flexDirection:"column",gap:2,p:2,children:[e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Dropdown Name:"})," ",r.name]}),e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Master Type:"})," ",r.master_type]}),e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Description:"})," ",r.description&&r.description.trim()!==""?r.description:"-"]}),e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:r.isActive?"#16a34a":"#dc2626",fontWeight:600},children:r.isActive?"Active":"Inactive"})]})]})})]})]})},We=()=>e.jsx(e.Fragment,{children:e.jsx(le,{})});export{We as default};
