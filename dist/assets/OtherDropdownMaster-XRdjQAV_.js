import{r,c as J,d as Q,av as X,j as e,B as c,aw as Y,ax as Z,ay as ee,az as te}from"./index-N8t8oMzR.js";import{A as se}from"./Add-BUtQdix6.js";import{D as re}from"./Delete-07TAjR17.js";import{V as oe}from"./Visibility-CgGAKN6P.js";import{C as I}from"./Close-CwR_quIe.js";import{D as ae,E as ne}from"./DataTable-BqUD-dAi.js";import{I as ie}from"./Info-lyeC1xGk.js";import{I as N}from"./InputField-riaj6edy.js";import{B as D}from"./Button-CBNcrDpD.js";import{T as le}from"./ToggleSwitch-DR4b514_.js";import{A as V}from"./Alert-CgNUKTJk.js";import{S as E}from"./SweetAlert-vzLgp13W.js";import{T as n}from"./Typography-CKlLxaDL.js";import{T as S}from"./Tooltip-CwyNn424.js";import{D as F,a as O}from"./Dialog-BGF2t3L7.js";import{I as u}from"./AlertTitle-D9ejxV9_.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./useSlotProps-CaIca8GW.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./DialogTitle-D6DEKDqS.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";const ce=()=>{const[s,j]=r.useState({id:"",master_type:"",name:"",description:""}),[h,y]=r.useState(null),[b,a]=r.useState(!1),[o,g]=r.useState(null),[_,A]=r.useState(null),[i,M]=r.useState(null),[P,w]=r.useState(!1),[B,v]=r.useState(!1),[d,x]=r.useState(null),[T,f]=r.useState(""),[k,l]=r.useState(!1),p=J(),{list:W}=Q(t=>t.OtherDropdownMaster);r.useEffect(()=>{s.master_type&&p(X({master_type:s.master_type}))},[s.master_type]);const C=t=>{const{name:m,value:G}=t.target;j(H=>({...H,[m]:G}))},R=s.master_type&&s.name.trim()!=="",U=async()=>{try{await p(te({master_type:s.master_type,name:s.name,description:s.description})).unwrap(),x("success"),f("Dropdown value added successfully."),l(!0),a(!1)}catch{x("error"),f("Failed to add dropdown value."),l(!0)}},z=(t,m)=>{j({id:t._id,master_type:t.master_type,name:t.name,description:t.description||""}),y(m),a(!0)},K=async()=>{try{await p(ee({_id:s.id,name:s.name,description:s.description})).unwrap(),x("success"),f("Dropdown value updated successfully."),l(!0),a(!1),y(null)}catch{x("error"),f("Update failed."),l(!0)}},L=async()=>{_&&(await p(Y(_)),w(!1),A(null))},$=async()=>{i&&(await p(Z({_id:i._id,isActive:!i.isActive})),v(!1),M(null))},q=[{accessorKey:"name",header:"Dropdown Value"},{accessorKey:"master_type",header:"Master Type"},{header:"Actions",Cell:({row:t})=>e.jsxs(c,{display:"flex",gap:1,children:[e.jsx(S,{title:"View",children:e.jsx(u,{onClick:()=>g(t.original),children:e.jsx(oe,{})})}),e.jsx(S,{title:"Edit",children:e.jsx(u,{onClick:()=>z(t.original,t.index),children:e.jsx(ne,{})})}),e.jsx(u,{color:"error",onClick:()=>{A(t.original._id),w(!0)},children:e.jsx(re,{})}),e.jsx(le,{checked:t.original.isActive,onChange:()=>{M(t.original),v(!0)}})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(E,{show:P,type:"error",title:"Confirm Delete",message:"Are you sure you want to delete this value?",onConfirm:L,onCancel:()=>w(!1)}),e.jsx(E,{show:B,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${i!=null&&i.isActive?"deactivate":"activate"} this value?`,onConfirm:$,onCancel:()=>v(!1)}),k&&e.jsx(V,{type:d,title:d==="success"?"Success":"Error",message:T,onClose:()=>l(!1)}),b?e.jsxs(F,{open:b,onClose:(t,m)=>{m!=="backdropClick"&&a(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px",overflow:"hidden"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(c,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(n,{className:"font-outfit",sx:{fontSize:"18px",fontWeight:600},children:h!==null?"Edit Dropdown Value":"Add Dropdown Value"}),e.jsx(u,{sx:{color:"white"},onClick:()=>a(!1),children:e.jsx(I,{})})]}),e.jsxs(O,{children:[k&&d&&e.jsx("div",{className:"mb-4",children:e.jsx(V,{type:d,title:d==="success"?"Success!":"Error!",message:T,variant:"filled",showLink:!1,onClose:()=>l(!1)})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 mb-1",children:["Master Type ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsxs("select",{name:"master_type",value:s.master_type,onChange:C,disabled:h!==null,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Master Type"}),e.jsx("option",{value:"relation_type",children:"Relation Type"}),e.jsx("option",{value:"payment_method",children:"Payment Method"}),e.jsx("option",{value:"unit_type",children:"Unit Type"}),e.jsx("option",{value:"vehicle_type",children:"Vehicle Type"}),e.jsx("option",{value:"occupancy_status",children:"Occupancy Status"})]})]}),e.jsx(N,{label:"Dropdown Value",name:"name",value:s.name,onChange:C}),e.jsx(N,{label:"Description",name:"description",value:s.description,onChange:C,multiline:!0,rows:3})]}),e.jsxs(c,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(D,{className:"rounded-[25px]",disabled:!R,onClick:h!==null?K:U,children:h!==null?"Update Dropdown Value":"Add Dropdown Value"}),e.jsx(D,{variant:"secondary",className:"rounded-[25px]",onClick:()=>a(!1),children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(n,{variant:"h5",className:"font-outfit",children:["Other Dropdown Master",e.jsx(S,{title:"Relation Types, Payment Methods, Unit Types, etc.",arrow:!0,children:e.jsx(ie,{sx:{color:"#245492",ml:1}})})]}),e.jsxs(D,{onClick:()=>{j({id:"",master_type:"",name:"",description:""}),a(!0),y(null)},children:[e.jsx(se,{})," Add New Master"]})]}),e.jsx(ae,{data:W,columns:q})]}),e.jsxs(F,{open:!!o,onClose:()=>g(null),maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px",overflow:"hidden"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(c,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(n,{className:"font-outfit",sx:{fontSize:"18px",fontWeight:600},children:"Dropdown Details"}),e.jsx(u,{sx:{color:"white"},onClick:()=>g(null),children:e.jsx(I,{})})]}),e.jsx(O,{children:o&&e.jsxs(c,{display:"flex",flexDirection:"column",gap:2,p:2,children:[e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Dropdown Name:"})," ",o.name]}),e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Master Type:"})," ",o.master_type]}),e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Description:"})," ",o.description&&o.description.trim()!==""?o.description:"-"]}),e.jsxs(n,{className:"font-outfit",children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:o.isActive?"#16a34a":"#dc2626",fontWeight:600},children:o.isActive?"Active":"Inactive"})]})]})})]})]})},Ue=()=>e.jsx(e.Fragment,{children:e.jsx(ce,{})});export{Ue as default};
