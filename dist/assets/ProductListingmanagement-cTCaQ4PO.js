import{r as i,c as Ae,d as x,eW as Ye,eX as at,eY as ot,eZ as dt,e_ as mt,e$ as ut,f0 as pt,f1 as it,j as e,B as h,f2 as ht,f3 as K,f4 as Ge,dL as de,f5 as xt,f6 as ft,f7 as gt,f8 as jt,f9 as rt,fa as lt,fb as yt,fc as _t,fd as Je,fe as bt,ff as vt,fg as Nt,fh as Ct,fi as Qe,fj as kt,dH as wt,a as St,E as Tt,fk as It,fl as Pt}from"./index-CNh2Ysd7.js";import{V as Ce}from"./Visibility-CFK2wX7e.js";import{D as ke}from"./Delete-BKL8mfiA.js";import{T as Re,a as He,e as ze,c as je,d as N,b as Ue,E as we,D as et}from"./DataTable-CBDiE-I1.js";import{I as Dt}from"./Info-BLOe8JuO.js";import{T as tt}from"./ToggleSwitch-CRLgVpk1.js";import{S as st}from"./SweetAlert-DUVT9XWx.js";import{A as Be}from"./Alert-BBsTbpkb.js";import{C as We}from"./Close-CSWdanUp.js";import{I as oe}from"./InputField-Cac7SuVh.js";import{B as z}from"./Button-D2SEshHa.js";import{S as C}from"./skeleton-H-TAVWvB.js";import{F as $e}from"./FileInput-Dq-H8wev.js";import{T as Fe}from"./Typography-DxP0RQcB.js";import{I as k,P as Xe}from"./AlertTitle-BBXxFqxI.js";import{T as Ze,a as ye}from"./Tabs-DWd8sdsH.js";import{T as F}from"./Tooltip-B4POfKz-.js";import{T as At}from"./TextArea-DupqjNb0.js";import{C as De}from"./Chip--RBU-Z22.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./Dialog-CMeqEyOr.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./DialogTitle-sP3uGIgc.js";import"./Divider-1omdH51K.js";import"./AddPhotoAlternate-DoEGX89n.js";const Bt=({onCancel:q,editData:ue,isEditMode:pe=!1})=>{var H;const[O,Z]=i.useState(0),[a,S]=i.useState({...ue}),[G,j]=i.useState(""),[_,c]=i.useState(null),[ae,o]=i.useState(!1),[_e,w]=i.useState(""),[A,Y]=i.useState(null),[he,J]=i.useState(null),[T,B]=i.useState(null),[Q,Me]=i.useState("car"),[xe,U]=i.useState(!0),[ee,M]=i.useState(!1);i.useEffect(()=>{const t=setTimeout(()=>U(!1),1e3);return()=>clearTimeout(t)},[]),i.useRef(null);const u=Ae(),{CarBrandMaster:v}=x(t=>t.CarBrandMaster),{CarNameMaster:R}=x(t=>t.CarNameMaster),{CarFueltypeMaster:I}=x(t=>t.CarFueltypeMaster),{CarYearMaster:W}=x(t=>t.CarYearMaster),{CarColorMaster:te}=x(t=>t.CarColorMaster),{CarOwnershipMaster:se}=x(t=>t.CarOwnershipMaster),{CarTransmission:y}=x(t=>t.CarTransmission),{CityMaster:P}=x(t=>t.CityMaster);i.useEffect(()=>{u(Ye({})),u(at({})),u(ot({})),u(dt({})),u(mt({})),u(ut({})),u(pt({})),u(it({}))},[u]);const ie=(t,p)=>Z(p),d=t=>{const{name:p,value:m}=t.target;S(E=>({...E,[p]:m}))},re=async t=>{if(t.preventDefault(),!ee){M(!0);try{await u(ht({_id:a._id,...a})).unwrap(),c("success"),j("Car details updated successfully."),o(!0),setTimeout(()=>{o(!1),q(),u(K({search:"",page:0,limit:10,type:Q}))},3e3)}catch(p){c("error"),j(p.message||"Failed to update"),o(!0),setTimeout(()=>o(!1),3e3)}finally{M(!1)}}},le=t=>window.open(t,"_blank"),g=async t=>{try{await u(Ge({carId:a._id,mode:"remove",remove_image_ids:[t]})).unwrap();const p=await u(de({_id:a._id,type:a.type})).unwrap();S(m=>({...m,car_images:p.images||[]})),c("success"),j("Image deleted successfully"),o(!0)}catch(p){console.error("Delete failed:",p),c("error"),j("Failed to delete image"),o(!0)}},D=t=>{Y(t._id),J(t.sequence),B(null)},$=async()=>{if(!(!A||!T))try{const t=a.car_images.find(m=>m._id===A);await u(Ge({carId:a._id,file:T,mode:"update_at_sequence",sequence:t==null?void 0:t.sequence})).unwrap();const p=await u(de({_id:a._id,type:a.type})).unwrap();S(m=>({...m,car_images:p.images||[]})),Y(null),B(null),J(null),c("success"),j("Image updated successfully"),o(!0)}catch{c("error"),j("Failed to update image"),o(!0)}},X=()=>e.jsxs("div",{className:"max-w-8xl mx-auto rounded-xl shadow-md bg-white mb-6 p-6",children:[e.jsx(C,{height:60,width:"100%",className:"mb-4"}),e.jsx(C,{height:40,width:"100%",className:"mb-4"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:Array.from({length:10}).map((t,p)=>e.jsx(C,{height:56},p))}),e.jsx(C,{height:120,className:"mb-6"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(C,{height:40,width:100}),e.jsx(C,{height:40,width:100})]})]});return xe?e.jsx(X,{}):e.jsxs(e.Fragment,{children:[ae&&_&&e.jsx("div",{className:"p-4",children:e.jsx(Be,{type:_,title:_==="success"?"Success!":"Error!",message:G,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>o(!1)})}),e.jsxs(h,{className:"max-w-8xl mx-auto rounded-xl shadow-md mb-6",sx:{backgroundColor:"white"},children:[e.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRightRadius:12,color:"white"},children:[e.jsx(Fe,{className:"font-outfit",variant:"h6",children:pe?"Update Car Listing":"Add New Car"}),e.jsx(k,{sx:{color:"white"},onClick:q,children:e.jsx(We,{})})]}),e.jsxs(Ze,{value:O,onChange:ie,variant:"fullWidth",children:[e.jsx(ye,{label:"Car Details",className:"font-outfit"}),e.jsx(ye,{label:"Car Images",className:"font-outfit"})]}),e.jsxs(h,{component:"form",onSubmit:re,px:6,py:4,children:[O===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Car Brand ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"brand_id",value:a.brand_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Car Brand"}),v==null?void 0:v.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.car_brand_name},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Car Name ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"car_id",value:a.car_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Car Name"}),R==null?void 0:R.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.car_name},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Fuel Type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"fuel_type_id",value:a.fuel_type_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Fuel Type"}),I==null?void 0:I.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.fueltype},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Car Color ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"color_id",value:a.color_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Car Color"}),te==null?void 0:te.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.color_name},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Car Transmission ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"transmission_id",value:a.transmission_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Car Transmission"}),y==null?void 0:y.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.car_transmission},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Ownership type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"ownership_id",value:a.ownership_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Ownership"}),se==null?void 0:se.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.ownership},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["City ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"city_id",value:a.city_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select City"}),P==null?void 0:P.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.city_name},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Car Year ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"year_id",value:a.year_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Car Year"}),W==null?void 0:W.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.year},t._id))]})]}),e.jsx(oe,{label:"Model Name",name:"model_name",value:a.model_name,onChange:d}),e.jsx(oe,{label:"Kilometers Driven",name:"kilometers_driven",value:a.kilometers_driven,onChange:d}),e.jsx(oe,{label:"Price",name:"price",value:a.price,onChange:d})]}),e.jsx(h,{width:"100%",mt:3,children:e.jsxs(h,{display:"flex",justifyContent:"center",gap:2,flexDirection:"row",children:[e.jsx(z,{className:"font-outfit",disabled:ee,children:ee?"Updating...":"Update"}),e.jsx(z,{className:"font-outfit",variant:"secondary",onClick:q,children:"Cancel"})]})})]}),O===1&&e.jsx(e.Fragment,{children:e.jsx(Re,{component:Xe,children:e.jsxs(He,{className:"border border-gray-300",children:[e.jsx(ze,{children:e.jsxs(je,{className:"border border-gray-300",children:[e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Sequence ID"}),e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Preview"}),e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Actions"})]})}),e.jsx(Ue,{children:(H=a.car_images)==null?void 0:H.map(t=>e.jsxs(je,{className:"border border-gray-300",children:[e.jsx(N,{align:"center",className:"border border-gray-300",children:t.sequence}),e.jsx(N,{align:"center",className:"border border-gray-300",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:t.url,alt:"Preview",className:"h-28 w-56 object-cover rounded"})})}),e.jsx(N,{align:"center",className:"border border-gray-300",children:A===t._id?e.jsxs(h,{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:"center",children:[e.jsx("input",{type:"hidden",name:"sequence",value:he??t.sequence}),e.jsxs(h,{display:"flex",flexDirection:"column",alignItems:"center",gap:1,children:[e.jsx($e,{id:`file-input-${t._id}`,name:"updatedImage",iconOnly:!1,onChange:p=>{var E;const m=(E=p.target.files)==null?void 0:E[0];m&&B(m)}}),e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(z,{disabled:!T,className:"font-outfit",size:"sm",onClick:$,children:"Save"}),e.jsx(z,{className:"font-outfit",size:"sm",variant:"secondary",onClick:()=>Y(null),children:"Cancel"})]})]})]}):e.jsxs(h,{display:"flex",alignItems:"center",gap:1,justifyContent:"center",children:[e.jsx(F,{title:"View",children:e.jsx(k,{color:"primary",onClick:()=>le(t.url),children:e.jsx(Ce,{})})}),e.jsx(F,{title:"Edit",children:e.jsx(k,{color:"secondary",onClick:()=>D(t),children:e.jsx(we,{})})}),e.jsx(F,{title:"Delete",children:e.jsx(k,{color:"error",onClick:()=>g(t._id),children:e.jsx(ke,{})})})]})})]},t._id))})]})})})]})]})]})},Ft=({onCancel:q,editData:ue,isEditMode:pe=!1})=>{var H;const[O,Z]=i.useState(0),[a,S]=i.useState({...ue}),[G,j]=i.useState(""),[_,c]=i.useState(null),[ae,o]=i.useState(!1),[_e,w]=i.useState(""),[A,Y]=i.useState(null),[he,J]=i.useState(null),[T,B]=i.useState(null),[Q,Me]=i.useState("bike"),[xe,U]=i.useState(!0),[ee,M]=i.useState(!1);i.useEffect(()=>{const t=setTimeout(()=>U(!1),1e3);return()=>clearTimeout(t)},[]),i.useRef(null);const u=Ae(),{BikeBrandMaster:v}=x(t=>t.BikeBrandMaster),{BikeNameMaster:R}=x(t=>t.BikeNameMaster),{BikeFueltypeMaster:I}=x(t=>t.BikeFueltypeMaster),{BikeYearMaster:W}=x(t=>t.BikeYearMaster),{BikeColorMaster:te}=x(t=>t.BikeColorMaster),{BikeOwnershipMaster:se}=x(t=>t.BikeOwnershipMaster),{CityMaster:y}=x(t=>t.CityMaster),{BikeTypeMaster:P}=x(t=>t.BikeTypeMaster);i.useEffect(()=>{u(Ye({})),u(xt({})),u(ft({})),u(gt({})),u(jt({})),u(rt({})),u(lt({})),u(yt({}))},[u]);const ie=(t,p)=>Z(p),d=t=>{const{name:p,value:m}=t.target;S(E=>({...E,[p]:m}))},re=async t=>{if(t.preventDefault(),!ee){M(!0);try{await u(_t({_id:a._id,...a})).unwrap(),c("success"),j("Bike details updated successfully."),o(!0),setTimeout(()=>{o(!1),q(),u(K({search:"",page:0,limit:10,type:Q}))},3e3)}catch(p){c("error"),j(p.message||"Failed to update"),o(!0),setTimeout(()=>o(!1),3e3)}finally{M(!1)}}},le=t=>window.open(t,"_blank"),g=async t=>{try{await u(Je({bikeId:a._id,mode:"remove",remove_image_ids:[t]})).unwrap();const p=await u(de({_id:a._id,type:a.type})).unwrap();S(m=>({...m,bike_images:p.images||[]})),c("success"),j("Image deleted successfully"),o(!0)}catch(p){console.error("Delete failed:",p),c("error"),j("Failed to delete image"),o(!0)}},D=t=>{Y(t._id),J(t.sequence),B(null)},$=async()=>{if(!(!A||!T))try{const t=a.bike_images.find(m=>m._id===A);await u(Je({bikeId:a._id,file:T,mode:"update_at_sequence",sequence:t==null?void 0:t.sequence})).unwrap();const p=await u(de({_id:a._id,type:a.type})).unwrap();S(m=>({...m,bike_images:p.images||[]})),Y(null),B(null),J(null),c("success"),j("Image updated successfully"),o(!0)}catch{c("error"),j("Failed to update image"),o(!0)}},X=()=>e.jsxs("div",{className:"max-w-8xl mx-auto rounded-xl shadow-md bg-white mb-6 p-6",children:[e.jsx(C,{height:60,width:"100%",className:"mb-4"}),e.jsx(C,{height:40,width:"100%",className:"mb-4"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:Array.from({length:10}).map((t,p)=>e.jsx(C,{height:56},p))}),e.jsx(C,{height:120,className:"mb-6"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(C,{height:40,width:100}),e.jsx(C,{height:40,width:100})]})]});return xe?e.jsx(X,{}):e.jsxs(e.Fragment,{children:[ae&&_&&e.jsx("div",{className:"p-4",children:e.jsx(Be,{type:_,title:_==="success"?"Success!":"Error!",message:G,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>o(!1)})}),e.jsxs(h,{className:"max-w-8xl mx-auto rounded-xl shadow-md mb-6",sx:{backgroundColor:"white"},children:[e.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRightRadius:12,color:"white"},children:[e.jsx(Fe,{className:"font-outfit",variant:"h6",children:pe?"Update Bike Listing":"Add New Bike"}),e.jsx(k,{sx:{color:"white"},onClick:q,children:e.jsx(We,{})})]}),e.jsxs(Ze,{value:O,onChange:ie,variant:"fullWidth",children:[e.jsx(ye,{label:"Bike Details",className:"font-outfit"}),e.jsx(ye,{label:"Bike Images",className:"font-outfit"})]}),e.jsxs(h,{component:"form",onSubmit:re,px:6,py:4,children:[O===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white block",children:["Bike Type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"bike_type_id",value:a.bike_type_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Type"}),P==null?void 0:P.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.bike_type},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white block",children:["Bike Brand ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"brand_id",value:a.brand_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Brand"}),v==null?void 0:v.filter(t=>t.isActive&&(!a.bike_type_id||t.bike_type_id===a.bike_type_id)).map(t=>e.jsx("option",{value:t._id,children:t.brand},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white block",children:["Bike Name ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"bike_id",value:a.bike_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Name"}),R==null?void 0:R.filter(t=>t.isActive&&(!a.bike_type_id||t.bike_type_id===a.bike_type_id)&&(!a.brand_id||t.bike_brand_id===a.brand_id)).map(t=>e.jsx("option",{value:t._id,children:t.bikename},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Fuel Type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"fuel_type_id",value:a.fuel_type_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Fuel Type"}),I==null?void 0:I.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.fueltype},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Bike Color ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"color_id",value:a.color_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Color"}),te==null?void 0:te.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.bike_color_name},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Ownership type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"ownership_id",value:a.ownership_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Ownership"}),se==null?void 0:se.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.ownership},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["City ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"city_id",value:a.city_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select City"}),y==null?void 0:y.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.city_name},t._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Bike Year ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"year_id",value:a.year_id,onChange:d,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Year"}),W==null?void 0:W.filter(t=>t.isActive).map(t=>e.jsx("option",{value:t._id,children:t.year},t._id))]})]}),e.jsx(oe,{label:"Model Name",name:"model_name",value:a.model_name,onChange:d}),e.jsx(oe,{label:"Kilometers Driven",name:"kilometers_driven",value:a.kilometers_driven,onChange:d}),e.jsx(oe,{label:"Price",name:"price",value:a.price,onChange:d})]}),e.jsx(h,{width:"100%",mt:3,children:e.jsxs(h,{display:"flex",justifyContent:"center",gap:2,flexDirection:"row",children:[e.jsx(z,{className:"font-outfit",disabled:ee,children:ee?"Updating...":"Update"}),e.jsx(z,{className:"font-outfit",variant:"secondary",onClick:q,children:"Cancel"})]})})]}),O===1&&e.jsx(e.Fragment,{children:e.jsx(Re,{component:Xe,children:e.jsxs(He,{className:"border border-gray-300",children:[e.jsx(ze,{children:e.jsxs(je,{className:"border border-gray-300",children:[e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Sequence ID"}),e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Preview"}),e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Actions"})]})}),e.jsx(Ue,{children:(H=a.bike_images)==null?void 0:H.map(t=>e.jsxs(je,{className:"border border-gray-300",children:[e.jsx(N,{align:"center",className:"border border-gray-300",children:t.sequence}),e.jsx(N,{align:"center",className:"border border-gray-300",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:t.url,alt:"Preview",className:"h-28 w-56 object-cover rounded"})})}),e.jsx(N,{align:"center",className:"border border-gray-300",children:A===t._id?e.jsxs(h,{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:"center",children:[e.jsx("input",{type:"hidden",name:"sequence",value:he??t.sequence}),e.jsxs(h,{display:"flex",flexDirection:"column",alignItems:"center",gap:1,children:[e.jsx($e,{id:`file-input-${t._id}`,name:"updatedImage",iconOnly:!1,onChange:p=>{var E;const m=(E=p.target.files)==null?void 0:E[0];m&&B(m)}}),e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(z,{disabled:!T,className:"font-outfit",size:"sm",onClick:$,children:"Save"}),e.jsx(z,{className:"font-outfit",size:"sm",variant:"secondary",onClick:()=>Y(null),children:"Cancel"})]})]})]}):e.jsxs(h,{display:"flex",alignItems:"center",gap:1,justifyContent:"center",children:[e.jsx(F,{title:"View",children:e.jsx(k,{color:"primary",onClick:()=>le(t.url),children:e.jsx(Ce,{})})}),e.jsx(F,{title:"Edit",children:e.jsx(k,{color:"secondary",onClick:()=>D(t),children:e.jsx(we,{})})}),e.jsx(F,{title:"Delete",children:e.jsx(k,{color:"error",onClick:()=>g(t._id),children:e.jsx(ke,{})})})]})})]},t._id))})]})})})]})]})]})},Mt=({onCancel:q,editData:ue,isEditMode:pe=!1})=>{var f;const[O,Z]=i.useState(0),[a,S]=i.useState({...ue}),[G,j]=i.useState(""),[_,c]=i.useState(null),[ae,o]=i.useState(!1),[_e,w]=i.useState(""),[A,Y]=i.useState(null),[he,J]=i.useState(null),[T,B]=i.useState(null),[Q,Me]=i.useState("sparepart"),[xe,U]=i.useState(""),[ee,M]=i.useState(0),[u,v]=i.useState(10),[R,I]=i.useState(""),[W,te]=i.useState(""),[se,y]=i.useState(!0),[P,ie]=i.useState(!1);i.useEffect(()=>{const s=setTimeout(()=>y(!1),1e3);return()=>clearTimeout(s)},[]),i.useRef(null);const d=Ae(),{CarNameMaster:re}=x(s=>s.CarNameMaster),{CarBrandMaster:le}=x(s=>s.CarBrandMaster),{producttypeMaster:g}=x(s=>s.ProducttypeMaster),{subproducttypeMaster:D}=x(s=>s.ProducttypeMaster),{ConditionMaster:$}=x(s=>s.ConditionMaster),{YearofManufactureMaster:X}=x(s=>s.YearofManufactureMaster),{BikeBrandMaster:H}=x(s=>s.BikeBrandMaster),{BikeNameMaster:t}=x(s=>s.BikeNameMaster),{BikeFueltypeMaster:p}=x(s=>s.BikeFueltypeMaster),{CityMaster:m}=x(s=>s.CityMaster),{BikeYearMaster:E}=x(s=>s.BikeYearMaster),{BikeColorMaster:Ee}=x(s=>s.BikeColorMaster),{BikeOwnershipMaster:nt}=x(s=>s.BikeOwnershipMaster),{BikeTypeMaster:ct}=x(s=>s.BikeTypeMaster);i.useEffect(()=>{d(bt({})),d(vt({})),d(at({})),d(Nt({})),d(Ct({})),d(it({})),d(rt({})),d(lt({})),d(Ye({}))},[d]);const be=g==null?void 0:g.find(s=>s._id===a.product_type_id),ne=be==null?void 0:be.product_type,fe=D==null?void 0:D.find(s=>s._id===a.subproduct_type_id),ce=fe==null?void 0:fe.subproduct_type,ve=a.brand_id,Ne=a.brand_id,Se=ne==="Bike",Ve=ne==="Car",Te=a.product_type_id,ge=g==null?void 0:g.find(s=>s._id===Te);ge==null||ge.product_type;const Le=(s,b)=>Z(b),V=s=>{const{name:b,value:L}=s.target;S(me=>({...me,[b]:L}))},Ie=s=>{S(b=>({...b,description:s.target.value}))},Pe=async s=>{var me;if(s.preventDefault(),P)return;ie(!0);const b={...a},L=(me=g==null?void 0:g.find(Oe=>Oe._id===a.product_type_id))==null?void 0:me.product_type;L==="Car"&&a.car_id?b.model_id=a.car_id:L==="Bike"&&a.bike_id&&(b.model_id=a.bike_id);try{await d(Qe({_id:a._id,...b})).unwrap(),c("success"),j("Spare part details updated successfully."),o(!0),setTimeout(()=>{o(!1),q(),d(K({fromDate:R,toDate:W,type:Q,search:xe}))},3e3)}catch(Oe){c("error"),j(Oe.message||"Failed to update"),o(!0),setTimeout(()=>o(!1),3e3)}finally{ie(!1)}},Ke=s=>window.open(s,"_blank"),qe=async s=>{try{await d(Qe({sparesId:a._id,mode:"remove",remove_image_ids:[s]})).unwrap();const b=await d(de({_id:a._id,type:a.type})).unwrap();S(L=>({...L,spares_images:b.images||[]})),c("success"),j("Image deleted successfully"),o(!0)}catch(b){console.error("Delete failed:",b),c("error"),j("Failed to delete image"),o(!0)}},r=s=>{Y(s._id),J(s.sequence),B(null)},n=async()=>{if(!(!A||!T))try{const s=a.spares_images.find(L=>L._id===A);await d(kt({sparesId:a._id,file:T,mode:"update_at_sequence",sequence:s==null?void 0:s.sequence})).unwrap();const b=await d(de({_id:a._id,type:a.type})).unwrap();S(L=>({...L,spares_images:b.images||[]})),Y(null),B(null),J(null),c("success"),j("Image updated successfully"),o(!0)}catch{c("error"),j("Failed to update image"),o(!0)}},l=()=>e.jsxs("div",{className:"max-w-8xl mx-auto rounded-xl shadow-md bg-white mb-6 p-6",children:[e.jsx(C,{height:60,width:"100%",className:"mb-4"}),e.jsx(C,{height:40,width:"100%",className:"mb-4"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:Array.from({length:10}).map((s,b)=>e.jsx(C,{height:56},b))}),e.jsx(C,{height:120,className:"mb-6"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(C,{height:40,width:100}),e.jsx(C,{height:40,width:100})]})]});return se?e.jsx(l,{}):e.jsxs(e.Fragment,{children:[ae&&_&&e.jsx("div",{className:"p-4",children:e.jsx(Be,{type:_,title:_==="success"?"Success!":"Error!",message:G,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>o(!1)})}),e.jsxs(h,{className:"max-w-8xl mx-auto rounded-xl shadow-md mb-6",sx:{backgroundColor:"white"},children:[e.jsxs(h,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRightRadius:12,color:"white"},children:[e.jsx(Fe,{className:"font-outfit",variant:"h6",children:pe?"Update Spare part Listing":"Add New Spare part Listing"}),e.jsx(k,{sx:{color:"white"},onClick:q,children:e.jsx(We,{})})]}),e.jsxs(Ze,{value:O,onChange:Le,variant:"fullWidth",children:[e.jsx(ye,{label:"Spare part Details",className:"font-outfit"}),e.jsx(ye,{label:"Spare part Images",className:"font-outfit"})]}),e.jsxs(h,{component:"form",onSubmit:Pe,px:6,py:4,children:[O===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Product Type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"product_type_id",value:a.product_type_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select product type"}),g==null?void 0:g.filter(s=>s.isActive).map(s=>e.jsx("option",{value:s._id,children:s.product_type},s._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Sub Product Type ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"subproduct_type_id",value:a.subproduct_type_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select subproduct type"}),D==null?void 0:D.filter(s=>s.isActive&&s.product_type_id===Te).map(s=>e.jsx("option",{value:s._id,children:s.subproduct_type},s._id))]})]}),Ve&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Car Brand ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"brand_id",value:a.brand_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Brand"}),le==null?void 0:le.filter(s=>s.isActive).map(s=>e.jsx("option",{value:s._id,children:s.car_brand_name},s._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Car Name ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"car_id",value:a.car_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Car Name"}),re==null?void 0:re.filter(s=>s.isActive&&(!ve||s.car_brand_id===ve)).map(s=>e.jsx("option",{value:s._id,children:s.car_name},s._id))]})]})]}),Se&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Bike Brand ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"brand_id",value:a.brand_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Brand"}),H==null?void 0:H.filter(s=>s.isActive&&(!ce||s.bike_type_name===ce)).map(s=>e.jsx("option",{value:s._id,children:s.brand},s._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Bike Name ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"bike_id",value:a.bike_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Bike Name"}),t==null?void 0:t.filter(s=>s.isActive&&(!ce||s.bike_type_name===ce)&&(!Ne||s.bike_brand_id===Ne)).map(s=>e.jsx("option",{value:s._id,children:s.bikename},s._id))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["City ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"city_id",value:a.city_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select City"}),m==null?void 0:m.filter(s=>s.isActive).map(s=>e.jsx("option",{value:s._id,children:s.city_name},s._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Condition ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"condition_id",value:a.condition_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Condition"}),$==null?void 0:$.filter(s=>s.isActive).map(s=>e.jsx("option",{value:s._id,children:s.condition},s._id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm text-gray-600 dark:text-white  block",children:["Year of Manufacture ",e.jsx("span",{className:"text-error-500",children:" * "})]}),e.jsxs("select",{name:"year_of_manufacture_id",value:a.year_of_manufacture_id,onChange:V,className:"mt-1 p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select year of mfg"}),X==null?void 0:X.filter(s=>s.isActive).map(s=>e.jsx("option",{value:s._id,children:s.year_of_manufacture},s._id))]})]}),e.jsx(oe,{label:"Spare Part Name",name:"sapre_name",value:a.sapre_name,onChange:V}),e.jsx(oe,{label:"Price",name:"price",value:a.price,onChange:V}),e.jsx(At,{label:"Description",name:"description",value:a.description,onChange:Ie})]}),e.jsx(h,{width:"100%",mt:3,children:e.jsxs(h,{display:"flex",justifyContent:"center",gap:2,flexDirection:"row",children:[e.jsx(z,{className:"font-outfit",disabled:P,children:P?"Updating...":"Update"}),e.jsx(z,{className:"font-outfit",variant:"secondary",onClick:q,children:"Cancel"})]})})]}),O===1&&e.jsx(e.Fragment,{children:e.jsx(Re,{component:Xe,children:e.jsxs(He,{className:"border border-gray-300",children:[e.jsx(ze,{children:e.jsxs(je,{className:"border border-gray-300",children:[e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Sequence ID"}),e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Preview"}),e.jsx(N,{align:"center",className:"font-outfit border border-gray-300",children:"Actions"})]})}),e.jsx(Ue,{children:(f=a.spares_images)==null?void 0:f.map(s=>e.jsxs(je,{className:"border border-gray-300",children:[e.jsx(N,{align:"center",className:"border border-gray-300",children:s.sequence}),e.jsx(N,{align:"center",className:"border border-gray-300",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:s.url,alt:"Preview",className:"h-28 w-56 object-cover rounded"})})}),e.jsx(N,{align:"center",className:"border border-gray-300",children:A===s._id?e.jsxs(h,{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",justifyContent:"center",children:[e.jsx("input",{type:"hidden",name:"sequence",value:he??s.sequence}),e.jsxs(h,{display:"flex",flexDirection:"column",alignItems:"center",gap:1,children:[e.jsx($e,{id:`file-input-${s._id}`,name:"updatedImage",iconOnly:!1,onChange:b=>{var me;const L=(me=b.target.files)==null?void 0:me[0];L&&B(L)}}),e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(z,{disabled:!T,className:"font-outfit",size:"sm",onClick:n,children:"Save"}),e.jsx(z,{className:"font-outfit",size:"sm",variant:"secondary",onClick:()=>Y(null),children:"Cancel"})]})]})]}):e.jsxs(h,{display:"flex",alignItems:"center",gap:1,justifyContent:"center",children:[e.jsx(F,{title:"View",children:e.jsx(k,{color:"primary",onClick:()=>Ke(s.url),children:e.jsx(Ce,{})})}),e.jsx(F,{title:"Edit",children:e.jsx(k,{color:"secondary",onClick:()=>r(s),children:e.jsx(we,{})})}),e.jsx(F,{title:"Delete",children:e.jsx(k,{color:"error",onClick:()=>qe(s._id),children:e.jsx(ke,{})})})]})})]},s._id))})]})})})]})]})]})},Et=()=>{const[q,ue]=i.useState({id:"",brand_name:"",car_name:"",city_name:"",color_name:"",fuel_type:"",kilometers_driven:"",images:[],price:"",description:"",model_name:"",ownership:"",transmission:"",year:"",user_id:{name:"",email:""}}),[pe,O]=i.useState(null),[Z,a]=i.useState("info"),[S,G]=i.useState(""),[j,_]=i.useState(!1),[c,ae]=i.useState("car"),[o,_e]=i.useState(""),[w,A]=i.useState(""),[Y,he]=i.useState(null),[J,T]=i.useState(!1),[B,Q]=i.useState(!1),[Me,xe]=i.useState(null),[U,ee]=i.useState(""),[M,u]=i.useState(0),[v,R]=i.useState(10),[I,W]=i.useState([]),[te,se]=i.useState(""),[y,P]=i.useState(null),[ie,d]=i.useState(!1),[re,le]=i.useState(!1),[g,D]=i.useState(null),[$,X]=i.useState(null),[H,t]=i.useState(!1),{carId:p}=wt(),m=Ae(),{ProductListing:E,totalItems:Ee,loading:nt}=x(r=>r.ProductLisiting),{productdetails:ct}=x(r=>r.ProductLisiting),be=St(),[ne,fe]=Tt();i.useEffect(()=>{const r=ne.get("type");(r==="car"||r==="bike"||r==="sparepart")&&r!==c&&ae(r),t(!0)},[]),i.useEffect(()=>{p&&m(de({_id:p,type:c}))},[p,m]),i.useEffect(()=>{if(!H)return;const r=setTimeout(()=>{const n={};I.forEach(({id:l,value:f})=>{f&&(["isActive","isPublished","isSold"].includes(l)?n[l]=f==="Active"||f==="Yes":l==="transmission"||l==="condition"?n[l]=f:typeof f=="string"&&f.trim()?n[l]=f.trim():n[l]=f)}),n.productName&&(c==="car"?n.car_name=n.productName:c==="bike"&&(n.bike_name=n.productName),delete n.productName),n.productid&&(c==="car"?n.carid=n.productid:c==="bike"&&(n.bikeid=n.productid),delete n.productid),m(K({type:c,fromDate:o,toDate:w,search:U,page:M,limit:v,filters:n}))},500);return()=>clearTimeout(r)},[U,M,v,c,te,H,o,w,I]);const ce=i.useRef(null),ve=r=>{W(r),u(0);const n={};r.forEach(({id:f,value:s})=>{s&&(["isActive","isPublished","isSold"].includes(f)?n[f]=s==="Active"||s==="Yes":f==="transmission"||f==="condition"?n[f]=s:typeof s=="string"&&s.trim()?n[f]=s.trim():n[f]=s)}),n.productName&&(c==="car"?n.car_name=n.productName:c==="bike"&&(n.bike_name=n.productName),delete n.productName),n.productid&&(c==="car"?n.carid=n.productid:c==="bike"&&(n.bikeid=n.productid),delete n.productid);const l={type:c,filters:n,fromDate:o,toDate:w,page:0,limit:v};ce.current&&clearTimeout(ce.current),ce.current=setTimeout(()=>{m(K(l))},500)},Ne=r=>{const l=sessionStorage.getItem("activeRole")==="staff"?"staff":"superadmin";be(`/${l}/car-details/${r._id}?type=${r.type}`)},Se=r=>{X(r),T(!0)},Ve=async()=>{if($){try{await m(It({_id:$._id,type:$.type})).unwrap(),a("error"),G("Listing deleted successfully."),_(!0),m(K({search:U,page:M,limit:v,type:c}))}catch(r){a("error"),G("Delete failed: "+r),_(!0)}setTimeout(()=>_(!1),3e3),T(!1),X(null)}},Te=()=>{T(!1),X(null)},ge=r=>{P(r),d(!0)},Le=async()=>{if(y){if(y.type!=="car"&&y.type!=="bike"&&y.type!=="sparepart"){console.warn("Toggle not supported for type:",y.type);return}try{await m(Pt({_id:y._id,isActive:!y.isActive,type:y.type})).unwrap(),a("success"),G(`Listing ${y.isActive?"deactivated":"activated"} successfully.`),_(!0),m(K({search:U,page:M,limit:v,type:c}))}catch(r){a("error"),G("Status toggle failed: "+r),_(!0)}setTimeout(()=>_(!1),3e3),d(!1),P(null)}},V=()=>{d(!1),P(null)},Ie=async(r,n)=>{ee(r),u(0),n&&await m(K({fromDate:o,toDate:w,type:c,search:r,exportType:n}))},Pe=async r=>{var n;try{const l=await m(de({_id:r._id,type:r.type})).unwrap(),f={_id:l._id,type:r.type,user_id:((n=l.user_id)==null?void 0:n._id)||l.user_id,brand_id:l.brand_id,fuel_type_id:l.fuel_type_id,year_id:l.year_id,color_id:l.color_id,ownership_id:l.ownership_id,city_id:l.city_id,model_name:l.model_name,kilometers_driven:l.kilometers_driven,price:l.price,...r.type==="car"&&{car_id:l.car_id,transmission_id:l.transmission_id,car_images:l.images||[]},...r.type==="bike"&&{bike_id:l.bike_id,bike_type_id:l.bike_type_id,bike_images:l.images||[]},...r.type==="sparepart"&&{brand_id:l.brand_id,city_id:l.city_id,sapre_name:l.sapre_name,description:l.description,year_of_manufacture_id:l.year_of_manufacture_id,price:l.price,condition_id:l.condition_id,product_type_id:l.product_type_id,subproduct_type_id:l.subproduct_type_id,spares_images:l.images||[],...l.product_type_name==="Car"&&{car_id:l.model_id},...l.product_type_name==="Bike"&&{bike_id:l.model_id}}};D(f),Q(!0)}catch(l){console.error("Failed to fetch product details:",l)}};i.useEffect(()=>{if(o&&!w||!o&&w)return;m(K({fromDate:o||void 0,toDate:w||void 0,type:c}))},[o,w]);const Ke=i.useMemo(()=>[{accessorKey:"productid",header:"Product ID",filterVariant:"text",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"brandName",id:"brand_name",header:"Car/Bike Brand",filterVariant:"text",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"productName",header:"Car/Bike Name",filterVariant:"text",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"model_name",id:"model_name",header:"Model Name",filterVariant:"text",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"year",id:"year",header:"Year",filterVariant:"text"},{accessorKey:"fuel_type",id:"fuel_type",header:"Fuel type",filterVariant:"text"},{accessorKey:"kilometersDriven",id:"kilometers_driven",header:"Kilometers driven",filterVariant:"text"},{accessorKey:"transmissionType",id:"transmission",header:"Transmission type",filterVariant:"select",filterSelectOptions:["Automatic","Manual"]},{accessorKey:"ownership",header:"Ownership Type",Cell:({cell:r})=>r.getValue()||"-",filterVariant:"select",filterSelectOptions:["1st Owner","2nd Owner","3rd Owner","above 3rd Owner"]},{accessorKey:"city_name",id:"city_name",header:"City",filterVariant:"text"},{accessorKey:"color_name",id:"color_name",header:"Color",filterVariant:"text"},{accessorKey:"isPublished",header:"Published",Cell:({cell:r})=>r.getValue(),filterVariant:"select",filterSelectOptions:["Yes","No"]},{accessorKey:"isSold",header:"Sold",Cell:({cell:r})=>r.getValue(),filterVariant:"select",filterSelectOptions:["Yes","No"]},{accessorKey:"dealerName",id:"user_id.name",header:"Dealer Name",filterVariant:"text"},{accessorKey:"totalViews",header:"Views",filterVariant:"text",Cell:({cell:r})=>e.jsx(h,{display:"flex",justifyContent:"start",children:e.jsx(De,{className:"font-outfit",label:r.getValue(),color:"primary",size:"medium",sx:{fontWeight:500}})})},{accessorKey:"leadCount",header:"Leads",filterVariant:"text",Cell:({cell:r})=>e.jsx(h,{display:"flex",justifyContent:"start",children:e.jsx(De,{className:"font-outfit",label:r.getValue(),color:"warning",size:"medium",sx:{fontWeight:500}})})},{accessorKey:"listingDate",header:"Listing Date",Cell:({row:r})=>new Date(r.original.listingDate).toLocaleDateString("en-IN")},{accessorKey:"lisitngStatus",header:"Listing Status",Cell:({cell:r})=>r.getValue(),filterVariant:"select",filterSelectOptions:["Active","Inactive"]},{header:"Actions",Cell:({row:r})=>{var n;return e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(F,{title:"View Details",children:e.jsx(k,{color:"primary",onClick:()=>Ne(r.original),children:e.jsx(Ce,{})})}),e.jsx(F,{title:"Edit",children:e.jsx(k,{color:"secondary",onClick:()=>Pe(r.original),children:e.jsx(we,{})})}),e.jsx(k,{color:"error",onClick:()=>Se(r.original),children:e.jsx(ke,{})}),e.jsx(tt,{checked:r.original.isActive,onChange:()=>ge(r.original),tooltipTitle:r.original.isActive?"Deactivate":"Activate",disabled:((n=r==null?void 0:r.original)==null?void 0:n.isPublished)=="No"})]})}}],[c]),qe=i.useMemo(()=>{const r=[{accessorKey:"sapreid",header:"Product ID",filterVariant:"text",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"sapre_name",header:"Spare Part Name",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"productFor",header:"Product type",id:"product_type_name",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"subproduct_type_name",header:"Sub-Product type",id:"subproduct_type_name",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"condition",header:"Condition",id:"condition_name",filterVariant:"select",filterSelectOptions:["New","Pre-Used"],muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"brandName",header:"Brand",id:"brand_name",muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"}},{accessorKey:"modelName",header:"Model",id:"model_name"},{accessorKey:"yearOfManufacture",header:"Year of Manufacture",id:"year_of_manufacture"},{accessorKey:"dealerName",header:"Dealer Name",id:"user_id.name"},{accessorKey:"cityName",header:"City",id:"city_name"},{accessorKey:"totalViews",header:"Views",filterVariant:"text",Cell:({cell:l})=>e.jsx(h,{display:"flex",justifyContent:"start",children:e.jsx(De,{className:"font-outfit",label:l.getValue(),color:"primary",size:"medium",sx:{fontWeight:500}})})},{accessorKey:"leadCount",header:"Leads",filterVariant:"text",Cell:({cell:l})=>e.jsx(h,{display:"flex",justifyContent:"start",children:e.jsx(De,{className:"font-outfit",label:l.getValue(),color:"warning",size:"medium",sx:{fontWeight:500}})})},{accessorKey:"isPublished",header:"Published",Cell:({cell:l})=>l.getValue(),filterVariant:"select",filterSelectOptions:["Yes","No"]},{accessorKey:"isSold",header:"Sold",Cell:({cell:l})=>l.getValue(),filterVariant:"select",filterSelectOptions:["Yes","No"]},{accessorKey:"listingDate",header:"Listing Date",id:"createdAt",Cell:({row:l})=>new Date(l.original.listingDate).toLocaleDateString("en-IN")}],n={header:"Actions",id:"actions",Cell:({row:l})=>{var f;return e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(F,{title:"View Details",children:e.jsx(k,{color:"primary",onClick:()=>Ne(l.original),children:e.jsx(Ce,{})})}),e.jsx(F,{title:"Edit",children:e.jsx(k,{color:"secondary",onClick:()=>Pe(l.original),children:e.jsx(we,{})})}),e.jsx(k,{color:"error",onClick:()=>Se(l.original),children:e.jsx(ke,{})}),e.jsx(tt,{checked:l.original.isActive,onChange:()=>ge(l.original),tooltipTitle:l.original.isActive?"Deactivate":"Activate",disabled:((f=l==null?void 0:l.original)==null?void 0:f.isPublished)=="No"})]})}};return[...r,n]},[c]);return e.jsxs(e.Fragment,{children:[B&&g&&e.jsxs(e.Fragment,{children:[g.type==="car"&&e.jsx(Bt,{isEditMode:!0,editData:g,onCancel:()=>{Q(!1),D(null)}}),g.type==="bike"&&e.jsx(Ft,{isEditMode:!0,editData:g,onCancel:()=>{Q(!1),D(null)}}),g.type==="sparepart"&&e.jsx(Mt,{isEditMode:!0,editData:g,onCancel:()=>{Q(!1),D(null)}})]}),e.jsx(st,{show:J,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this listing?",onConfirm:Ve,onCancel:Te,confirmText:"Yes",cancelText:"No"}),e.jsx(st,{show:ie,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${y!=null&&y.isActive?"deactivate":"activate"} this listing?`,onConfirm:Le,onCancel:V,confirmText:"Yes",cancelText:"No"}),j&&e.jsx(Be,{type:Z,title:Z==="success"?"Success!":Z==="error"&&S.toLowerCase().includes("deleted")?"Deleted!":Z==="error"?"Error!":"Warning!",message:S,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>_(!1)}),!B&&e.jsxs(e.Fragment,{children:[e.jsx(h,{ml:2,children:e.jsxs(Fe,{className:"font-outfit",variant:"h5",fontWeight:500,mb:2,children:["Product Listing Management  ",e.jsx(F,{title:"Manage car, bike, and spare part listings, view detailed information, and edit product details or images if incorrect information is submitted by the dealer.",arrow:!0,slotProps:{popper:{sx:{"& .MuiTooltip-tooltip":{fontSize:"0.9rem",backgroundColor:"#245492",color:"#fff",fontFamily:"Outfit",padding:"8px 12px"},"& .MuiTooltip-arrow":{color:"#245492"}}}},children:e.jsx(Dt,{fontSize:"medium",sx:{color:"#245492",cursor:"pointer"},onClick:r=>r.stopPropagation()})})]})}),c==="sparepart"?e.jsx(et,{exportType:!0,clickHandler:Ie,data:E,columns:qe,enableColumnFilters:!0,columnFilters:I,onColumnFiltersChange:ve,rowCount:Ee,pageIndex:M,pageSize:v,onPaginationChange:({pageIndex:r,pageSize:n})=>{u(r),R(n);const l={};I.forEach(({id:f,value:s})=>{s&&(l[f]=f==="isActive"?s==="Active":s)}),m(K({filters:l,type:c,fromDate:o,toDate:w,page:r,limit:n}))},enableProducttypeFilter:!0,productTypeValue:c,onProducttypeChange:r=>{ae(r),u(0),ne.set("type",r),fe(ne),m(K({fromDate:o,toDate:w,search:U,type:c,page:0,limit:v}))},fromDate:o,toDate:w,onFromDateChange:_e,onToDateChange:A},c):e.jsx(et,{exportType:!0,clickHandler:Ie,data:E,columns:Ke,enableColumnFilters:!0,columnFilters:I,onColumnFiltersChange:ve,rowCount:Ee,pageIndex:M,pageSize:v,onPaginationChange:({pageIndex:r,pageSize:n})=>{u(r),R(n);const l={};I.forEach(({id:f,value:s})=>{s&&(l[f]=f==="isActive"?s==="Active":s)}),m(K({filters:l,fromDate:o,type:c,toDate:w,page:r,limit:n}))},enableProducttypeFilter:!0,productTypeValue:c,onProducttypeChange:r=>{ae(r),u(0),ne.set("type",r),fe(ne),m(K({fromDate:o,toDate:w,search:U,type:c,page:0,limit:v}))},fromDate:o,toDate:w,onFromDateChange:_e,onToDateChange:A})]})]})},fs=()=>e.jsx(e.Fragment,{children:e.jsx(Et,{})});export{fs as default};
