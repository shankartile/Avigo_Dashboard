import{r,c as ne,d as de,dk as f,j as e,B as u,dl as ue,dm as pe,dn as me,dp as he}from"./index-N8t8oMzR.js";import{A as fe}from"./Add-BUtQdix6.js";import{D as xe}from"./Delete-07TAjR17.js";import{V as ye}from"./Visibility-CgGAKN6P.js";import{C as B}from"./Close-CwR_quIe.js";import{D as ge,E as je}from"./DataTable-BqUD-dAi.js";import{I as Ce}from"./InputField-riaj6edy.js";import{B as v}from"./Button-CBNcrDpD.js";import{T as Pe}from"./ToggleSwitch-DR4b514_.js";import{A as W}from"./Alert-CgNUKTJk.js";import{S as L}from"./SweetAlert-vzLgp13W.js";import{T as A}from"./Typography-CKlLxaDL.js";import{D as V,a as z}from"./Dialog-BGF2t3L7.js";import{D as Se}from"./DialogTitle-D6DEKDqS.js";import{I as y}from"./AlertTitle-D9ejxV9_.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./Tooltip-CwyNn424.js";import"./useSlotProps-CaIca8GW.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";const we=()=>{const[x,j]=r.useState({id:"",product_type:""}),[C,M]=r.useState(null),[P,S]=r.useState(null),[o,l]=r.useState(null),[g,i]=r.useState(""),[D,s]=r.useState(!1),[I,n]=r.useState(!1),[Te,ke]=r.useState(!1),[_,w]=r.useState(null),[H,T]=r.useState(!1),[h,R]=r.useState(""),[p,N]=r.useState(0),[d,U]=r.useState(10),[m,k]=r.useState(null),[Y,b]=r.useState(!1),a=ne(),{producttypeMaster:$=[],totalItems:q}=de(t=>t.ProducttypeMaster),K=$.map(t=>({...t,id:t._id}));r.useEffect(()=>{a(f({search:h,page:p,limit:d}))},[h,p,d]);const O=t=>{const{name:c,value:F}=t.target;j(ce=>({...ce,[c]:F}))},G=x.product_type.trim()!=="",J=async()=>{try{const t={product_type:x.product_type},c=await a(he(t)).unwrap();l("success"),i("Product type added successfully."),s(!0),setTimeout(()=>s(!1),3e3),a(f({search:h,page:p,limit:d})),n(!1)}catch(t){l("error"),i("Failed to addProduct type : "+t),s(!0),setTimeout(()=>s(!1),3e3)}},Q=async(t,c)=>{try{j({id:t._id||"",product_type:t.product_type||""}),S(c),n(!0)}catch{l("error"),i("Unable to fetchProduct type  details for editing."),s(!0)}},X=async()=>{try{const t={_id:x.id,product_type:x.product_type},c=await a(me(t)).unwrap();l("success"),i("Product type updated successfully."),s(!0),setTimeout(()=>s(!1),3e3),n(!1),S(null),a(f({search:h,page:p,limit:d}))}catch{l("error"),i("Failed to updateProduct type : "),s(!0),setTimeout(()=>s(!1),3e3)}},Z=t=>{w(t),T(!0)},ee=async()=>{if(_){try{await a(pe(_)).unwrap(),l("error"),i("Product type deleted successfully."),s(!0),setTimeout(()=>s(!1),3e3),a(f({search:h,page:p,limit:d}))}catch(t){l("error"),i("Delete failed: "+t),s(!0),setTimeout(()=>s(!1),3e3)}T(!1),w(null)}},te=()=>{T(!1),w(null)},se=t=>{k(t),b(!0)},re=async()=>{if(m){try{await a(ue({_id:m._id,isActive:!m.isActive})).unwrap(),l("success"),i(`Product type ${m.isActive?"deactivated":"activated"} successfully.`),s(!0),a(f({search:h,page:p,limit:d}))}catch(t){l("error"),i("Status toggle failed: "+t),s(!0)}setTimeout(()=>s(!1),3e3),b(!1),k(null)}},oe=()=>{b(!1),k(null)},ae=t=>{M(t)},E=()=>{M(null),n(!1)},le=t=>{R(t),N(0),a(f({search:t,page:1,limit:d}))},ie=[{accessorKey:"product_type",header:"Product Type"},{header:"Actions",Cell:({row:t})=>e.jsxs(u,{display:"flex",gap:1,children:[e.jsx(y,{color:"primary",onClick:()=>ae(t.original),children:e.jsx(ye,{})}),e.jsx(y,{color:"secondary",onClick:()=>Q(t.original,t.index),children:e.jsx(je,{})}),!t.original.isOther&&e.jsx(y,{color:"error",onClick:()=>Z(t.original._id),children:e.jsx(xe,{})}),e.jsx(Pe,{checked:t.original.isActive,onChange:()=>se(t.original),tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(L,{show:Y,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${m!=null&&m.isActive?"deactivate":"activate"} thisProduct type?`,onConfirm:re,onCancel:oe,confirmText:"Yes",cancelText:"No"}),e.jsx(L,{show:H,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete thisProduct type ?",onConfirm:ee,onCancel:te,confirmText:"Yes",cancelText:"No"}),D&&o&&e.jsx("div",{className:"p-4",children:e.jsx(W,{type:o,title:o==="success"?"Success!":o==="error"&&g.toLowerCase().includes("deleted")?"Deleted!":o==="error"?"Error!":"Warning!",message:g,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),I?e.jsxs(V,{open:I,onClose:(t,c)=>{c!=="backdropClick"&&n(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(u,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(Se,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:P!==null?"Edit Product type":"Add Product type"}),e.jsx(y,{sx:{position:"absolute",top:12,right:12},onClick:()=>n(!1),children:e.jsx(B,{})})]}),e.jsxs(z,{children:[D&&o&&e.jsx("div",{className:"mb-4",children:e.jsx(W,{type:o,title:o==="success"?"Success!":o==="error"&&g.toLowerCase().includes("deleted")?"Deleted!":o==="error"?"Error!":"Warning!",message:g,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>s(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(Ce,{label:"Product type ",name:"product_type",value:x.product_type,onChange:O})}),e.jsxs(u,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(v,{onClick:P!==null?X:J,className:"rounded-[25px]",disabled:!G,children:P!==null?"Update Product type ":"Add Product type "}),e.jsx(v,{variant:"secondary",onClick:()=>n(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(u,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(u,{ml:2,children:e.jsx(A,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Product type  Management"})}),e.jsxs(v,{onClick:()=>{j({id:"",product_type:""}),S(null),n(!0)},children:[e.jsx(fe,{}),"Add New Product type "]})]}),e.jsx(ge,{clickHandler:le,data:K,columns:ie,rowCount:q,pageIndex:p,pageSize:d,onPaginationChange:({pageIndex:t,pageSize:c})=>{N(t),U(c)}})]}),e.jsx(V,{open:!!C,onClose:E,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(u,{className:"rounded-xl overflow-hidden",children:[e.jsxs(u,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(A,{className:"font-outfit",variant:"h6",children:"Product type Details"}),e.jsx(y,{sx:{color:"white"},onClick:E,children:e.jsx(B,{})})]}),e.jsx(z,{children:C&&e.jsx(u,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(A,{className:"font-outfit",children:[e.jsx("strong",{children:"Product type:"})," ",C.product_type]})})})]})})]})},st=()=>e.jsx(e.Fragment,{children:e.jsx(we,{})});export{st as default};
