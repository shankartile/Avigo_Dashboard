import{r as p,h as W,u as G,a as M,j as s,s as V,P as q}from"./index-CcNgdVLz.js";import{A as $}from"./AuthPageLayout-DW1712Wt.js";import{L as F}from"./Label-C8N3GYzz.js";import{I as H}from"./InputField-BQ5ewBIw.js";import{B}from"./Button-B4_V5GRV.js";import{A as J}from"./Alert-U3gIVFWt.js";import{P as l}from"./index-D3LyqDt4.js";import"./GridShape-CkyprK3-.js";import"./utils-BtYGnpaM.js";import"./createSvgIcon-ClJPFlmG.js";import"./AlertTitle-C4QpKbd8.js";import"./CircularProgress-CVM8C023.js";import"./Typography-BMOygWke.js";var K=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function N(){return N=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}return r},N.apply(this,arguments)}function X(r,n){if(r==null)return{};var i={},t=Object.keys(r),e,c;for(c=0;c<t.length;c++)e=t[c],!(n.indexOf(e)>=0)&&(i[e]=r[e]);return i}function I(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Q(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,k(r,n)}function k(r,n){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(r,n)}var A=(function(r){Q(n,r);function n(){var t;return t=r.call(this)||this,t.handleExpired=t.handleExpired.bind(I(t)),t.handleErrored=t.handleErrored.bind(I(t)),t.handleChange=t.handleChange.bind(I(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(I(t)),t}var i=n.prototype;return i.getCaptchaFunction=function(e){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[e]:this.props.grecaptcha[e]:null},i.getValue=function(){var e=this.getCaptchaFunction("getResponse");return e&&this._widgetId!==void 0?e(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},i.execute=function(){var e=this.getCaptchaFunction("execute");if(e&&this._widgetId!==void 0)return e(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var e=this;return new Promise(function(c,_){e.executionResolve=c,e.executionReject=_,e.execute()})},i.reset=function(){var e=this.getCaptchaFunction("reset");e&&this._widgetId!==void 0&&e(this._widgetId)},i.forceReset=function(){var e=this.getCaptchaFunction("reset");e&&e()},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){var e=this.getCaptchaFunction("render");if(e&&this._widgetId===void 0){var c=document.createElement("div");this._widgetId=e(c,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(c)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.handleRecaptchaRef=function(e){this.captcha=e},i.render=function(){var e=this.props;e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,e.isolated;var c=X(e,K);return p.createElement("div",N({},c,{ref:this.handleRecaptchaRef}))},n})(p.Component);A.displayName="ReCAPTCHA";A.propTypes={sitekey:l.string.isRequired,onChange:l.func,grecaptcha:l.object,theme:l.oneOf(["dark","light"]),type:l.oneOf(["image","audio"]),tabindex:l.number,onExpired:l.func,onErrored:l.func,size:l.oneOf(["compact","normal","invisible"]),stoken:l.string,hl:l.string,badge:l.oneOf(["bottomright","bottomleft","inline"]),isolated:l.bool};A.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};function P(){return P=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}return r},P.apply(this,arguments)}function Y(r,n){if(r==null)return{};var i={},t=Object.keys(r),e,c;for(c=0;c<t.length;c++)e=t[c],!(n.indexOf(e)>=0)&&(i[e]=r[e]);return i}function Z(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var x={},ee=0;function te(r,n){return n=n||{},function(t){var e=t.displayName||t.name||"Component",c=(function(j){Z(y,j);function y(u,o){var a;return a=j.call(this,u,o)||this,a.state={},a.__scriptURL="",a}var w=y.prototype;return w.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+ee++),this.__scriptLoaderID},w.setupScriptURL=function(){return this.__scriptURL=typeof r=="function"?r():r,this.__scriptURL},w.asyncScriptLoaderHandleLoad=function(o){var a=this;this.setState(o,function(){return a.props.asyncScriptOnLoad&&a.props.asyncScriptOnLoad(a.state)})},w.asyncScriptLoaderTriggerOnScriptLoaded=function(){var o=x[this.__scriptURL];if(!o||!o.loaded)throw new Error("Script is not loaded.");for(var a in o.observers)o.observers[a](o);delete window[n.callbackName]},w.componentDidMount=function(){var o=this,a=this.setupScriptURL(),h=this.asyncScriptLoaderGetScriptLoaderID(),d=n,b=d.globalName,S=d.callbackName,E=d.scriptId;if(b&&typeof window[b]<"u"&&(x[a]={loaded:!0,observers:{}}),x[a]){var R=x[a];if(R&&(R.loaded||R.errored)){this.asyncScriptLoaderHandleLoad(R);return}R.observers[h]=function(m){return o.asyncScriptLoaderHandleLoad(m)};return}var f={};f[h]=function(m){return o.asyncScriptLoaderHandleLoad(m)},x[a]={loaded:!1,observers:f};var g=document.createElement("script");g.src=a,g.async=!0;for(var L in n.attributes)g.setAttribute(L,n.attributes[L]);E&&(g.id=E);var v=function(O){if(x[a]){var z=x[a],C=z.observers;for(var U in C)O(C[U])&&delete C[U]}};S&&typeof window<"u"&&(window[S]=function(){return o.asyncScriptLoaderTriggerOnScriptLoaded()}),g.onload=function(){var m=x[a];m&&(m.loaded=!0,v(function(O){return S?!1:(O(m),!0)}))},g.onerror=function(){var m=x[a];m&&(m.errored=!0,v(function(O){return O(m),!0}))},document.body.appendChild(g)},w.componentWillUnmount=function(){var o=this.__scriptURL;if(n.removeOnUnmount===!0)for(var a=document.getElementsByTagName("script"),h=0;h<a.length;h+=1)a[h].src.indexOf(o)>-1&&a[h].parentNode&&a[h].parentNode.removeChild(a[h]);var d=x[o];d&&(delete d.observers[this.asyncScriptLoaderGetScriptLoaderID()],n.removeOnUnmount===!0&&delete x[o])},w.render=function(){var o=n.globalName,a=this.props;a.asyncScriptOnLoad;var h=a.forwardedRef,d=Y(a,["asyncScriptOnLoad","forwardedRef"]);return o&&typeof window<"u"&&(d[o]=typeof window[o]<"u"?window[o]:void 0),d.ref=h,p.createElement(t,d)},y})(p.Component),_=p.forwardRef(function(j,y){return p.createElement(c,P({},j,{forwardedRef:y}))});return _.displayName="AsyncScriptLoader("+e+")",_.propTypes={asyncScriptOnLoad:l.func},W(_,t)}}var T="onloadcallback",re="grecaptcha";function D(){return typeof window<"u"&&window.recaptchaOptions||{}}function ne(){var r=D(),n=r.useRecaptchaNet?"recaptcha.net":"www.google.com";return r.enterprise?"https://"+n+"/recaptcha/enterprise.js?onload="+T+"&render=explicit":"https://"+n+"/recaptcha/api.js?onload="+T+"&render=explicit"}const ie=te(ne,{callbackName:T,globalName:re,attributes:D().nonce?{nonce:D().nonce}:{}})(A);function ae(){var R;const r=G(),n=M(),[i,t]=p.useState(!1),[e,c]=p.useState(""),[_,j]=p.useState(!1),[y,w]=p.useState(""),[u,o]=p.useState(""),[a,h]=p.useState(!1),[d,b]=p.useState(((R=r.state)==null?void 0:R.alert)||null),S=p.useRef(null);p.useEffect(()=>{var f;(f=r.state)!=null&&f.alert&&window.history.replaceState({},document.title)},[r.state]),p.useEffect(()=>{if(d){const f=setTimeout(()=>b(null),1500);return()=>clearTimeout(f)}},[d]);const E=async f=>{if(f.preventDefault(),!y||!u){b({type:"error",title:"Missing Fields",message:"Please enter email and password"});return}if(!a){b({type:"error",title:"CAPTCHA Required",message:"Please verify captcha"});return}const g={email:"admin@avigo.com",password:"Admin@123",role:"admin",permissions:[]},L={email:"staff@avigo.com",password:"Staff@123",role:"staff",permissions:[{key:"dashboard",allowed:!0},{key:"generalmaster",allowed:!0}]};let v=null;if(y===g.email&&u===g.password?v=g:y===L.email&&u===L.password&&(v=L),!v){b({type:"error",title:"Invalid Credentials",message:"Email or password is incorrect"});return}V(v.role,v),sessionStorage.setItem("activeRole",v.role),n(v.role==="admin"?"/superadmin/dashboard":"/admin/dashboard",{state:{alert:{type:"success",title:"Login Successful",message:`Welcome ${v.role}!`}}})};return s.jsxs(s.Fragment,{children:[d&&s.jsx("div",{className:"absolute top-10 left-5 z-10",children:s.jsx("div",{className:"max-w-sm w-full",children:s.jsx(J,{type:d.type,title:d.title,message:d.message,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>b(null)})})}),s.jsxs("div",{className:"flex flex-col flex-1",children:[s.jsx("div",{className:"w-full max-w-md pt-10 mx-auto"}),s.jsx("div",{className:"flex flex-col justify-center flex-1 w-full max-w-md mx-auto",children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-5 sm:mb-8",children:[s.jsx("h1",{className:"mb-2 font-semibold text-gray-800 text-title-sm sm:text-title-md",children:"Sign In"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enter your email and password to sign in!"})]}),s.jsx("form",{onSubmit:E,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs(F,{children:["Email ID ",s.jsx("span",{className:"text-error-500",children:"*"})]}),s.jsx(H,{placeholder:"admin@avigo.com / staff@avigo.com",value:y,name:"email",onChange:f=>w(f.target.value)})]}),s.jsxs("div",{children:[s.jsxs(F,{children:["Password ",s.jsx("span",{className:"text-error-500",children:"*"})]}),s.jsx(H,{placeholder:"Enter your password",value:u,name:"signin_password",type:_?"text":"password",onChange:f=>o(f.target.value)})]}),s.jsx("div",{children:s.jsx(ie,{ref:S,sitekey:"6LcHazMsAAAAALsmAAOfgWtjrHT8nTeyyJrX_fi-",onChange:()=>h(!0)})}),s.jsx(B,{variant:"customBlue",className:"w-full group",children:"Sign In"})]})})]})})]})]})}function ye(){return s.jsxs(s.Fragment,{children:[s.jsx(q,{title:"AVIGO",description:"This is React.js SignIn Tables Dashboard page AVIGO"}),s.jsx($,{children:s.jsx(ae,{})})]})}export{ye as default};
