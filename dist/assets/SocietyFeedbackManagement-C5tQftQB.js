import{r as a,E as B,j as e,B as i}from"./index-CNh2Ysd7.js";import{I as z}from"./Info-BLOe8JuO.js";import{V as L}from"./Visibility-CFK2wX7e.js";import{D as W}from"./Delete-BKL8mfiA.js";import{C as _}from"./Close-CSWdanUp.js";import{D as H}from"./DataTable-CBDiE-I1.js";import{A as O}from"./Alert-BBsTbpkb.js";import{S as q}from"./SweetAlert-DUVT9XWx.js";import{T as o}from"./Typography-DxP0RQcB.js";import{R as b}from"./Rating-DGs71l0C.js";import{I as p}from"./AlertTitle-BBXxFqxI.js";import{T as Y}from"./Tooltip-B4POfKz-.js";import{D as Z,a as G}from"./Dialog-CMeqEyOr.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./DialogTitle-sP3uGIgc.js";import"./Divider-1omdH51K.js";import"./Tabs-DWd8sdsH.js";import"./skeleton-H-TAVWvB.js";import"./Button-D2SEshHa.js";const J=[{id:"1",userId:"U001",user_id:"U001",userType:"admin",userName:"Rahul Sharma",userEmail:"rahul@gmail.com",phone:"9876543210",comment:"Very good society management and quick response.",rating:4.5,submissionDate:"2025-01-05T10:30:00",responseTimestamp:"2025-01-05T12:00:00"},{id:"2",userId:"U002",user_id:"U002",userType:"webuser",userName:"Sneha Patil",userEmail:"",phone:"9123456789",comment:"Maintenance service can be improved.",rating:3,submissionDate:"2025-01-06T15:45:00",responseTimestamp:"2025-01-06T16:30:00"},{id:"3",userId:"U003",user_id:"U003",userType:"admin",userName:"Amit Kulkarni",userEmail:"amit@gmail.com",phone:"9988776655",comment:"Security staff is very helpful.",rating:5,submissionDate:"2025-01-07T09:20:00",responseTimestamp:"2025-01-07T10:00:00"}],Q=()=>{const[h,D]=a.useState(J),[n,S]=a.useState("admin"),[r,l]=a.useState(null),[f,x]=a.useState(null),[k,d]=a.useState(!1),[C,g]=a.useState(!1),[T,F]=a.useState(""),[N,I]=a.useState(0),[w,M]=a.useState(10),[A,E]=a.useState([]),[j,P]=B(),[c,v]=a.useState(""),[m,K]=a.useState(""),y=a.useMemo(()=>h.filter(t=>{if(n&&t.userType!==n)return!1;const s=new Date(t.submissionDate).getTime();if(c){const u=new Date(c).setHours(0,0,0,0);if(s<u)return!1}if(m){const u=new Date(m).setHours(23,59,59,999);if(s>u)return!1}return!0}),[h,n,c,m]),U=()=>{f&&(D(t=>t.filter(s=>s.id!==f)),F("Feedback deleted successfully"),g(!0),d(!1),x(null))},R=()=>{l(null)},V=a.useMemo(()=>{const t=[{accessorKey:"userType",header:"Submitted By"},{accessorKey:"userName",header:"User Name"}];return n==="admin"?t.push({accessorKey:"userEmail",header:"Email"}):t.push({accessorKey:"phone",header:"Mobile No"}),t.push({accessorKey:"comment",header:"Feedback",Cell:({row:s})=>e.jsxs(o,{sx:{cursor:"pointer"},onClick:()=>l(s.original),children:[s.original.comment.slice(0,30),"..."]})},{accessorKey:"rating",header:"Rating",Cell:({cell:s})=>e.jsxs(i,{display:"flex",gap:.5,children:[e.jsx(b,{value:1,max:1,readOnly:!0,size:"small"}),Number(s.getValue()).toFixed(1)]})},{accessorKey:"submissionDate",header:"Submission Date",Cell:({cell:s})=>new Date(s.getValue()).toLocaleString("en-IN")},{header:"Actions",Cell:({row:s})=>e.jsxs(i,{display:"flex",gap:1,children:[e.jsx(p,{onClick:()=>l(s.original),children:e.jsx(L,{})}),e.jsx(p,{color:"error",onClick:()=>{x(s.original.id),d(!0)},children:e.jsx(W,{})})]})}),t},[n]);return e.jsxs(e.Fragment,{children:[C&&e.jsx(O,{type:"success",title:"Deleted!",message:T,variant:"filled",showLink:!1,onClose:()=>g(!1)}),e.jsx(i,{ml:2,mb:2,children:e.jsxs(o,{variant:"h5",fontWeight:500,children:["Society Feedback Management"," ",e.jsx(Y,{title:"View and manage feedback",children:e.jsx(z,{sx:{color:"#245492"}})})]})}),e.jsx(H,{data:y,columns:V,fromDate:c,toDate:m,onFromDateChange:v,onToDateChange:K,enableColumnFilters:!0,columnFilters:A,onColumnFiltersChange:E,pageIndex:N,pageSize:w,rowCount:y.length,exportType:!1,enablefeedbacktypeFilter:!0,productTypeValue:n,onFeedbacktypeChange:t=>{S(t),j.set("type",t),P(j)},onPaginationChange:({pageIndex:t,pageSize:s})=>{I(t),M(s)}}),e.jsx(q,{show:k,type:"error",title:"Delete Confirmation",message:"Are you sure you want to delete this feedback?",onConfirm:U,onCancel:()=>d(!1),confirmText:"Yes",cancelText:"No"}),e.jsx(Z,{open:!!r,onClose:()=>l(null),maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(i,{className:"rounded-xl overflow-hidden",children:[e.jsxs(i,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(o,{className:"font-outfit",variant:"h6",children:"Feedback Details"}),e.jsx(p,{sx:{color:"white"},onClick:R,children:e.jsx(_,{})})]}),e.jsx(G,{children:r&&e.jsxs(i,{className:"grid grid-cols-2 gap-4",children:[e.jsxs(o,{className:"font-outfit",children:[e.jsx("strong",{children:"Submitted By:"})," ",r.userType]}),e.jsxs(o,{className:"font-outfit",children:[e.jsx("strong",{children:"User Name:"})," ",r.userName]}),n!=="webuser"&&e.jsxs(o,{className:"font-outfit",children:[e.jsx("strong",{children:"Email:"})," ",r.userEmail]}),n!=="admin"&&e.jsxs(o,{className:"font-outfit",children:[e.jsx("strong",{children:"Mobile No:"})," ",r.phone]}),e.jsxs(o,{className:"font-outfit flex items-center gap-1",children:[e.jsx("strong",{children:"Rating:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{value:r.rating>0?1:0,max:1,readOnly:!0,size:"small"}),r.rating.toFixed(1)]})]}),e.jsxs(o,{className:"font-outfit",children:[e.jsx("strong",{children:"Date:"})," ",new Date(r.submissionDate).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})]}),e.jsxs(o,{className:"font-outfit",children:[e.jsx("strong",{children:"Message:"})," ",r.comment]})]})})]})})]})},Ne=()=>e.jsx(e.Fragment,{children:e.jsx(Q,{})});export{Ne as default};
