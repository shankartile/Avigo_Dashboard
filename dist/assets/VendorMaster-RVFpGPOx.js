import{r as s,c as ee,d as te,ae as g,j as e,B as p,af as se,ag as ae,ah as re,ai as oe}from"./index-N8t8oMzR.js";import{I as ne}from"./Info-lyeC1xGk.js";import{D as ie}from"./Delete-07TAjR17.js";import{V as le}from"./Visibility-CgGAKN6P.js";import{C as ce}from"./Close-CwR_quIe.js";import{D as de,E as ue}from"./DataTable-BqUD-dAi.js";import{I as f}from"./InputField-riaj6edy.js";import{B as V}from"./Button-CBNcrDpD.js";import{T as me}from"./ToggleSwitch-DR4b514_.js";import{A as pe}from"./Alert-CgNUKTJk.js";import{S as k}from"./SweetAlert-vzLgp13W.js";import{T as D}from"./Typography-CKlLxaDL.js";import{T as y}from"./Tooltip-CwyNn424.js";import{T as he}from"./truck-B_7KMo8y.js";import{D as ge,a as xe}from"./Dialog-BGF2t3L7.js";import{I as j}from"./AlertTitle-D9ejxV9_.js";import"./createSvgIcon-DUEWsKfg.js";import"./Cancel-BzUm9XFt.js";import"./utils-D3TFH80g.js";import"./index-LlRZSLEd.js";import"./DateTimeField-BNev5xzk.js";import"./index-CY0vqa8Z.js";import"./useSlotProps-CaIca8GW.js";import"./CircularProgress-BJr-bAJD.js";import"./Chip-Dnlh_trd.js";import"./dividerClasses-D-RO7W6F.js";import"./Pagination-DjFC1aKN.js";import"./DialogTitle-D6DEKDqS.js";import"./Divider-TBuFGUUO.js";import"./Tabs-BUaZVZQS.js";import"./skeleton-CrFh5em0.js";import"./createLucideIcon-hCp2CA4c.js";const fe=()=>{const[a,v]=s.useState({id:"",vendorName:"",gstNumber:"",contact:"",purpose:""}),[C,w]=s.useState(null),[N,n]=s.useState(null),[F,i]=s.useState(""),[E,r]=s.useState(!1),[T,l]=s.useState(!1),[ye,P]=s.useState(null),[je,B]=s.useState(!1),[A,I]=s.useState(null),[_,S]=s.useState(!1),[c,M]=s.useState(null),[K,b]=s.useState(!1),[h,z]=s.useState(""),[d,G]=s.useState(0),[u,L]=s.useState(10),o=ee(),{VendorCategoryMaster:R=[],totalItems:U}=te(t=>t.VendorCategoryMasters),W=R.map(t=>({...t,id:t._id}));s.useEffect(()=>{const t=setTimeout(()=>{o(g({search:h,page:d,limit:u}))},500);return()=>clearTimeout(t)},[h,d,u]);const x=t=>{const{name:m,value:X}=t.target;v(Z=>({...Z,[m]:X}))},Y=a.vendorName.trim()&&a.contact.trim(),$=async()=>{try{const t={vendorName:a.vendorName,gstNumber:a.gstNumber,contact:a.contact,purpose:a.purpose};await o(oe(t)).unwrap(),n("success"),i("Vendor added successfully."),r(!0),l(!1),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to add vendor."),r(!0)}},H=(t,m)=>{v({id:t._id,vendorName:t.vendorName,gstNumber:t.gstNumber,contact:t.contact,purpose:t.purpose}),w(m),l(!0)},q=async()=>{try{const t={_id:a.id,vendorName:a.vendorName,gstNumber:a.gstNumber,contact:a.contact,purpose:a.purpose};await o(re(t)).unwrap(),n("success"),i("Vendor updated successfully."),r(!0),l(!1),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to update vendor."),r(!0)}},J=async()=>{if(A){try{await o(se(A)).unwrap(),n("success"),i("Vendor deleted successfully."),r(!0),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to delete vendor."),r(!0)}S(!1),I(null)}},O=async()=>{if(c){try{await o(ae({_id:c._id,isActive:!c.isActive})).unwrap(),n("success"),i(`Vendor ${c.isActive?"deactivated":"activated"} successfully.`),r(!0),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to change vendor status."),r(!0)}b(!1),M(null)}},Q=[{accessorKey:"vendorName",header:"Vendor Name"},{accessorKey:"gstNumber",header:"GST Number"},{accessorKey:"contact",header:"Contact"},{accessorKey:"purpose",header:"Purpose"},{header:"Actions",Cell:({row:t})=>e.jsxs(p,{display:"flex",gap:1,children:[e.jsx(y,{title:"View",children:e.jsx(j,{color:"primary",onClick:()=>{P(t.original),B(!0)},children:e.jsx(le,{})})}),e.jsx(y,{title:"Edit",children:e.jsx(j,{onClick:()=>H(t.original,t.index),children:e.jsx(ue,{})})}),e.jsx(y,{title:"Delete",children:e.jsx(j,{color:"error",onClick:()=>{I(t.original._id),S(!0)},children:e.jsx(ie,{})})}),e.jsx(me,{checked:t.original.isActive,onChange:()=>{M(t.original),b(!0)},tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(k,{show:_,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this vendor?",onConfirm:J,onCancel:()=>S(!1),confirmText:"Yes",cancelText:"No"}),e.jsx(k,{show:K,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${c!=null&&c.isActive?"deactivate":"activate"} this vendor?`,onConfirm:O,onCancel:()=>b(!1),confirmText:"Yes",cancelText:"No"}),T?e.jsx(ge,{open:T,onClose:(t,m)=>{m!=="backdropClick"&&l(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"16px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0,0,0,0.2)"}},children:e.jsxs(p,{className:"rounded-xl overflow-hidden bg-white",children:[e.jsxs(p,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(D,{variant:"h6",className:"font-outfit",children:C!==null?"Edit Vendor":"Add Vendor"}),e.jsx(j,{sx:{color:"white"},onClick:()=>l(!1),children:e.jsx(ce,{})})]}),e.jsxs(xe,{children:[E&&N&&e.jsx(p,{mb:2,children:e.jsx(pe,{type:N,title:N==="success"?"Success!":"Error!",message:F,variant:"filled",showLink:!1,onClose:()=>r(!1)})}),e.jsxs(p,{px:2,py:2,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(f,{label:"Vendor Name",name:"vendorName",value:a.vendorName,onChange:x}),e.jsx(f,{label:"GST Number",name:"gstNumber",value:a.gstNumber,onChange:x}),e.jsx(f,{label:"Contact",name:"contact",value:a.contact,onChange:x}),e.jsx(f,{label:"Purpose",name:"purpose",value:a.purpose,onChange:x})]}),e.jsxs(p,{display:"flex",justifyContent:"center",gap:6,mt:5,children:[e.jsx(V,{disabled:!Y,onClick:C!==null?q:$,className:"rounded-[25px]",children:C!==null?"Update Vendor":"Add Vendor"}),e.jsx(V,{variant:"secondary",className:"rounded-[25px]",onClick:()=>l(!1),children:"Cancel"})]})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(p,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(D,{variant:"h5",className:"font-outfit",children:["Vendor Master",e.jsx(y,{title:"Add vendor name, GST, contact, and purpose.",arrow:!0,children:e.jsx(ne,{sx:{color:"#245492",ml:1}})})]}),e.jsxs(V,{onClick:()=>{v({id:"",vendorName:"",gstNumber:"",contact:"",purpose:""}),w(null),l(!0)},children:[e.jsx(he,{})," Add Vendor"]})]}),e.jsx(de,{clickHandler:z,data:W,columns:Q,rowCount:U,pageIndex:d,pageSize:u,onPaginationChange:({pageIndex:t,pageSize:m})=>{G(t),L(m)}})]})]})},Xe=()=>e.jsx(e.Fragment,{children:e.jsx(fe,{})});export{Xe as default};
