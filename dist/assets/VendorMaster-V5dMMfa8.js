import{r as s,c as ee,d as te,ae as g,j as e,B as p,af as se,ag as ae,ah as re,ai as oe}from"./index-CNh2Ysd7.js";import{A as ne}from"./Add-ONoAddvh.js";import{D as ie}from"./Delete-BKL8mfiA.js";import{V as le}from"./Visibility-CFK2wX7e.js";import{C as ce}from"./Close-CSWdanUp.js";import{D as de,E as ue}from"./DataTable-CBDiE-I1.js";import{I as f}from"./InputField-Cac7SuVh.js";import{B as b}from"./Button-D2SEshHa.js";import{T as me}from"./ToggleSwitch-CRLgVpk1.js";import{A as pe}from"./Alert-BBsTbpkb.js";import{S as k}from"./SweetAlert-DUVT9XWx.js";import{T as D}from"./Typography-DxP0RQcB.js";import{D as he,a as ge}from"./Dialog-CMeqEyOr.js";import{I as y}from"./AlertTitle-BBXxFqxI.js";import{T as V}from"./Tooltip-B4POfKz-.js";import"./createSvgIcon-BgVIxfXN.js";import"./Cancel-BLeHB2Qp.js";import"./utils-lR4eRFL7.js";import"./index-5igkt3_T.js";import"./DateTimeField-BSuPXSWe.js";import"./index-BfVZHwAX.js";import"./useSlotProps-Dx6fg7Ph.js";import"./CircularProgress-B1SplcgD.js";import"./Chip--RBU-Z22.js";import"./dividerClasses-BGxOqTuw.js";import"./Pagination-C_Nq6nsY.js";import"./DialogTitle-sP3uGIgc.js";import"./Divider-1omdH51K.js";import"./Tabs-DWd8sdsH.js";import"./skeleton-H-TAVWvB.js";const xe=()=>{const[a,j]=s.useState({id:"",vendorName:"",gstNumber:"",contact:"",purpose:""}),[v,w]=s.useState(null),[C,n]=s.useState(null),[F,i]=s.useState(""),[E,r]=s.useState(!1),[T,l]=s.useState(!1),[fe,P]=s.useState(null),[ye,B]=s.useState(!1),[A,M]=s.useState(null),[_,N]=s.useState(!1),[c,I]=s.useState(null),[K,S]=s.useState(!1),[h,z]=s.useState(""),[d,L]=s.useState(0),[u,G]=s.useState(10),o=ee(),{VendorCategoryMaster:R=[],totalItems:U}=te(t=>t.VendorCategoryMasters),W=R.map(t=>({...t,id:t._id}));s.useEffect(()=>{const t=setTimeout(()=>{o(g({search:h,page:d,limit:u}))},500);return()=>clearTimeout(t)},[h,d,u]);const x=t=>{const{name:m,value:X}=t.target;j(Z=>({...Z,[m]:X}))},Y=a.vendorName.trim()&&a.contact.trim(),$=async()=>{try{const t={vendorName:a.vendorName,gstNumber:a.gstNumber,contact:a.contact,purpose:a.purpose};await o(oe(t)).unwrap(),n("success"),i("Vendor added successfully."),r(!0),l(!1),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to add vendor."),r(!0)}},H=(t,m)=>{j({id:t._id,vendorName:t.vendorName,gstNumber:t.gstNumber,contact:t.contact,purpose:t.purpose}),w(m),l(!0)},q=async()=>{try{const t={_id:a.id,vendorName:a.vendorName,gstNumber:a.gstNumber,contact:a.contact,purpose:a.purpose};await o(re(t)).unwrap(),n("success"),i("Vendor updated successfully."),r(!0),l(!1),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to update vendor."),r(!0)}},J=async()=>{if(A){try{await o(se(A)).unwrap(),n("success"),i("Vendor deleted successfully."),r(!0),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to delete vendor."),r(!0)}N(!1),M(null)}},O=async()=>{if(c){try{await o(ae({_id:c._id,isActive:!c.isActive})).unwrap(),n("success"),i(`Vendor ${c.isActive?"deactivated":"activated"} successfully.`),r(!0),o(g({search:h,page:d,limit:u}))}catch{n("error"),i("Failed to change vendor status."),r(!0)}S(!1),I(null)}},Q=[{accessorKey:"vendorName",header:"Vendor Name"},{accessorKey:"gstNumber",header:"GST Number"},{accessorKey:"contact",header:"Contact"},{accessorKey:"purpose",header:"Purpose"},{header:"Actions",Cell:({row:t})=>e.jsxs(p,{display:"flex",gap:1,children:[e.jsx(V,{title:"View",children:e.jsx(y,{color:"primary",onClick:()=>{P(t.original),B(!0)},children:e.jsx(le,{})})}),e.jsx(V,{title:"Edit",children:e.jsx(y,{onClick:()=>H(t.original,t.index),children:e.jsx(ue,{})})}),e.jsx(V,{title:"Delete",children:e.jsx(y,{color:"error",onClick:()=>{M(t.original._id),N(!0)},children:e.jsx(ie,{})})}),e.jsx(me,{checked:t.original.isActive,onChange:()=>{I(t.original),S(!0)},tooltipTitle:t.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(k,{show:_,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete this vendor?",onConfirm:J,onCancel:()=>N(!1),confirmText:"Yes",cancelText:"No"}),e.jsx(k,{show:K,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${c!=null&&c.isActive?"deactivate":"activate"} this vendor?`,onConfirm:O,onCancel:()=>S(!1),confirmText:"Yes",cancelText:"No"}),T?e.jsx(he,{open:T,onClose:(t,m)=>{m!=="backdropClick"&&l(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"16px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0,0,0,0.2)"}},children:e.jsxs(p,{className:"rounded-xl overflow-hidden bg-white",children:[e.jsxs(p,{sx:{background:"linear-gradient(#255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(D,{variant:"h6",className:"font-outfit",children:v!==null?"Edit Vendor":"Add Vendor"}),e.jsx(y,{sx:{color:"white"},onClick:()=>l(!1),children:e.jsx(ce,{})})]}),e.jsxs(ge,{children:[E&&C&&e.jsx(p,{mb:2,children:e.jsx(pe,{type:C,title:C==="success"?"Success!":"Error!",message:F,variant:"filled",showLink:!1,onClose:()=>r(!1)})}),e.jsxs(p,{px:2,py:2,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(f,{label:"Vendor Name",name:"vendorName",value:a.vendorName,onChange:x}),e.jsx(f,{label:"GST Number",name:"gstNumber",value:a.gstNumber,onChange:x}),e.jsx(f,{label:"Contact",name:"contact",value:a.contact,onChange:x}),e.jsx(f,{label:"Purpose",name:"purpose",value:a.purpose,onChange:x})]}),e.jsxs(p,{display:"flex",justifyContent:"center",gap:6,mt:5,children:[e.jsx(b,{disabled:!Y,onClick:v!==null?q:$,className:"rounded-[25px]",children:v!==null?"Update Vendor":"Add Vendor"}),e.jsx(b,{variant:"secondary",className:"rounded-[25px]",onClick:()=>l(!1),children:"Cancel"})]})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(p,{display:"flex",justifyContent:"space-between",mb:2,children:[e.jsx(D,{variant:"h5",className:"font-outfit",children:"Vendor Master"}),e.jsxs(b,{onClick:()=>{j({id:"",vendorName:"",gstNumber:"",contact:"",purpose:""}),w(null),l(!0)},children:[e.jsx(ne,{})," Add Vendor"]})]}),e.jsx(de,{clickHandler:z,data:W,columns:Q,rowCount:U,pageIndex:d,pageSize:u,onPaginationChange:({pageIndex:t,pageSize:m})=>{L(t),G(m)}})]})]})},Je=()=>e.jsx(e.Fragment,{children:e.jsx(xe,{})});export{Je as default};
