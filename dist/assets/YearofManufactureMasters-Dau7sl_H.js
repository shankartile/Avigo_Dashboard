import{r,c as ce,d as ue,dv as h,j as e,B as d,dw as de,dx as fe,dy as me,dz as pe}from"./index-CcNgdVLz.js";import{A as he}from"./Add-CQx2oSmS.js";import{D as xe}from"./Delete-BWjouR_h.js";import{V as ge}from"./Visibility-Bad1pPYX.js";import{C as P}from"./Close-eApB0hKv.js";import{D as ye,E as je}from"./DataTable-DIxG5frN.js";import{I as Me}from"./InputField-BQ5ewBIw.js";import{B as k}from"./Button-B4_V5GRV.js";import{T as Ce}from"./ToggleSwitch-CZt8XOld.js";import{A as B}from"./Alert-U3gIVFWt.js";import{S as W}from"./SweetAlert-BfCzCAJa.js";import{T as b}from"./Typography-BMOygWke.js";import{D as L,a as z}from"./Dialog-BdfS6Lfy.js";import{D as we}from"./DialogTitle-BbPUlM9A.js";import{I as g}from"./AlertTitle-C4QpKbd8.js";import"./createSvgIcon-ClJPFlmG.js";import"./Cancel-CkCQy-6N.js";import"./utils-BtYGnpaM.js";import"./index-CLpR2HuM.js";import"./Tooltip-C-v54PpA.js";import"./useSlotProps-z1QAC-gu.js";import"./DateTimeField-CYfYG2Su.js";import"./index-D3LyqDt4.js";import"./CircularProgress-CVM8C023.js";import"./Chip-YFG14ne-.js";import"./dividerClasses-Bv38dMpn.js";import"./Pagination-DR3bn4wR.js";import"./Divider-BePmc644.js";import"./Tabs-CWf6flOX.js";import"./skeleton-DjwwWlQi.js";const Se=()=>{const[x,j]=r.useState({id:"",year_of_manufacture:""}),[M,v]=r.useState(null),[C,w]=r.useState(null),[s,n]=r.useState(null),[y,l]=r.useState(""),[A,t]=r.useState(!1),[D,c]=r.useState(!1),[Ye,_e]=r.useState(!1),[I,S]=r.useState(null),[V,Y]=r.useState(!1),[p,H]=r.useState(""),[f,N]=r.useState(0),[u,R]=r.useState(10),[m,_]=r.useState(null),[U,T]=r.useState(!1),o=ce(),{YearofManufactureMaster:$=[],totalItems:q}=ue(a=>a.YearofManufactureMaster),K=$.map(a=>({...a,id:a._id}));r.useEffect(()=>{o(h({search:p,page:f,limit:u}))},[p,f,u]);const O=a=>{const{name:i,value:F}=a.target;j(ie=>({...ie,[i]:F}))},G=x.year_of_manufacture.trim()!=="",J=async()=>{try{const a={year_of_manufacture:x.year_of_manufacture},i=await o(pe(a)).unwrap();n("success"),l("Year of Manufacture added successfully."),t(!0),setTimeout(()=>t(!1),3e3),o(h({search:p,page:f,limit:u})),c(!1)}catch(a){n("error"),l("Failed to addYear of Manufacture : "+a),t(!0),setTimeout(()=>t(!1),3e3)}},Q=async(a,i)=>{try{j({id:a._id||"",year_of_manufacture:a.year_of_manufacture||""}),w(i),c(!0)}catch{n("error"),l("Unable to fetchYear of Manufacture  details for editing."),t(!0)}},X=async()=>{try{const a={_id:x.id,year_of_manufacture:x.year_of_manufacture},i=await o(me(a)).unwrap();n("success"),l("Year of Manufacture updated successfully."),t(!0),setTimeout(()=>t(!1),3e3),c(!1),w(null),o(h({search:p,page:f,limit:u}))}catch{n("error"),l("Failed to updateYear of Manufacture : "),t(!0),setTimeout(()=>t(!1),3e3)}},Z=a=>{S(a),Y(!0)},ee=async()=>{if(I){try{await o(fe(I)).unwrap(),n("error"),l("Year of Manufacture deleted successfully."),t(!0),setTimeout(()=>t(!1),3e3),o(h({search:p,page:f,limit:u}))}catch(a){n("error"),l("Delete failed: "+a),t(!0),setTimeout(()=>t(!1),3e3)}Y(!1),S(null)}},ae=()=>{Y(!1),S(null)},te=a=>{_(a),T(!0)},re=async()=>{if(m){try{await o(de({_id:m._id,isActive:!m.isActive})).unwrap(),n("success"),l(`Year of Manufacture ${m.isActive?"deactivated":"activated"} successfully.`),t(!0),o(h({search:p,page:f,limit:u}))}catch(a){n("error"),l("Status toggle failed: "+a),t(!0)}setTimeout(()=>t(!1),3e3),T(!1),_(null)}},se=()=>{T(!1),_(null)},oe=a=>{v(a)},E=()=>{v(null),c(!1)},ne=a=>{H(a),N(0),o(h({search:a,page:1,limit:u}))},le=[{accessorKey:"year_of_manufacture",header:"Year of Manufacture"},{header:"Actions",Cell:({row:a})=>e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(g,{color:"primary",onClick:()=>oe(a.original),children:e.jsx(ge,{})}),e.jsx(g,{color:"secondary",onClick:()=>Q(a.original,a.index),children:e.jsx(je,{})}),!a.original.isOther&&e.jsx(g,{color:"error",onClick:()=>Z(a.original._id),children:e.jsx(xe,{})}),e.jsx(Ce,{checked:a.original.isActive,onChange:()=>te(a.original),tooltipTitle:a.original.isActive?"Deactivate":"Activate"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(W,{show:U,type:"warning",title:"Confirm Status Change",message:`Are you sure you want to ${m!=null&&m.isActive?"deactivate":"activate"} thisYear of Manufacture?`,onConfirm:re,onCancel:se,confirmText:"Yes",cancelText:"No"}),e.jsx(W,{show:V,type:"error",title:"Confirm Deletion",message:"Are you sure you want to delete thisYear of Manufacture ?",onConfirm:ee,onCancel:ae,confirmText:"Yes",cancelText:"No"}),A&&s&&e.jsx("div",{className:"p-4",children:e.jsx(B,{type:s,title:s==="success"?"Success!":s==="error"&&y.toLowerCase().includes("deleted")?"Deleted!":s==="error"?"Error!":"Warning!",message:y,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),D?e.jsxs(L,{open:D,onClose:(a,i)=>{i!=="backdropClick"&&c(!1)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:25,p:4,position:"relative"},children:[e.jsx(we,{className:"font-outfit",sx:{color:"white",position:"absolute",top:5},children:C!==null?"Edit Year of Manufacture":"Add Year of Manufacture"}),e.jsx(g,{sx:{position:"absolute",top:12,right:12},onClick:()=>c(!1),children:e.jsx(P,{})})]}),e.jsxs(z,{children:[A&&s&&e.jsx("div",{className:"mb-4",children:e.jsx(B,{type:s,title:s==="success"?"Success!":s==="error"&&y.toLowerCase().includes("deleted")?"Deleted!":s==="error"?"Error!":"Warning!",message:y,variant:"filled",showLink:!1,linkHref:"",linkText:"",onClose:()=>t(!1)})}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsx(Me,{label:"Year of Manufacture ",name:"year_of_manufacture",value:x.year_of_manufacture,onChange:O})}),e.jsxs(d,{display:"flex",justifyContent:"center",gap:6,mt:4,children:[e.jsx(k,{onClick:C!==null?X:J,className:"rounded-[25px]",disabled:!G,children:C!==null?"Update Year of Manufacture ":"Add Year of Manufacture "}),e.jsx(k,{variant:"secondary",onClick:()=>c(!1),className:"rounded-[25px]",children:"Cancel"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(d,{ml:2,children:e.jsx(b,{variant:"h5",fontWeight:500,className:"font-outfit",children:"Year of Manufacture  Management"})}),e.jsxs(k,{onClick:()=>{j({id:"",year_of_manufacture:""}),w(null),c(!0)},children:[e.jsx(he,{}),"Add New Year of Manufacture "]})]}),e.jsx(ye,{clickHandler:ne,data:K,columns:le,rowCount:q,pageIndex:f,pageSize:u,onPaginationChange:({pageIndex:a,pageSize:i})=>{N(a),R(i)}})]}),e.jsx(L,{open:!!M,onClose:E,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"25px"}},BackdropProps:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"}},children:e.jsxs(d,{className:"rounded-xl overflow-hidden",children:[e.jsxs(d,{sx:{background:"linear-gradient( #255593 103.05%)",height:60,px:4,display:"flex",alignItems:"center",justifyContent:"space-between",color:"white"},children:[e.jsx(b,{className:"font-outfit",variant:"h6",children:"Year of Manufacture Details"}),e.jsx(g,{sx:{color:"white"},onClick:E,children:e.jsx(P,{})})]}),e.jsx(z,{children:M&&e.jsx(d,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(b,{className:"font-outfit",children:[e.jsx("strong",{children:"Year of Manufacture:"})," ",M.year_of_manufacture]})})})]})})]})},ta=()=>e.jsx(e.Fragment,{children:e.jsx(Se,{})});export{ta as default};
